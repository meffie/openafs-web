<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Google Summer of Code 2008 Project Summaries</title>
</head>

<body>


<h1>OpenAFS and Google Summer of Code 2008</h1>
<p>OpenAFS applied for the second time to be part of the Google Summer of Code, and this year was accepted. Ultimately Google opted to fund 6 projects for OpenAFS; Two more were funded with the same rules using other money including that granted by Google to a sponsoring organization per student.
<p>
As this was the first year for OpenAFS as an organization as well as all students and mentors, a lot of learning took place which will no doubt be valuable for all concerned who might be involved in the future.
<p>
Of the eight projects undertaken, four were not completed, and four attained a substantial amount of their initial or rescoped goals. Here are the details, in the words of the mentors.
<p>
<ul>
<li><A HREF="#mmc">Microsoft Management Console Snap-ins, Client and Server</A></li>
<li><A HREF="#kafs">Implementing OpenAFS features into RedHat's kafs kernel module</A></li>
<li><A HREF="#rwrep">Read/Write replication for OpenAFS</A></li>
<li><A HREF="#perfile">Per-file ACLs for OpenAFS</A></li>
<li><A HREF="#discon">Read/Write Disconnected AFS</A></li>
</ul>
<p>
<a name="mmc"><h2>Project: Microsoft Management Console Snap-ins, Client and Server</h2></a>
<h3>Mentor: Asanka Herath</h3>
<h3>Students: Kiran Kumar (server) and Joseph Yeung (client)</h3>
Kiran was a
GSoC student while we recruited Joseph independently of the GSoC
program.  However, both students were given the same deadlines and
evaluations and were treated as if both of them were GSoC students.
<p>
Kiran was working on the AFS Server Manager MMC snap-in and Joseph was
working on the AFS Client MMC snap-in.  Since both of these were MMC
snap-ins and would use the same set of technologies, we had the two
students work together during the start of the coding phase.  The
first goal that we gave them was to develop a sample MMC snap-in that
would incorporate features from both the client and server snap-ins.
The objective was to allow them to work together and learn the basics
of developing an MMC snap-in and hopefully come up with a code base
upon which they can base their respective snap-ins.
<p>
Both students, mostly with the help of Jeffrey Altman, set up their
development environments and also OpenAFS Clients and test cells.
Soon afterwards, we started running into trouble.  One problem that we
had was that both students were new to almost every technology that
they were going to use during the project.  They had trouble finding
information, good tutorials and sample code.  They did find some, but
there were issues regarding difficulty comprehending or the relevance
of the materials. Most of the mentoring time at this phase was spent 
finding or creating resources for them and explaining material for them.
<p>
Jeffrey and I called for weekly status meetings where Kiran, Joseph
and Vamshi Velagapuri were to report on their progress for the week
that passed.  While informative at first, the weekly meetings proved
to be less than effective as time went on.  This was because the
students were not making substantial progress worth reporting on and
they were almost constantly in touch with either Jeffrey or me.
<p>
By the time the midterm evaluation period rolled around, the sample
MMC plug-in was still in the intermediate stages.  After looking at
the code that they were producing, I asked them to make several
substantial changes to fix architectural mistakes that they had made.
Even with the changes, the code was lacking in organization and would
not have served as a coherent base for their respective plug-ins.
Nevertheless, considering the progress they made in the weeks prior to
the midterm evaluation, we decided to give them a passing grade with
the hope that they will produce useful code by the end of GSoC.
<p>
The students' lack of experience and the difficulty that they
encountered in understanding all the new material was a continuous
source of delays in the weeks that followed.  Both Jeffrey and I
tried to help them as much as we could.  Later on I realized that the
GSoC coding period was not long enough for them to gain enough
experience with all the technologies that they were learning to
produce quality code.
<p>
At "keyboards down", Kiran and Joseph together turned in partially
completed code for the sample snap-in.  The students, at this point,
had finished working on the sample and had started working on their
respective snap-ins.  Even though they had put in a lot of work, the
sample snap-in was not fully functional and the code was disorganized.
 With not even the first goal met, we had little choice but to
disqualify the students at the final evaluation.
<p>
We believe that this was a good learning experience for the students
and that they acquired working experience of a number of technologies
that they would otherwise not be familiar with.  However, in
retrospect, the coding phase of the GSoC is not a suitable time for
the students to acquire all the knowledge necessary for their
projects.  During the selection phase, we should have tested the
applicants and factored in the learning curve for each applicant
before making a selection.  In addition, having a study plan would
have helped.
<p>
During the course of GSoC, there were several occasions where we asked
to see an implementation plan for the code that the students were
working on.  We never received these plans and the requests often went
unanswered.  In the absence of these plans and regular commits, we
often didn't see substantial mistakes until it was very late and
expensive to fix.  A regular commit and review cycle would have
prevented this.
<p>
In the end, although the projects themselves were unsuccessful, this
was a valuable learning experience for both the students and the
mentors involved.
<a name="kafs"><h2>Project: Implementing OpenAFS features into RedHat's kafs kernel module</h2></a>
<h3>Mentor: David Howells</h3>
<h3>Students: Jacob Thebault-Spieker</h3>
I enjoyed the mentoring experience, though it was frustrating at times.  The
student selected for me was keen and learnt pretty
quickly, but he was somewhat unprepared for what he was getting into.
<p>
I'm not saying that the unpreparedness was his fault specifically: his
university course had only taught him Java and a bit of C++ to that point.  I
had to teach him a dollop of C as I went along, and also educate him in some of
the kernel-level concepts (such as the separation of userspace and kernel
spaces) that he hadn't come across at that point.
<p>
It makes me realise just how much Java holds your hand, and how low-level C
really is, and how much the Linux kernel differs from ordinary user-level
programming.
<p>
My student also had problems properly sequencing his code at first,
particularly largish functions with multiple consecutive conditional
blocks.  I would guess that this is due to a lack of experience, and is
just something that he's overcoming with practice.
<p>
I also had to persuade him to compile his code and fix warnings before
sending me the patches, but he did get into the habit of doing so
without prompting.
<p>
To summarise, my student didn't manage to achieve many of the goals originally
set.  He was way out of his depth with regard to the programming environment
and programming techniques, and it took a big chunk of the allotted time just
to get him up to speed.
<p>
What he did achieve, though, is a partial documentation of the pioctl functions
available through AFS, a pioctl syscall and VFS entry point for the Linux
kernel and some implemented pioctls for the kAFS call.
<p>
He did learn quickly, though, once he got his head around it and had got some
practice under his belt.  Hopefully I've helped him become much more effective.
<p>
With respect to the mentoring tools available, IRC was invaluable - especially
as it's a public IRC channel, and so whilst I was guiding him through the flaws
in his code, other people could drop comments in to help clarify what I was
saying.  Furthermore, he displayed quite a lot of initiative, and would seek
help from other people if I wasn't around.  This should be encouraged in
others.
<a name="rwrep"><h2>Project: Read/Write replication for OpenAFS</h2></a>
<h3>Mentor: Derrick Brashear</h3>
<h3>Students: Vishal Powar</h3>
Vishal chose to tackle a project which has had my interest for years, namely,
the lack of full read-write replication in AFS. His prior background suited 
him well to undertake this work.
<p>
Initially Vishal was able to join us on IRC, which greatly helped get things rolling: he got a bootstrap development environment up with help from other members of the community, although the process here pointed to the need to provide one or some canned development environments to students in the future. 
<p>
As the first half of the program continued, Vishal's schedule and routine did not allow him to be online for interactive communication to the extent he had initially been. Combined with time zone differences, our communication suffered, and one problem he ran into ended up consuming a lot of time. Later, when he had taken a break and implemented other pieces of the code we were able to revisit the issue he had been grappling with and I found the key element I had failed to either notice or warn him of earlier, and provided a sample function to help overcome the issue. It would take a couple more passes before we got all the details straightened out, as the particular low-level feature he needed for the code he was creating had simply not previously existed in OpenAFS.
<p>
Having passed the major obstacle, Vishal was able to make a substantial leap toward a complete implementation at the end of the program. Technically some of the work did take place beyond the suggested "keyboards-down" date. However, what he was able to contribute at the end is an implementation which needs only work on a recovery mechanism to use following an outage or when adding a slave, and selection and tracking of the master copy for a given replicated volume. 
<p>
Aside from issues with communication, not solely mine or his, this project turned out very well and hopefully Vishal gained as much from the experience as we did working with him.
<p>
A number of lessons about managing future projects, especially with regard to communicating well at sticking points and ideally sharing a matched development environment between mentor and student, if not the same environment, came out of this, and hopefully can be used in the future to achieve further and greater success.
<p>
<a name="perfile"><h2>Project: Per-file ACLs for OpenAFS</h2></a>
<h3>Mentor: Matt Benjamin</h3>
<h3>Student: Andreas Matsikaris</h3>
Andreas Matsikaris was shy, and in his first-year of studies.  He showed
great interest and energy in the application process, but less interest
and energy during the spin up and coding phases.  I took Andreas' great
interest and energy as a sign that he could overcome whatever obstacles
and succeed.  In practice, it didn't work out that way--Andreas and I
share some of the responsibility for that, in my estimation.
<p>
My errors mentoring Andreas are in 3 areas.  First, the initial
application showed engagement and effort, but reveals a bit about how
much Andreas would have had to learn to complete the project.  Still,
giving students the opportunity to overcome obstacles and gain skills is
part of the function of education and of GSOC, so I conclude the
decision to fund Andreas was reasonable.  But in execution,  issues came
up that took Andreas' project off track.  Initially, spin up went fairly
well.  I provided scripts and assistance, and Andreas was able to set up
a working development environment and test AFS cell built from that
environment.  Some issues appeared subsequently.
<p>
Andreas had an previously undisclosed plan to take some vacations and
absences early on, which I objected to, but not strongly enough.  More
importantly, Andreas was comfortable communicating with me, but not with
the general community on the AFS IRC channel.  The example Jeff Altman
set for our project was to strongly encourage participation in public
IRC, and although I followed this lead, Andreas pushed back hard.  He
wanted to work on his own schedule and send periodic reports.  After a
3-way email conversation with Andreas and Derrick, Andreas agreed to
more or less our preferred way of working.  In practice, Andreas tended
to contact me via private IRC and I felt caught in a position of
chastizing him or "outing" him to public IRC, and mostly didn't.  In
hindsight, public participation in IRC should have been a mandate, and
would have had a big impact on Andreas' ability to complete the project.
<p>
But there were also the disappearances.  Andreas was unreachable for
well over a week during part 1, but delivered some experimental code
that as I wrote in midpoint eval, looked like it might be hypothetically
completing most of one of the 4-5 development objectives for the project
(ie, modifying server RPC permission checking to observe per-file ACLs
if present).  Rather than accelerating progress from this point,
however, Andreas hit some development roadblocks (needing to come to
grips with Linux kernel module development processes), and became
frustrated.  He also disappeared again for another week or two.  On
returning, he was still having trouble with building and loading a
kernel module--something which he had appeared to have done successfully
during the spin-up period.  I had encouraged Andreas to focus on a
subset of the full tasks, building on what he had already done, but
necessarily involved kernel module work.
<p>
In the end, Andreas approached me/us 2.5
weeks from pencils-down with his intention to quit.  We requested he not
quit, and keep at it, but he was by this point demoralized.
In hindsight, I think part of my own mistakes mentoring him were the
strategic and tactical mistakes enumerated above (IRC, etc), but another
was perhaps a failure of coaching.  I had signed-up prepared to guide a
student in a project, but from time constraints, not to execute it
myself.  Andreas' preference to work autonomously obviously was not
bearing fruit, but I could have (at several more points than I in fact
did) stepped in to push him back onto the the path.  The effort involved
in co-programming the project (which would have been lighter had Andreas
used the resources of the community, as Dragos and Jakob did) was
nevertheless something I couldn't take on, and possibly that is what the
situation required.
<p>
<a name="discon"><h2>Read/Write Disconnected AFS</h2></a>
<h3>Mentor: Simon Wilkinson</h3>
<h3>Student: Dragos Tatulea</h3>
Originally, the disconnected operations project was based around integrating, and improving, the original University of Michigan disconnected operations code. However, during the two weeks of project discussion on IRC that preceeded student selection, it became obvious that simply integrating the Michigan code wasn't going to produce an acceptable outcome. Instead, the project shifted to creating a new implementation of read/write disconnected operation, building upon work that had already been done to produce a read-only system.
<p>
Dragos had no prior experience with the OpenAFS project, but took an active interest in these initial IRC discussions. Before student selection he set up his own development environment, and has maintained a high level of involvement since then - in addition to the code that was the outcome of his project, he also contributed source documentation patches as he attempted to learn the OpenAFS codebase, and we continued to have frequent conversations on IRC through-out the project.
<p>
The complexity of the OpenAFS source code is one of the key barriers to students participating in GSoC, in my opinion. I spent a large amount of time guiding Dragos through the tangled maze of source code, as well as the intricacies of disconnected operation. Mentoring took considerably more of my time than I originally envisaged. I think this requirement for close mentor involvement is something we should consider for the future - having a student who was prepared to ask questions whenever they became stuck, and a mentor who was available to answer them, was one of the key elements in the success of this project. Better source documentation would undoubtedly help with this, but I think students have to be encouraged to ask questions.
<p>
Overall, the project was a success, producing a pretty complete implementation of disconnection for all of the common file operations. The entire project plan was not completed, however, leaving items such as file sets and pinning for later work. Work slowed significantly after the midterm, as the complexities of directory operations started to bite. Better documentation of the cache manager internals would certainly have helped here, as would more mentor time to have addressed these issues as they started to appear. However, there is an important balance to be struck between assistance and hand holding. In addition to mentor advice being available, students have to be encouraged to develop the skills to learn from the source code itself.
</body>
</html>
