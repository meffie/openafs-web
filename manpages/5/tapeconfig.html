<html><head><title>tapeconfig</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:29 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>tapeconfig - Defines parameters for tape devices and backup data files</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <em>tapeconfig</em> file defines basic configuration parameters for all of the tape devices or backup data files available for backup operations on a Tape Coordinator machine.
The file is in ASCII format and must reside in the local <em>/usr/afs/backup</em> directory.
The instruction for each tape device or backup data file appears on its own line and each has the following format:</p>

<pre>   [&#60;capacity&#62; &#60;filemark_size&#62;] &#60;device_name&#62; &#60;port_offset&#62;</pre>

<p>where</p>

<dl>
<dt><a name="&#60;capacity&#62;"
>&#60;capacity&#62;</a></dt>

<dd>
<p>Specifies the capacity of the tapes used with a tape device, or the amount of data to write into a backup data file. The Tape Coordinator refers to this value in two circumstances:</p>

<ul><li><p>When the capacity field of a tape or backup data file&#39;s label is empty (because the tape has never been labeled). The Tape Coordinator records this value on the label and uses it when determining how much data it can write to the tape or file during a <b>backup dump</b> or <b>backup savedb</b> operation. If there is already a capacity value on the label, the Tape Coordinator uses it instead.</p></li><li><p>When the <b>-size</b> argument is omitted the first time the <b>backup labeltape</b> command is used on a given tape or file. The Tape Coordinator copies this value into the label&#39;s capacity field.</p></li></ul>

<p>The Tape Coordinator uses this capacity value or the one on the Backup System tape label to track how much space remains as it writes data to a tape or backup data file. The appropriate value to record for a tape depends on the size of the tapes usually used in the device and whether it has a compression mode; for suggested values, see the <i>IBM AFS Administration Guide</i> chapter on configuring the Backup System. If using a value obtained from the <b>fms</b> command, reduce it by 10% to 15% before recording it in the file.</p>

<p>For a backup data file, it is best to provide a value that helps the Tape Coordinator avoid reaching the end-of-file (EOF) unexpectedly. Make it at least somewhat smaller than the amount of space available on the partition housing the file when the dump operation begins, and never larger than the maximum file size allowed by the operating system.</p>

<p>Specify a (positive) integer or decimal value followed by a letter than indicates units, with no intervening space. In a decimal number, the number of digits after the decimal point must not translate to fractions of bytes. The maximum acceptable value is 2048 GB (2 TB). The acceptable units letters are as follows; if the letter is omitted, the default is kilobytes.</p>

<ul><li><p><code>k</code> or <code>K</code> for kilobytes (KB).</p></li><li><p><code>m</code> or <code>M</code> for megabytes (MB).</p></li><li><p><code>g</code> or <code>G</code> for gigabytes (GB).</p></li><li><p><code>t</code> or <code>T</code> for terabytes (TB).</p></li></ul>

<p>If this field is omitted, the Tape Coordinator uses the maximum acceptable value (2048 GB or 2 TB). Either leave both this field and the &#60;filemark_size&#62; field empty, or provide a value in both of them.</p>

<dt><a name="&#60;filemark_size&#62;"
>&#60;filemark_size&#62;</a></dt>

<dd>
<p>Specifies the size of a tape device&#39;s filemarks (also called end-of-file or EOF marks), which is set by the device&#39;s manufacturer. In a dump to tape, the Tape Coordinator inserts filemarks at the boundary between the data from each volume, so the filemark size affects how much space is available for actual data.</p>

<p>The appropriate value to record for a tape depends on the size of the tapes usually used in the device and whether it has a compression mode; for suggested values, see the <i>IBM AFS Administration Guide</i> chapter on configuring the Backup System. If using a value obtained from the <b>fms</b> command, increase it by 10% to 15% before recording it in the file.</p>

<p>For backup data files, record a value of 0 (zero). The Tape Coordinator actually ignores this field for backup data files, because it does not use filemarks when writing to a file.</p>

<p>Use the same notation as for the &#60;capacity&#62; field, but note that the default units is bytes rather than kilobytes. The maximum acceptable value is 2048 GB.</p>

<p>If this field is empty, the Tape Coordinator uses the value 0 (zero). Either leave both this field and the &#60;capacity&#62; field empty, or provide a value in both of them.</p>

<dt><a name="&#60;device_name&#62;"
>&#60;device_name&#62;</a></dt>

<dd>
<p>Specifies the complete pathname of the tape device or backup data file. The format of tape device names depends on the operating system, but on UNIX systems device names generally begin with the string <em>/dev/</em>. For a backup data file, this field defines the complete pathname; for a discussion of suggested naming conventions see the description of the <code>FILE</code> instruction in <a href="../5/butc.html" class="podlinkman"
>butc(5)</a>.</p>

<dt><a name="&#60;port_offset&#62;"
>&#60;port_offset&#62;</a></dt>

<dd>
<p>Specifies the port offset number associated with this combination of Tape Coordinator and tape device or backup data file.</p>

<p>Acceptable values are the integers <code>0</code> through <code>58510</code> (the Backup System can track a maximum of 58,511 port offset numbers). Each value must be unique among the cell&#39;s Tape Coordinators, but any number of them can be associated with a single machine. Port offset numbers need not be assigned sequentially, and can appear in any order in the <em>tapeconfig</em> file. Assign port offset <code>0</code> to the Tape Coordinator for the tape device or backup data file used most often for backup operations; doing so will allow the operator to omit the <b>-portoffset</b> argument from the largest possible number of <b>backup</b> commands.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>Creating the file requires UNIX <code>w</code> (write) and <code>x</code> (execute) permissions on the <em>/usr/afs/backup</em> directory. Editing the file requires UNIX <code>w</code> (write) permission on the file.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example tapeconfig file configures three tape devices and a backup data file. The first device has device name <em>/dev/rmt/0h</em>, and is assigned port offset <code>0</code> because it will be the most frequently used device for all backup operations in the cell. Its default tape capacity is 2 GB and filemark size is 1 MB. The <em>/dev/rmt/3h</em> drive has half the capacity but a much smaller filemark size; its port offset is <code>3</code>. The third device listed, <em>/dev/rmt/4h</em>, has the same capacity and filemark size as the first device and is assigned port offset <code>2</code>. Port offset <code>4</code> is assigned to the backup data file <em>/dev/FILE</em>, which is actually a symbolic link to the actual file located elsewhere on the local disk. The Tape Coordinator writes up to 1.5 GB into the file; as recommended, the filemark size is set to zero.</p>

<pre>   2G 1M /dev/rmt/0h 0
   1g 4k /dev/rmt/3h 3
   2G 1m /dev/rmt/4h 2
   1.5G 0 /dev/FILE 4</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../8/backup_addhost.html" class="podlinkpod"
>backup_addhost(8)</a>, <a href="../8/backup_dump.html" class="podlinkpod"
>backup_dump(8)</a>, <a href="../8/backup_labeltape.html" class="podlinkpod"
>backup_labeltape(8)</a>, <a href="../8/backup_savedb.html" class="podlinkpod"
>backup_savedb(8)</a>, <a href="../8/butc.html" class="podlinkman"
>butc(8)</a>, <a href="../8/fms.html" class="podlinkman"
>fms(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
