<html><head><title>uss</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun 27 16:26:04 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>uss - Provides instructions for the uss add command</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The uss template file defines the components of an AFS user account that the <b>uss add</b> command (or <b>add</b> instruction in a <b>uss</b> bulk input file) creates.
Use the <b>-template</b> argument to the <b>uss add</b> or <b>uss bulk</b> command to identify the template file.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Summary_of_Template_File_Instructions"
>Summary of Template File Instructions</a></h2>

<p>The template file can include the following instructions,
each on its own line.
A more detailed description of each instruction&#39;s syntax follows this list.</p>

<dl>
<dt><a name="A"
>A</a></dt>

<dd>
<p>Imposes restrictions on user passwords and authentication attempts.</p>

<dt><a name="D"
>D</a></dt>

<dd>
<p>Creates a directory.</p>

<dt><a name="E"
>E</a></dt>

<dd>
<p>Creates a single-line file.</p>

<dt><a name="F"
>F</a></dt>

<dd>
<p>Creates a file by copying a prototype.</p>

<dt><a name="G"
>G</a></dt>

<dd>
<p>Defines a directory that is one of a set of parent directories into which the <b>uss</b> command interpreter evenly distributes newly created home directories.</p>

<dt><a name="L"
>L</a></dt>

<dd>
<p>Creates a hard link.</p>

<dt><a name="S"
>S</a></dt>

<dd>
<p>Creates a symbolic link.</p>

<dt><a name="V"
>V</a></dt>

<dd>
<p>Creates a volume,
mounts it in the file space and sets the ACL on the mount point.</p>

<dt><a name="X"
>X</a></dt>

<dd>
<p>Executes a command.</p>
</dd>
</dl>

<p>If the template file is empty (zero-length),
the <b>uss add</b> command or <code>add</code> instruction in a bulk input file only creates an entry in the Protection and Authentication Databases,
naming them according to the name specified with the <b>uss add</b> command&#39;s <b>-user</b> argument,
or in the bulk input file <code>add</code> instruction&#39;s <i>username</i> field.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_A_Instruction_for_Setting_the_Default_Treatment_of_Volumes"
>The A Instruction for Setting the Default Treatment of Volumes</a></h2>

<p>The <code>A</code> instruction in a uss template file enhances cell security by imposing the following restrictions on users&#39; password choice and authentication attempts.
For further information on these limits,
see the <i>IBM AFS Administration Guide</i> and the <b>kas setfields</b> reference page.</p>

<ul><li><p>Limiting the user&#39;s password lifetime.
When the lifetime expires,
the user can no longer authenticate using that password,
and must change it.</p></li><li><p>Prohibiting the reuse of the user&#39;s 20 most recently used passwords.</p></li><li><p>Limiting the number of consecutive times that a user can provide an incorrect password during authentication,
and for how long the Authentication Server refuses further authentication attempts after the limit is exceeded (referred to as an <i>account lockout</i>).
For regular user accounts in most cells,
the recommended limit is nine and lockout time is 25 minutes.</p></li></ul>

<p>The instruction has the following syntax:</p>

<pre>   A &#60;username&#62; &#60;lifetime&#62; &#60;reuse&#62; &#60;failures&#62; &#60;locktime&#62;</pre>

<p>where</p>

<dl>
<dt><a name="A"
>A</a></dt>

<dd>
<p>Indicates a security-enhancing instruction. It must be a capital letter.</p>

<dt><a name="&#60;username&#62;"
>&#60;username&#62;</a></dt>

<dd>
<p>Names the Authentication Database entry on which to impose security restrictions. Specify the value $USER to read in the username from the <b>uss add</b> command&#39;s <b>-user</b> argument, or from the <i>username</i> field of an <code>add</code> instruction in a bulk input file.</p>

<dt><a name="&#60;lifetime&#62;"
>&#60;lifetime&#62;</a></dt>

<dd>
<p>Sets the number of days after the user&#39;s password is changed that it remains valid. When the password becomes invalid (expires), the user is unable to authenticate, but has 30 more days in which to issue the <b>kpasswd</b> command to change the password (after that, only an administrator can change it).</p>

<p>Specify an integer from the range <code>1</code> through <code>254</code> to specify the number of days until expiration, the value <code>0</code> to indicate that the password never expires, or the value $PWEXPIRES to read in the number of days from the <b>uss add</b> or <b>uss bulk</b> command&#39;s <b>-pwexpires</b> argument. If the <code>A</code> instruction does not appear in the template file, the default is for the user&#39;s password never to expire.</p>

<dt><a name="&#60;reuse&#62;"
>&#60;reuse&#62;</a></dt>

<dd>
<p>Determines whether or not the user can change his or her password (using the <b>kpasswd</b> or <b>kas setpassword</b> command) to one that is similar to any of the last twenty passwords. The acceptable values are <code>reuse</code> to allow reuse and <code>noreuse</code> to prohibit it. If the <code>A</code> instruction does not appear in the template file, the default is to allow password reuse.</p>

<dt><a name="&#60;failures&#62;"
>&#60;failures&#62;</a></dt>

<dd>
<p>Sets the number of consecutive times the user can provide an incorrect password during authentication (using the <b>klog</b> command or a login utility that grants AFS tokens). When the user exceeds the limit, the Authentication Server rejects further authentication attempts for the amount of time specified in the &#60;locktime&#62; field.</p>

<p>Specify an integer from the range <code>1</code> through <code>254</code> to specify the number of failures permitted, or the value <code>0</code> to indicate that there is no limit to the number of unsuccessful attempts. If the <code>A</code> instruction does not appear in the template file, the default is to allow an unlimited number of failures.</p>

<dt><a name="&#60;locktime&#62;"
>&#60;locktime&#62;</a></dt>

<dd>
<p>Specifies how long the Authentication Server refuses authentication attempts from a user who has exceeded the failure limit set in the &#60;failures&#62; field.</p>

<p>Specify a number of hours and minutes (<i>hh:mm</i>) or minutes only (<i>mm</i>), from the range <code>01</code> (one minute) through <code>36:00</code> (36 hours). The Authentication Server automatically reduces any larger value to <code>36:00</code> and also rounds up any non-zero value to the next higher multiple of 8.5 minutes. A value of <code>0</code> (zero) sets an infinite lockout time; an administrator must always issue the <b>kas unlock</b> command to unlock the account.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_D_Instruction_for_Creating_a_Directory"
>The D Instruction for Creating a Directory</a></h2>

<p>The <code>D</code> instruction in a uss template file creates a directory. Its intended use is to create a subdirectory in the user home directory created by the <code>V</code> instruction in the template file.</p>

<p>Any number of <code>D</code> instructions can appear in the template file. If any variables in the instruction take their values from the <code>V</code> instruction (notably, the $MTPT variable), the instruction must follow the <code>V</code> instruction in the file.</p>

<p>Although it is possible to use the <code>D</code> instruction to create a directory on the local disk of the machine where the <b>uss</b> command is issued, it is not recommended. The preferred method for automated creation of directories on a local disk is the <b>package</b> program. Two complications arise if the &#60;pathname&#62; field refers to a local disk directory:</p>

<ul><li><p>The <b>uss</b> command prints a warning message because it cannot associate an access control list (ACL) with a local disk directory. It creates the directory nonetheless, and some syntactically correct value must appear in the instruction&#39;s &#60;ACL&#62; field.</p></li><li><p>To designate any user other than the issuer as the new directory&#39;s owner, the issuer must log onto the machine as the local superuser <code>root</code>. For local disk directories, only the local superuser <code>root</code> is allowed to issue the UNIX <b>chown</b> command that the <b>uss</b> command interpreter invokes to change the owner from the default value (the directory&#39;s creator, which in this case is the issuer of the <b>uss</b> command). The issuer must then also use the <b>-admin</b> argument to the <b>uss add</b> or <b>uss bulk</b> command to authenticate as a privileged AFS administrator, which is required for creating the Authentication Database and Protection Database entries that the <b>uss</b> command interpreter always creates for a new account.</p></li></ul>

<p>The instruction has the following syntax:</p>

<pre>   D &#60;pathname&#62; &#60;mode&#62; &#60;owner&#62; &#60;ACL&#62;</pre>

<p>where</p>

<dl>
<dt><a name="D"
>D</a></dt>

<dd>
<p>Indicates a directory creation instruction. It must be a capital letter.</p>

<dt><a name="&#60;pathname&#62;"
>&#60;pathname&#62;</a></dt>

<dd>
<p>Specifies the directory&#39;s full pathname. It can include variables.</p>

<p>Specify the read/write path to the directory, to avoid the failure that results from attempting to create a new directory in a read-only volume. By convention, the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example, <em>/afs/.abc.com</em>). For further discussion of the concept of read/write and read-only paths through the filespace, see the reference page for the <b>fs mkmount</b> command.</p>

<dt><a name="&#60;mode&#62;"
>&#60;mode&#62;</a></dt>

<dd>
<p>Sets the directory&#39;s UNIX mode bits. Acceptable values are the standard three- or four-digit numbers corresponding to combinations of permissions. Examples: <code>755</code> corresponds to <code>rwxr-xr-x</code>, and <code>644</code> to <code>rw-r--r--</code>. The first (owner) <code>x</code> bit must be turned on to enable access to a directory.</p>

<dt><a name="&#60;owner&#62;"
>&#60;owner&#62;</a></dt>

<dd>
<p>Specifies the username or UNIX user ID (UID) of the user to be designated the directory&#39;s owner in the output from the UNIX <code>ls -ld</code> command. If the directory resides in AFS, place the $UID variable in this field. If the directory resides on the local disk, this field must be the username or UID of the <b>uss</b> command&#39;s issuer, unless the issuer is logged in as the local superuser <code>root</code>.</p>

<dt><a name="&#60;ACL&#62;"
>&#60;ACL&#62;</a></dt>

<dd>
<p>Sets the ACL on the new directory. It must appear even if the new directory resides on the local disk rather than in AFS, but is ignored in that case. Provide one or more paired values, each pair consisting of an AFS username or group name and the desired permissions, in that order. Separate the two parts of the pair, and each pair, with a space. The <b>fs setacl</b> reference page describes the available permissions.</p>

<p>For an AFS directory, grant all permissions to the directory&#39;s owner at least. Usually that is the new user, in which case the appropriate value is <code>$USER all</code>.</p>

<p>It is not possible to grant any permissions to the issuer of the <b>uss</b> command. As the last step in account creation, the <b>uss</b> command interpreter automatically deletes that person from any ACLs set during the creation process.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_E_Instruction_for_Creating_a_Single-line_File"
>The E Instruction for Creating a Single-line File</a></h2>

<p>The <code>E</code> instruction in a uss template file creates a file by echoing a specified character string into it. Its intended use is to create files in the user home directory created by the <code>V</code> instruction in the template file, or in a subdirectory created by a <code>D</code> instruction.</p>

<p>Any number of <code>E</code> instructions can appear in the template file. If the file resides in a directory created by a <code>D</code> instruction, the <code>E</code> instruction must follow the <code>D</code> instruction in the file.</p>

<p>The <code>E</code> and <code>F</code> instructions have complementary advantages. The character string echoed into the file by an <code>E</code> instruction can be customized for each user, because it can include the standard variables for which the <b>uss</b> command interpreter substitutes the values specified by arguments to the <b>uss add</b> command or fields in a bulk input file <b>add</b> instruction. In contrast, a file created using the <code>F</code> instruction cannot include variables and so has the same content for all users. However, a file created by an <code>E</code> instruction can be a single line only, because no carriage returns (newline characters) are allowed in the character string.</p>

<p>Although it is possible to use the <code>E</code> instruction to create a file on the local disk of the machine where the <b>uss</b> command is issued, it is not recommended. The preferred method for automated creation of files on a local disk is the <b>package</b> program. The main complication is that designating any user other than the issuer as the new file&#39;s owner requires logging onto the machine as the local superuser <code>root</code>. For local disk files, only the local superuser <code>root</code> is allowed to issue the UNIX <b>chown</b> command that the <b>uss</b> command interpreter invokes to change the owner from the default value (the file&#39;s creator, which in this case is the issuer of the <b>uss</b> command). The issuer must then also use the <b>-admin</b> argument to the <b>uss add</b> or <b>uss bulk</b> command to authenticate as a privileged AFS administrator, which is required for creating the Authentication Database and Protection Database entries that the <b>uss</b> command interpreter always creates for a new account.</p>

<p>The instruction has the following syntax:</p>

<pre>   E &#60;pathname&#62; &#60;mode&#62; &#60;owner&#62; &#34;&#60;contents&#62;&#34;</pre>

<p>where</p>

<dl>
<dt><a name="E"
>E</a></dt>

<dd>
<p>Indicates a file creation instruction. It must be a capital letter.</p>

<dt><a name="&#60;pathname&#62;"
>&#60;pathname&#62;</a></dt>

<dd>
<p>Specifies the file&#39;s full pathname. It can include variables.</p>

<p>Specify the read/write path to the file, to avoid the failure that results from attempting to create a new file in a read-only volume. By convention, the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example, <em>/afs/.abc.com</em>). For further discussion of the concept of read/write and read-only paths through the filespace, see the reference page for the <b>fs mkmount</b> command.</p>

<dt><a name="&#60;mode&#62;"
>&#60;mode&#62;</a></dt>

<dd>
<p>Sets the file&#39;s UNIX mode bits. Acceptable values are the standard three- or four-digit numbers corresponding to combinations of permissions. Examples: <code>755</code> corresponds to <code>rwxr-xr-x</code>, and <code>644</code> to <code>rw-r--r--</code>.</p>

<dt><a name="&#60;owner&#62;"
>&#60;owner&#62;</a></dt>

<dd>
<p>Specifies the username or UNIX user ID (UID) of the user to be designated the file&#39;s owner in the output from the UNIX <code>ls -l</code> command. If the file resides in AFS, place the $UID variable in this field. If the file resides on the local disk, specify the username or UID of the <b>uss</b> command&#39;s issuer; otherwise, the account creation operation halts immediately.</p>

<dt><a name="&#60;contents&#62;"
>&#60;contents&#62;</a></dt>

<dd>
<p>Specifies the one-line character string to write into the new file. Surround it with double quotes if it contains one or more spaces. It cannot contain the newline character, but can contain any of the standard variables, which the command interpreter resolves as it creates the file.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_F_Instruction_for_Creating_a_File_from_a_Prototype"
>The F Instruction for Creating a File from a Prototype</a></h2>

<p>The <code>F</code> instruction in a uss template file creates a file by copying the contents of an existing file (the &#60;prototype&#62;) into it. Its intended use is to create files in the user home directory created by the <code>V</code> instruction in the template file, or in a subdirectory created by a <code>D</code> instruction.</p>

<p>Any number of <code>F</code> instructions can appear in the template file. If the file resides in a directory created by a <code>D</code> instruction, the <code>F</code> instruction must follow the <code>D</code> instruction in the file.</p>

<p>The <code>E</code> and <code>F</code> instructions have complementary advantages. A file created using the <code>F</code> instruction has the same content for all users, whereas a file created by an <code>E</code> instruction can be customized for each user if it includes variables. However, a file created by an <code>E</code> instruction can be a single line only, whereas the prototype file copied by an <code>F</code> instruction can be any length.</p>

<p>Although it is possible to use the <code>F</code> instruction to create a file on the local disk of the machine where the <b>uss</b> command is issued, it is not recommended. The preferred method for automated creation of files on a local disk is the <b>package</b> program. The main complication is that designating any user other than the issuer as the new file&#39;s owner requires logging onto the machine as the local superuser <code>root</code>. For local disk files, only the local superuser <code>root</code> is allowed to issue the UNIX <b>chown</b> command that the <b>uss</b> command interpreter invokes to change the owner from the default value (the file&#39;s creator, which in this case is the issuer of the <b>uss</b> command). The issuer must then also use the <b>-admin</b> argument to the <b>uss add</b> or <b>uss bulk</b> command to authenticate as a privileged AFS administrator, which is required for creating the Authentication Database and Protection Database entries that the <b>uss</b> command interpreter always creates for a new account.</p>

<p>The instruction has the following syntax:</p>

<pre>   F &#60;pathname&#62; &#60;mode&#62; &#60;owner&#62; &#60;prototype_file&#62;</pre>

<p>where</p>

<dl>
<dt><a name="F"
>F</a></dt>

<dd>
<p>Indicates a file creation instruction. It must be a capital letter.</p>

<dt><a name="&#60;pathname&#62;"
>&#60;pathname&#62;</a></dt>

<dd>
<p>Specifies the full pathname of the file to create, including the filename. It can include variables.</p>

<p>Specify the read/write path to the file, to avoid the failure that results from attempting to create a new file in a read-only volume. By convention, the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example, <em>/afs/.abc.com</em>). For further discussion of the concept of read/write and read-only paths through the filespace, see the reference page for the <b>fs mkmount</b> command.</p>

<dt><a name="&#60;mode&#62;"
>&#60;mode&#62;</a></dt>

<dd>
<p>Sets the file&#39;s UNIX mode bits. Acceptable values are the standard three- or four-digit numbers corresponding to combinations of permissions. Examples: <code>755</code> corresponds to <code>rwxr-xr-x</code>, and <code>644</code> to <code>rw-r--r--</code>.</p>

<dt><a name="&#60;owner&#62;"
>&#60;owner&#62;</a></dt>

<dd>
<p>Specifies the username or UNIX user ID (UID) of the user to be designated the file&#39;s owner in the output from the UNIX <code>ls -l</code> command. If the file resides in AFS, place the $UID variable in this field. If the file resides on the local disk, specify the username or UID of the <b>uss</b> command&#39;s issuer; otherwise, the account creation operation halts immediately.</p>

<dt><a name="&#60;prototype_file&#62;"
>&#60;prototype_file&#62;</a></dt>

<dd>
<p>Names the AFS or local disk directory that houses the prototype file to copy. The prototype file&#39;s name must match the final element in the &#60;pathname&#62; field.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_G_Instruction_for_Even_Distribution_of_Home_Directories"
>The G Instruction for Even Distribution of Home Directories</a></h2>

<p>The <code>G</code> instruction in a uss template file creates a directory as one of the set of directories from which the <b>uss</b> command interpreter selects when choosing a new user home directory&#39;s parent directory. More specifically, when the $AUTO variable appears in the &#60;mount_point&#62; field of a <code>V</code> instruction, the command interpreter substitutes for it the directory defined by a <code>G</code> instruction that currently has the fewest entries.</p>

<p>The instruction&#39;s intended use is to distribute user accounts evenly among several directories, rather than using directories that reflect divisions such as departmental affiliation. Distributing home directories in this fashion is useful mainly in very large cells where storing all user home directories under a single parent directory potentially slows directory lookup, or where a workplace-based division results in unevenly sized directories such that some users consistently experience slower directory lookup than others. See the chapter on <b>uss</b> in the <i>IBM AFS Administration Guide</i> for more information.</p>

<p>Any number of <code>G</code> instructions can appear in the template file. If the <code>V</code> instruction includes the $AUTO variable, it must appear after all of the <code>G</code> instructions in the file.</p>

<p>The instruction has the following syntax:</p>

<pre>   G &#60;directory&#62;</pre>

<p>where</p>

<dl>
<dt><a name="G"
>G</a></dt>

<dd>
<p>Indicates an instruction that creates a directory to be considered as a value for the $AUTO variable. It must be a capital letter.</p>

<dt><a name="&#60;directory&#62;"
>&#60;directory&#62;</a></dt>

<dd>
<p>Specifies the directory&#39;s name as either a complete pathname or only the directory name. The choice determines the appropriate format for the &#60;mount_point&#62; field of a <code>V</code> instruction, as discussed in the following example.</p>

<p>Specify the read/write path to the directory, to avoid the failure that results from attempting to create a new mount point in a read-only volume when the $AUTO variable is used in a <code>V</code> instruction&#39;s &#60;mount_point&#62; field. By convention, the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example, <em>/afs/.abc.com</em>). For further discussion of the concept of read/write and read-only paths through the filespace, see the reference page for the <b>fs mkmount</b> command.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_L_and_S_Instructions_for_Creating_a_Link"
>The L and S Instructions for Creating a Link</a></h2>

<p>The <code>L</code> instruction in a uss template file creates a hard link between two files, as achieved by the standard UNIX <b>ln</b> command. The <code>S</code> instruction creates a symbolic link between two files, as achieved by the standard UNIX <code>ln -s</code> command. A full explanation of links is beyond the scope of this document, but the basic effect is to create a second name for an existing file, enabling access via either name. Creating a link does not create a second copy of the file.</p>

<p>AFS allows hard links only if the linked files reside in the same directory, because it becomes difficult to determine which access control list (ACL) applies to the file if the two copies reside in directories with different ACLs. AFS allows symbolic links between two files that reside in different directories, or even different volumes. The File Server uses the ACL associated with the actual file rather than the link.</p>

<p>Any number of <code>L</code> and <code>S</code> instructions can appear in the template file. If the existing file or link is to reside in a directory created by a <code>D</code> instruction, or if the existing file was created by an <code>E</code> or <code>F</code> instruction, the <code>L</code> or <code>S</code> instruction must follow the <code>D</code>, <code>E</code>, or <code>F</code> instruction.</p>

<p>The instructions share the following syntax:</p>

<pre>   L &#60;existing_file&#62; &#60;link&#62;
   S &#60;existing_file&#62; &#60;link&#62;</pre>

<p>where</p>

<dl>
<dt><a name="L"
>L</a></dt>

<dd>
<p>Indicates a hard link creation instruction. It must be a capital letter.</p>

<dt><a name="S"
>S</a></dt>

<dd>
<p>Indicates a symbolic link creation instruction. It must be a capital letter.</p>

<dt><a name="&#60;existing_file&#62;"
>&#60;existing_file&#62;</a></dt>

<dd>
<p>Specifies the complete pathname of the existing file.</p>

<dt><a name="&#60;link&#62;"
>&#60;link&#62;</a></dt>

<dd>
<p>Specifies the complete pathname of the second name for the file.</p>

<p>Specify the read/write path to the link, to avoid the failure that results from attempting to create a new link in a read-only volume. By convention, the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example, <em>/afs/.abc.com</em>). For further discussion of the concept of read/write and read-only paths through the filespace, see the reference page for the <b>fs mkmount</b> command.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_V_Instruction_for_Creating_and_Mounting_a_Volume"
>The V Instruction for Creating and Mounting a Volume</a></h2>

<p>The <code>V</code> instruction in a uss template file creates a volume on a specified file server machine and partition and creates an entry for it in the Volume Location Database (VLDB). It mounts the volume at a location in the AFS file space that becomes the user&#39;s home directory, then designates the directory&#39;s owner and sets its access control list (ACL).</p>

<p>Only one <code>V</code> instruction can appear in the template file, and one must appear if the template file contains any instructions at all (is not empty). All other instructions are optional, except that the template must include <code>G</code> instructions if the $AUTO variable appears in it. (The <code>V</code> instruction is not necessarily the first line in the template. If the template includes the $AUTO variable, then the <code>G</code> instructions which provide values for the variable must precede it in the file.)</p>

<p>The instruction has the following syntax:</p>

<pre>   V &#60;vname&#62; &#60;server&#62; &#60;partition&#62; &#60;quota&#62; &#60;mount_point&#62; &#60;owner&#62; &#60;ACL&#62;</pre>

<p>where</p>

<dl>
<dt><a name="V"
>V</a></dt>

<dd>
<p>Indicates a volume creation instruction. It must be a capital letter.</p>

<dt><a name="&#60;name&#62;"
>&#60;name&#62;</a></dt>

<dd>
<p>Specifies the volume&#39;s name. To follow the convention for AFS user volume names, specify the value <code>user.$USER</code>. Provide a value for the $USER variable via the <b>uss add</b> command&#39;s <b>-user</b> argument or the &#60;username&#62; field in the bulk input file <b>add</b> instruction.</p>

<dt><a name="&#60;server&#62;"
>&#60;server&#62;</a></dt>

<dd>
<p>Names the file server machine on which to create the new user&#39;s volume. It is best to provide the fully-qualified hostname (for example, <code>fs1.abc.com</code>), but an abbreviated form is acceptable provided that the cell&#39;s naming service is available to resolve it at the time the volume is created. To read in the value from the <b>uss add</b> command&#39;s <b>-server</b> argument, specify the value $SERVER.</p>

<dt><a name="&#60;partition&#62;"
>&#60;partition&#62;</a></dt>

<dd>
<p>Specifies the partition on which to create the user&#39;s volume; it must be on the file server machine named in the &#60;server&#62; field. Identify the partition by its complete name (for example, <em>/vicepa</em>) or use or use one of the following abbreviations.</p>

<pre>   /vicepa     =     vicepa      =      a      =      0
   /vicepb     =     vicepb      =      b      =      1</pre>

<p>After <em>/vicepz</em> (for which the index is 25) comes</p>

<pre>   /vicepaa    =     vicepaa     =      aa     =      26
   /vicepab    =     vicepab     =      ab     =      27</pre>

<p>and so on through</p>

<pre>   /vicepiv    =     vicepiv     =      iv     =      255</pre>

<p>To read in the value from the <b>uss add</b> command&#39;s <b>-partition</b> argument, specify the value $PART.</p>

<dt><a name="&#60;quota&#62;"
>&#60;quota&#62;</a></dt>

<dd>
<p>Sets the maximum number of kilobyte blocks the volume can occupy on the file server machine&#39;s disk. Specify an integer constant if all volumes have the same quota (<code>1024</code> equals a megabyte), or use one of the number variables ($1 through $9) to assign different values to different volumes.</p>

<dt><a name="&#60;mount_point&#62;"
>&#60;mount_point&#62;</a></dt>

<dd>
<p>Creates a mount point for the volume, which serves as the volume&#39;s root directory. Include the $USER variable as part of the pathname to follow the convention that user home directory names include the username.</p>

<p>Specify the read/write path to the mount point, to avoid the failure that results from attempting to create a new mount point in a read-only volume. By convention, the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example, <em>/afs/.abc.com</em>). If the $AUTO variable appears in this field, the directories named by each <code>G</code> instruction possibly already indicate the read/write path. For further discussion of the concept of read/write and read-only paths through the filespace, see the reference page for the <b>fs mkmount</b> command.</p>

<dt><a name="&#60;owner&#62;"
>&#60;owner&#62;</a></dt>

<dd>
<p>Specifies the username or UNIX user ID (UID) of the user to be designated the mount point&#39;s owner in the output from the UNIX <code>ls -ld</code> command. To follow the convention for home directory ownership, place the value $UID in this field.</p>

<dt><a name="&#60;ACL&#62;"
>&#60;ACL&#62;</a></dt>

<dd>
<p>Sets the ACL on the new directory. Provide one or more paired values, each pair consisting of an AFS username or group name and the desired permissions, in that order. Separate the two parts of the pair, and each pair, with a space. The <b>fs setacl</b> reference page describes the available permissions.</p>

<p>Grant all permissions to the new user at least. The appropriate value is <code>$USER all</code>.</p>

<p>AFS automatically grants the system:administrators group all permissions as well. It is not possible to grant any permissions to the issuer of the <b>uss</b> command. As the last step in account creation, the <b>uss</b> command interpreter automatically deletes that user from any ACLs set during the creation process.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_X_Instruction_for_Running_a_Command"
>The X Instruction for Running a Command</a></h2>

<p>The <code>X</code> instruction in a uss template file runs the indicated command, which can be a standard UNIX or AFS command. It can include any variables from the template file, which the <b>uss</b> command interpreter resolves before passing the command on to the appropriate other command interpreter. It must be a single line only, however (cannot contain carriage returns or newline characters).</p>

<p>Any number of <code>X</code> instructions can appear in the template file. If an instruction manipulates an element created by another instruction, it must follow that instruction in the file.</p>

<p>The instruction has the following syntax:</p>

<pre>   X &#34;&#60;command&#62;&#34;</pre>

<p>where</p>

<dl>
<dt><a name="X"
>X</a></dt>

<dd>
<p>Indicates a command execution instruction. It must be a capital letter.</p>

<dt><a name="&#60;command&#62;"
>&#60;command&#62;</a></dt>

<dd>
<p>Specifies the command to run. Surround it with double quotes as shown if it contains one or more spaces. It can contain any variables from the template file, but not newline characters.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example A instruction sets a password lifetime of 254 days, prohibits password reuse, limits the number of consecutive failed authentication attempts to nine and sets the corresponding locktime to 25:30 minutes (which is a multiple of 8.5 minutes). The username is read in from the <b>-user</b> argument to the <b>uss add</b> command or from the <i>username</i> field in each <code>add</code> instruction in a bulk input file.</p>

<pre>   A $USER 254 noreuse 9 25:30</pre>

<p>The following example <code>D</code> instruction creates a directory called <em>public</em> in a new user&#39;s home directory, designates the user as the directory&#39;s owner, and grants him or her all ACL permissions.</p>

<pre>   D $MTPT/public 0755 $UID $USER all</pre>

<p>The following example <code>E</code> instruction creates a file in the current working directory called <em><i>username</i>.etcp</em>. The contents are an entry suitable for incorporating into the cell&#39;s global <em>/etc/password</em> file.</p>

<pre>   E  $USER.etcp  0644 root &#34;$USER:X:$UID:10:$NAME:$MTPT:/bin/csh&#34;</pre>

<p>The following example <code>F</code> instruction, appropriate for the ABC Corporation cell, copies a prototype <em>.login</em> file into the user&#39;s home directory.</p>

<pre>   F $MTPT/.login 0644 $UID /afs/abc.com/common/uss/skel/.login</pre>

<p>In the following example, the State University cell&#39;s administrators have decided to distribute user home directories evenly into three directories. They define three <code>G</code> instructions:</p>

<pre>   G usr1
   G usr2
   G usr3</pre>

<p>and then put the following value in the &#60;mount_point&#62; field of the <code>V</code> instruction:</p>

<pre>   /afs/stateu.edu/$AUTO/$USER</pre>

<p>Alternatively, if they include the entire directory pathname in the <code>G</code> instruction:</p>

<pre>   G /afs/stateu.edu/usr1
   G /afs/stateu.edu/usr2
   G /afs/stateu.edu/usr3</pre>

<p>then the &#60;mount_point&#62; field of the <code>V</code> instruction specifies only the following:</p>

<pre>   $AUTO/$USER</pre>

<p>The following example <code>L</code> instruction creates a hard link between the files <em>mail</em> and <em>mbox</em> in the user&#39;s home directory.</p>

<pre>   L $MTPT/mbox $MTPT/mail</pre>

<p>The following example <code>S</code> instruction, appropriate for the ABC Corporation cell, links the file <em>Mail/outgoing</em> in the user&#39;s home directory to the file <em>/afs/abc.com/common/mail/outgoing</em>.</p>

<pre>   S /afs/abc.com/common/mail/outgoing $MTPT/Mail/outgoing</pre>

<p>The following example <code>V</code> instruction creates a volume called <code>user.<i>username</i></code> on the <em>/vicepa</em> partition of the specified file server machine, assigning it a quota of 3000 kilobyte blocks. The mount point is under <em>/afs/abc.com/usr</em> and matches the username (the value of the $USER variable). The user owns the home directory and has all access rights to it. The instruction appears on two lines only for legibility; it must appear on a single line in the template file.</p>

<pre>   V user.$USER $SERVER.abc.com /vicepa 3000 \
           /afs/abc.com/usr/$USER $UID $USER all</pre>

<p>The following example <code>X</code> instruction mounts the backup version of the user&#39;s volume at the <em>OldFiles</em> subdirectory.</p>

<pre>   X &#34;fs mkm /afs/abc.com/usr/$USER/OldFiles   user.$USER.backup&#34;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/uss_bulk.html" class="podlinkpod"
>uss_bulk(5)</a>, <a href="../1/fs_mkmount.html" class="podlinkpod"
>fs_mkmount(1)</a>, <a href="../8/uss_add.html" class="podlinkpod"
>uss_add(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
