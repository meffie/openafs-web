<html><head><title>NetInfo</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun 27 16:26:04 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>NetInfo - Defines machine interfaces to register with AFS servers</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>There are two <em>NetInfo</em> files,
one for an AFS client and one for an AFS File Server or database server.
The AFS client <em>NetInfo</em> file specifies the IP addresses that the client should register with the File Servers it connects to.
The server <em>NetInfo</em> file specifies what interfaces should be registered with AFS Database Servers or used to talk to other database servers.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Client_NetInfo"
>Client NetInfo</a></h2>

<p>The client <em>NetInfo</em> file lists the IP addresses of one or more of the local machine&#39;s network interfaces.
If it exists in the <em>/usr/vice/etc</em> directory when the Cache Manager initializes,
the Cache Manager uses its contents as the basis for a list of local interfaces.
Otherwise,
the Cache Manager uses the list of interfaces configured with the operating system.
It then removes from the list any addresses that appear in the <em>/usr/vice/etc/NetRestrict</em> file,
if it exists.
The Cache Manager records the resulting list in kernel memory.
The first time it establishes a connection to a File Server,
it registers the list with the File Server.</p>

<p>The File Server uses the addresses when it initiates a remote procedure call (RPC) to the Cache Manager (as opposed to responding to an RPC sent by the Cache Manager).
There are two common circumstances in which the File Server initiates RPCs: when it breaks callbacks and when it pings the client machine to verify that the Cache Manager is still accessible.</p>

<p>The <em>NetInfo</em> file is in ASCII format.
One of the machine&#39;s IP addresses appears on each line,
in dotted decimal format.
The File Server initially uses the address that appears first in the list.
The order of the remaining addresses is not significant: if an RPC to the first interface fails,
the File Server simultaneously sends RPCs to all of the other interfaces in the list.
Whichever interface replies first is the one to which the File Server then sends pings and RPCs to break callbacks.</p>

<p>To prohibit the Cache Manager absolutely from using one or more addresses,
list them in the <em>NetRestrict</em> file.
To display the addresses the Cache Manager is currently registering with File Servers,
use the <b>fs getclientaddrs</b> command.
To replace the current list of interfaces with a new one between reboots of the client machine,
use the <b>fs setclientaddrs</b> command.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Server_NetInfo"
>Server NetInfo</a></h2>

<p>The server <em>NetInfo</em> file,
if present in the <em>/usr/afs/local</em> directory,
defines the following:</p>

<ul><li><p>On a file server machine,
the local interfaces that the File Server (<b>fileserver</b> process) can register in the Volume Location Database (VLDB) at initialization time.</p></li><li><p>On a database server machine,
the local interfaces that the Ubik database synchronization library uses when communicating with the database server processes running on other database server machines.</p></li></ul>

<p>If the <em>NetInfo</em> file exists when the File Server initializes,
the File Server uses its contents as the basis for a list of interfaces to register in the VLDB.
Otherwise,
it uses the list of network interfaces configured with the operating system.
It then removes from the list any addresses that appear in the <em>/usr/afs/local/NetRestrict</em> file,
if it exists.
The File Server records the resulting list in the <em>/usr/afs/local/sysid</em> file and registers the interfaces in the VLDB.
The database server processes use a similar procedure when initializing,
to determine which interfaces to use for communication with the peer processes on other database machines in the cell.</p>

<p>The <em>NetInfo</em> file is in ASCII format.
One of the machine&#39;s IP addresses appears on each line,
in dotted decimal format.
The order of the addresses is not significant.</p>

<p>To display the File Server interface addresses registered in the VLDB,
use the <b>vos listaddrs</b> command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/NetRestrict.html" class="podlinkman"
>NetRestrict(5)</a>,
<a href="../5/sysid.html" class="podlinkman"
>sysid(5)</a>,
<a href="../5/vldb.DB0.html" class="podlinkpod"
>vldb.DB0(5)</a>,
<a href="../8/fileserver.html" class="podlinkman"
>fileserver(8)</a>,
<a href="../1/fs_getclientaddrs.html" class="podlinkpod"
>fs_getclientaddrs(1)</a>,
<a href="../1/fs_setclientaddrs.html" class="podlinkpod"
>fs_setclientaddrs(1)</a>,
<a href="../1/vos_listaddrs.html" class="podlinkpod"
>vos_listaddrs(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000.
&#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0.
It was converted from HTML to POD by software written by Chas Williams and Russ Allbery,
based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
