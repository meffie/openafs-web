<html><head><title>BosConfig</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Tue Nov 11 07:45:46 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>BosConfig - Defines server processes for the BOS Server to monitor</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <em>BosConfig</em> file lists the processes that the Basic OverSeer (BOS) Server monitors on its server machine,
and thus defines which AFS server processes run on the machine.
It specifies how the BOS Server reacts when a process fails,
and also defines the times at which the BOS Server automatically restarts processes as part of performance maintenance.
The file must reside in the <em>/usr/afs/local</em> directory on each AFS server machine.</p>

<p>A server process entry in the <em>BosConfig</em> file records the following information:</p>

<ul><li><p>The <i>entry type</i>,
which is one of the following:
<dl>
<dt><a name="cron"
>cron</a></dt>

<dd>
<p>Designates a server process that runs periodically instead of continuously.
The BOS Server starts a cron process only at specified times,
not whenever it fails.
All standard AFS process entries except <code>fs</code> are simple (there are no standard cron processes).</p>

<dt><a name="fs"
>fs</a></dt>

<dd>
<p>Designates a group of interdependent server processes.
If one of the processes fails,
the BOS Server must coordinate its restart with the restart of the other processes in the group,
possibly by stopping them first.</p>

<p>There is only one standard entry of this type,
for which the conventional name is <code>fs</code>.
It combines three server processes: the File Server (<b>fileserver</b> process),
the Volume Server (<b>volserver</b> process),
and the Salvager (<b>salvager</b> process).
These processes all operate on the same data--the AFS data stored on an AFS server machine&#39;s <em>/vicep</em> partitions and mounted in the AFS filespace--but in different ways.
Grouping the processes prevents them from attempting to access the same data simultaneously,
which can cause corruption.</p>

<p>During normal operation,
the Salvager process is not active.
If the File Server process fails,
however,
the BOS Server stops the Volume Server process and runs the Salvager process to correct any corruption that resulted from the failure.
(The administrator can also issue the <b>bos salvage</b> command to invoke the Salvager process.) If the Volume Server fails,
the BOS Server can restart it without stopping the File Server or running the Salvager.</p>

<dt><a name="simple"
>simple</a></dt>

<dd>
<p>Designates a server process that runs independently of any other on the server machine.
If a simple process fails,
the BOS Server does not have to coordinate its restart with any other process.</p>
</dd>
</dl>
</p></li><li><p>The <i>entry name</i>.
The conventional name for an entry in the <em>BosConfig</em> file and the associated process matches the binary filename.
When issuing any <b>bos</b> command that takes the <b>-instance</b> argument,
identify each process by the name used in the <em>BosConfig</em> file.
For a list of the names,
see the <b>bos create</b> reference page.</p></li><li><p>The process&#39;s <i>status flag</i>,
which determines whether the BOS Server attempts to start the process in two cases: each time the BOS Server itself restarts,
and when the process fails.
The <em>BosConfig</em> file currently uses a binary notation to indicate whether the BOS Server attempts to restart the process as necessary or does not monitor it at all.
For the sake of clarity,
the AFS documentation refers to the flags as <code>Run</code> and <code>NotRun</code> instead.
Only a system administrator,
not the BOS Server,
can change the flag.</p></li><li><p>One or more <i>command parameters</i> which the BOS Server invokes to start the process or processes associated with the entry:
<ul><li><p>A <code>cron</code> entry has two command parameters,
the first the complete pathname to the program,
and the second the time at which the BOS Server invokes the program.</p></li><li><p>The <code>fs</code> entry has three command parameters,
each the complete pathname to the <b>fileserver</b>,
<b>volserver</b>,
and <b>salvager</b> programs,
in that order.</p></li><li><p>A <code>simple</code> entry has only one command parameter,
the complete pathname to the program.</p></li></ul>
</p></li></ul>

<p>In addition to server process entries,
the <em>BosConfig</em> file specifies the times at which the BOS Server performs two types of automatic process restarts:</p>

<ul><li><p>The <i>general restart</i> time at which the BOS Server restarts itself and then each process for which the entry in the <em>BosConfig</em> file has status flag <code>Run</code>.
The default setting is Sunday at 4:00 a.m.</p></li><li><p>The <i>binary restart</i> time at which the BOS Server restarts any server process for which the time stamp on the binary file in the <em>/usr/afs/bin</em> directory is later than the last restart time for the process.
The default is 5:00 a.m.</p></li></ul>

<p>Although the <em>BosConfig</em> file is in ASCII format,
do not use a text editor to alter it.
Its format is subject to change and incorrectly formatted entries can prevent server startup in ways that are difficult to diagnose.
Instead always use the appropriate commands from the <b>bos</b> command suite:</p>

<ul><li><p>The <b>bos create</b> command to create an entry in the file and start the associated process.</p></li><li><p>The <b>bos delete</b> command to remove an entry from the file after the <b>bos stop</b> command is used to stop the associated process.</p></li><li><p>The <b>bos getrestart</b> command to display the times at which the BOS Server performs automatic restarts.</p></li><li><p>The <b>bos setrestart</b> command to set the times at which the BOS Server performs automatic process restarts.</p></li><li><p>The <b>bos start</b> command to change an entry&#39;s status flag to <code>Run</code> and start the associated process.</p></li><li><p>The <b>bos status</b> command to display all processes listed in the file.</p></li><li><p>The <b>bos stop</b> command to change an entry&#39;s status flag to <code>NotRun</code> and stop the associated process.</p></li></ul>

<p>There are also bos commands that start and stop processes without changing entries in the <em>BosConfig</em> file.
The BOS Server reads the <em>BosConfig</em> file only when it starts,
transferring the information into its memory.
Thus a process&#39;s status as represented in the BOS Server&#39;s memory can diverge from its status in the <em>BosConfig</em> file.
The following commands change a process&#39;s status in the BOS Server&#39;s memory only:</p>

<ul><li><p>The <b>bos restart</b> command restarts a specified set of processes,
all processes,
or all processes other than the BOS Server.</p></li><li><p>The <b>bos shutdown</b> command stops a process.</p></li><li><p>The <b>bos startup</b> command starts a process.</p></li></ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../8/bos_create.html" class="podlinkpod"
>bos_create(8)</a>,
<a href="../8/bos_delete.html" class="podlinkpod"
>bos_delete(8)</a>,
<a href="../8/bos_getrestart.html" class="podlinkpod"
>bos_getrestart(8)</a>,
<a href="../8/bos_restart.html" class="podlinkpod"
>bos_restart(8)</a>,
<a href="../8/bos_setrestart.html" class="podlinkpod"
>bos_setrestart(8)</a>,
<a href="../8/bos_shutdown.html" class="podlinkpod"
>bos_shutdown(8)</a>,
<a href="../8/bos_start.html" class="podlinkpod"
>bos_start(8)</a>,
<a href="../8/bos_startup.html" class="podlinkpod"
>bos_startup(8)</a>,
<a href="../8/bos_status.html" class="podlinkpod"
>bos_status(8)</a>,
<a href="../8/bos_stop.html" class="podlinkpod"
>bos_stop(8)</a>,
<a href="../8/bos_salvage.html" class="podlinkpod"
>bos_salvage(8)</a>,
<a href="../8/fileserver.html" class="podlinkman"
>fileserver(8)</a>,
<a href="../8/salvager.html" class="podlinkman"
>salvager(8)</a>,
<a href="../8/volserver.html" class="podlinkman"
>volserver(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000.
&#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0.
It was converted from HTML to POD by software written by Chas Williams and Russ Allbery,
based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
