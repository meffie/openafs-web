<html><head><title>CellServDB</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun 27 16:26:03 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>CellServDB - Lists the database server machines in AFS cells</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>There are two versions of the <em>CellServDB</em> file,
both of which have the same format.
One version is used by an AFS client and lists all of the database server machines in the local cell and any foreign cell that is to be accessible from the local client machine.
The other version is used on servers and lists only the database servers in the local cell.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Client_CellServDB"
>Client CellServDB</a></h2>

<p>The client version of the CellServDB file lists the database server machines in the local cell and any foreign cell that is to be accessible from the local client machine.
Database server machines run the Authentication Server,
Backup Server,
Protection Server,
and Volume Location (VL) Server (the <b>kaserver</b>,
<b>buserver</b>,
<b>ptserver</b>,
and <b>vlserver</b>) processes,
which maintain the cell&#39;s administrative AFS databases.</p>

<p>The Cache Manager and other processes running on a client machine use the list of a cell&#39;s database server machines when performing several common functions,
including:</p>

<ul><li><p>Fetching files.
The Cache Manager contacts the VL Server to learn the location of the volume containing a requested file or directory.</p></li><li><p>Authenticating users.
Client-side authentication programs (such as an AFS-modified login utility or the <b>klog</b> command interpreter) contact the Authentication Server to obtain a server ticket,
which the AFS server processes accept as proof that the user is authenticated.</p></li><li><p>Creating protection groups.
The <b>pts</b> command interpreter contacts the Protection Server when users create protection groups or request information from the Protection Database.</p></li></ul>

<p>The Cache Manager reads the CellServDB file into kernel memory as it initializes,
and not again until the machine next reboots.
To enable users on the local machine to continue accessing the cell correctly,
update the file whenever a database server machine is added to or removed from a cell.
To update the kernel-resident list of database server machines without rebooting,
use the <b>fs newcell</b> command.</p>

<p>The <em>CellServDB</em> file is in ASCII format and must reside in the <em>/usr/vice/etc</em> directory on each AFS client machine.
Use a text editor to create and maintain it.</p>

<p>The client version of the <em>CellServDB</em> file is distinct from the server version,
which resides in the <em>/usr/afs/etc</em> directory on each AFS server machine.
The client version lists the database server machines in every AFS cell that the cell administrator wants the machine&#39;s users to be able to access,
whereas the server version lists only the local cell&#39;s database server machines.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Server_CellServDB"
>Server CellServDB</a></h2>

<p>The server version of the <em>CellServDB</em> file lists the local cell&#39;s database server machines.
These machines run the Authentication Server,
Backup Server,
Protection Server,
and Volume Location (VL) Server (the <b>kaserver</b>,
<b>buserver</b>,
<b>ptserver</b>,
and <b>vlserver</b>) processes,
which maintain the cell&#39;s administrative AFS databases.
The initial version of the file is created with the <b>bos setcellname</b> command during the installation of the cell&#39;s server machine,
which is automatically recorded as the cell&#39;s first database server machine.
When adding or removing database server machines,
be sure to update this file appropriately.
It must reside in the <em>/usr/afs/etc</em> directory on each AFS server machine.</p>

<p>The database server processes consult the <em>CellServDB</em> file to learn about their peers,
with which they must maintain constant connections in order to coordinate replication of changes across the multiple copies of each database.
The other AFS server processes consult the file to learn which machines to contact for information from the databases when they need it.</p>

<p>Although the server <em>CellServDB</em> file is in ASCII format,
do not use a text editor to alter it.
Instead always use the appropriate commands from the <b>bos</b> command suite:</p>

<ul><li><p>The <b>bos addhost</b> command to add a machine to the file.</p></li><li><p>The <b>bos listhosts</b> command to display the list of machines from the file.</p></li><li><p>The <b>bos removehost</b> command to remove a machine from the file.</p></li></ul>

<p>In cells that use the Update Server to distribute the contents of the <em>/usr/afs/etc</em> directory,
it is customary to edit only the copy of the file stored on the system control machine.
Otherwise,
edit the file on each server machine individually.
For instructions on adding and removing database server machine,
see the <i>IBM AFS Quick Beginnings</i> chapter on installing additional server machines.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="CellServDB_Format"
>CellServDB Format</a></h2>

<p>Both <em>CellServDB</em> files have the same format:</p>

<ul><li><p>The first line begins at the left margin with the greater-than character (<code>&#62;</code>),
followed immediately by the cell&#39;s name without an intervening space.
Optionally,
a comment can follow any number of spaces and a number sign (<code>#</code>),
perhaps to identify the organization associated with the cell.</p></li><li><p>Each subsequent line in the entry identifies one of the cell&#39;s database server machines,
with the indicated information in order:
<ul><li><p>The database server machine&#39;s IP address in dotted-decimal format.</p></li><li><p>One or more spaces.</p></li><li><p>A number sign (#),
followed by the machine&#39;s fully qualified hostname without an intervening space.
This number sign does not indicate that the hostname is a comment.
It is a required field.</p></li></ul>
</p></li></ul>

<p>No extra blank lines or newline characters are allowed in the file,
even after the last entry.
Their presence can prevent the Cache Manager from reading the file into kernel memory,
resulting in an error message.</p>

<p>grand.central.org maintains a list of the database server machines in all cells that have registered themselves as receptive to access from foreign cells.
When a cell&#39;s administrators change its database server machines,
it is customary to register the change with grand.central.org for inclusion in this file.
The file conforms to the required <em>CellServDB</em> format,
and so is a suitable basis for the <em>CellServDB</em> file on a client machine.
You can download this file from <a href="http://grand.central.org/" class="podlinkurl"
>http://grand.central.org/</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example shows entries for two cells in a client <em>CellServDB</em> file and illustrates the required format.</p>

<pre>   &#62;abc.com        # ABC Corporation
   192.12.105.2         #db1.abc.com
   192.12.105.3         #db2.abc.com
   192.12.107.3         #db3.abc.com
   &#62;test.abc.com   # ABC Corporation Test Cell
   192.12.108.57        #testdb1.abc.com
   192.12.108.55        #testdb2.abc.com</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../8/bos_addhost.html" class="podlinkpod"
>bos_addhost(8)</a>, <a href="../8/bos_listhosts.html" class="podlinkpod"
>bos_listhosts(8)</a>, <a href="../8/bos_removehost.html" class="podlinkpod"
>bos_removehost(8)</a>, <a href="../8/bos_setcellname.html" class="podlinkpod"
>bos_setcellname(8)</a>, <a href="../8/buserver.html" class="podlinkman"
>buserver(8)</a>, <a href="../1/fs_newcell.html" class="podlinkpod"
>fs_newcell(1)</a>, <a href="../8/kaserver.html" class="podlinkman"
>kaserver(8)</a>, <a href="../1/klog.html" class="podlinkman"
>klog(1)</a>, <a href="../8/ptserver.html" class="podlinkman"
>ptserver(8)</a>, <a href="../8/vlserver.html" class="podlinkman"
>vlserver(8)</a>, <a href="../8/upclient.html" class="podlinkman"
>upclient(8)</a>, <a href="../8/upserver.html" class="podlinkman"
>upserver(8)</a></p>

<p><i>IBM AFS Quick Beginnings</i></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
