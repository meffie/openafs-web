<html><head><title>kpasswd</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Mon Jul 14 01:56:34 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>kpasswd - Changes the issuer&#39;s password in the Authentication Database</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>kpasswd</b> [<b>-x</b>] [<b>-principal</b>&#160;&#60;<i>user&#160;name</i>&#62;] [<b>-password</b>&#160;&#60;<i>user&#39;s&#160;password</i>&#62;] [<b>-newpassword</b>&#160;&#60;<i>user&#39;s&#160;new&#160;password</i>&#62;] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-servers</b>&#160;&#60;<i>explicit&#160;list&#160;of&#160;servers</i>&#62;+] [<b>-pipe</b>] [<b>-help</b>]</p>

<p><b>kpasswd</b> [<b>-x</b>] [<b>-pr</b>&#160;&#60;<i>user&#160;name</i>&#62;] [<b>-pa</b>&#160;&#60;<i>user&#39;s&#160;password</i>&#62;] [<b>-n</b>&#160;&#60;<i>user&#39;s&#160;new&#160;password</i>&#62;] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-s</b>&#160;&#60;<i>explicit&#160;list&#160;of&#160;servers</i>&#62;+] [<b>-pi</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>kpasswd</b> command changes the password recorded in an Authentication Database entry.
By default,
the command interpreter changes the password for the AFS user name that matches the issuer&#39;s local identity (UNIX UID).
To specify an alternate user,
include the <b>-principal</b> argument.
The user named by the <b>-principal</b> argument does not have to appear in the local password file (the <em>/etc/passwd</em> file or equivalent).</p>

<p>By default,
the command interpreter sends the password change request to the Authentication Server running on one of the database server machines listed for the local cell in the <em>/usr/afs/etc/CellServDB</em> file on the local disk; it chooses the machine at random.
It consults the <em>/usr/vice/etc/ThisCell</em> file on the local disk to learn the local cell name.
To specify an alternate cell,
include the <b>-cell</b> argument.</p>

<p>Unlike the UNIX <b>passwd</b> command,
the <b>kpasswd</b> command does not restrict passwords to eight characters or less; it accepts passwords of virtually any length.
All AFS commands that require passwords (including the <b>klog</b>,
<b>kpasswd</b>,
and AFS-modified login utilities,
and the commands in the <b>kas</b> suite) accept passwords longer than eight characters,
but some other applications and operating system utilities do not.
Selecting an AFS password of eight characters or less enables the user to maintain matching AFS and UNIX passwords.</p>

<p>The command interpreter makes the following checks:</p>

<ul><li><p>If the program <b>kpwvalid</b> exists in the same directory as the <b>kpasswd</b> command,
the command interpreter pass the new password to it for verification.
For details,
see <a href="../8/kpwvalid.html" class="podlinkman"
>kpwvalid(8)</a>.</p></li><li><p>If the <b>-reuse</b> argument to the kas setfields command has been used to prohibit reuse of previous passwords,
the command interpreter verifies that the password is not too similar too any of the user&#39;s previous 20 passwords.
It generates the following error message at the shell:
<pre>   Password was not changed because it seems like a reused password</pre>

<p>To prevent a user from subverting this restriction by changing the password twenty times in quick succession (manually or by running a script), use the <b>-minhours</b> argument on the <b>kaserver</b> initialization command. The following error message appears if a user attempts to change a password before the minimum time has passed:</p>

<pre>   Password was not changed because you changed it too
   recently; see your systems administrator</pre>
</p></li></ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-x"
><b>-x</b></a></dt>

<dd>
<p>Appears only for backwards compatibility.</p>

<dt><a name="-principal_&#60;user_name&#62;"
><b>-principal</b> &#60;<i>user name</i>&#62;</a></dt>

<dd>
<p>Names the Authentication Database entry for which to change the password. If this argument is omitted, the database entry with the same name as the issuer&#39;s local identity (UNIX UID) is changed.</p>

<dt><a name="-password_&#60;user&#39;s_password&#62;"
><b>-password</b> &#60;<i>user&#39;s password</i>&#62;</a></dt>

<dd>
<p>Specifies the current password. Omit this argument to have the command interpreter prompt for the password, which does not echo visibly:</p>

<pre>   Old password: current_password</pre>

<dt><a name="-newpassword_&#60;user&#39;s_new_password&#62;"
><b>-newpassword</b> &#60;<i>user&#39;s new password</i>&#62;</a></dt>

<dd>
<p>Specifies the new password, which the <b>kpasswd</b> command interpreter converts into an encryption key (string of octal numbers) before sending it to the Authentication Server for storage in the user&#39;s Authentication Database entry.</p>

<p>Omit this argument to have the command interpreter prompt for the password, which does not echo visibly:</p>

<pre>   New password (RETURN to abort): &#60;new_password&#62;
   Retype new password: &#60;new_password&#62;</pre>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Specifies the cell in which to change the password, by directing the command to that cell&#39;s Authentication Servers. The issuer can abbreviate the cell name to the shortest form that distinguishes it from the other cells listed in the local <em>/usr/vice/etc/CellServDB</em> file.</p>

<p>By default, the command is executed in the local cell, as defined</p>

<ul><li><p>First, by the value of the environment variable AFSCELL.</p></li><li><p>Second, in the <em>/usr/vice/etc/ThisCell</em> file on the client machine on which the command is issued.</p></li></ul>

<dt><a name="-servers_&#60;explicit_list_of_servers&#62;"
><b>-servers</b> &#60;<i>explicit list of servers</i>&#62;</a></dt>

<dd>
<p>Establishes a connection with the Authentication Server running on each specified machine, rather than with all of the database server machines listed for the relevant cell in the local copy of the <em>/usr/vice/etc/CellServDB</em> file. The <b>kpasswd</b> command interpreter then sends the password-changing request to one machine chosen at random from the set.</p>

<dt><a name="-pipe"
><b>-pipe</b></a></dt>

<dd>
<p>Suppresses all output to the standard output stream or standard error stream. The <b>kpasswd</b> command interpreter expects to receive all necessary arguments, each on a separate line, from the standard input stream. Do not use this argument, which is provided for use by application programs rather than human users.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command. All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example shows user pat changing her password in the ABC Corporation cell.</p>

<pre>   % kpasswd
   Changing password for &#39;pat&#39; in cell &#39;abc.com&#39;.
   Old password:
   New password (RETURN to abort):
   Verifying, please re-enter new_password:</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>None</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../8/kas_setfields.html" class="podlinkpod"
>kas_setfields(8)</a>, <a href="../8/kas_setpassword.html" class="podlinkpod"
>kas_setpassword(8)</a>, <a href="../1/klog.html" class="podlinkman"
>klog(1)</a>, <a href="../8/kpwvalid.html" class="podlinkman"
>kpwvalid(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
