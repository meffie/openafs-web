<html><head><title>vos_move</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:27 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_move - Moves a read/write volume to another site</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos move</b> <b>-id</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; <b>-fromserver</b>&#160;&#60;<i>machine&#160;name&#160;on&#160;source</i>&#62; <b>-frompartition</b>&#160;&#60;<i>partition&#160;name&#160;on&#160;source</i>&#62; <b>-toserver</b>&#160;&#60;<i>machine&#160;name&#160;on&#160;destination</i>&#62; <b>-topartition</b>&#160;&#60;<i>partition&#160;name&#160;on&#160;destination</i>&#62; [<b>-live</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-help</b>]</p>

<p><b>vos m</b> <b>-i</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; <b>-froms</b>&#160;&#60;<i>machine&#160;name&#160;on&#160;source</i>&#62; <b>-fromp</b>&#160;&#60;<i>partition&#160;name&#160;on&#160;source</i>&#62; <b>-tos</b>&#160;&#60;<i>machine&#160;name&#160;on&#160;destination</i>&#62; <b>-top</b>&#160;&#60;<i>partition&#160;name&#160;on&#160;destination</i>&#62; [<b>-li</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos move</b> command moves the indicated read/write volume from its current site (specified with the <b>-fromserver</b> and <b>-frompartition</b> arguments) to the destination site (specified with the <b>-toserver</b> and <b>-topartition</b> arguments).
This command automatically removes the backup copy from the current site,
if it exists.
To create a new backup volume at the destination site,
use the <b>vos backup</b> command.</p>

<p>This command works on read/write volumes only.
To move a read-only volume,
use the <b>vos addsite</b> and <b>vos release</b> commands to define a new read-only site and release the volume contents to it,
and then use the <b>vos remove</b> command to remove the previous read-only volume&#39;s definition from the Volume Location Database (VLDB) and data from the partition.
To move a backup volume,
use this command to move its read/write source and then issue the <b>vos backup</b> command.</p>

<p>Before executing this command,
the <b>vos</b> command interpreter initiates a check that the destination partition contains enough space to house the volume being moved.
If there is not enough space,
the move operation is not attempted and the following message appears:</p>

<pre>   vos: no space on target partition &#60;dest_part&#62; to move volume &#60;volume&#62;</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Unless there is a compelling reason, do not interrupt a <b>vos move</b> command in progress. Interrupting a move can result in one or more of the following inconsistent states:</p>

<ul><li><p>There are two versions of the volume, one at the source site and one at the destination site. (If this happens, retain the version identified by the VLDB and use the <b>vos zap</b> command to remove the other version.)</p></li><li><p>The backup version of the volume is stranded at the old site. (If this happens, use the <b>vos zap</b> command to remove it.)</p></li><li><p>The volume is off-line. (If this happens, run the <b>bos salvage</b> command to bring it back on line.)</p></li></ul>

<p>If the Ctrl-C interrupt signal is pressed while a vos move operation is executing, the following message warns of the consequences and requests confirmation of the kill signal:</p>

<pre>   SIGINT handler: vos move operation in progress
   WARNING: may leave AFS storage and metadata in indeterminate state
   enter second control-c to exit</pre>

<p>To confirm termination of the operation, press Ctrl-C a second time; press any other key to continue the operation.</p>

<p>Currently, the maximum size of a volume is 2 terabytes (2^31 bytes) and the maximum size of a /vicepX partition on a fileserver is also 2 terabytes. The fileserver will not report an error when it has access to a partition larger than 2 terabytes, but it will probably fail if the administrator attempts to use more than 2 terabytes of space. In addition, there are reports of erroneous disk usage numbers when <b>vos partinfo</b> or other OpenAFS disk reporting tools are used with partitions larger than 2 terabytes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-id_&#60;volume_name_or_ID&#62;"
><b>-id</b> &#60;<i>volume name or ID</i>&#62;</a></dt>

<dd>
<p>Specifies either the complete name or volume ID number of a read/write volume.</p>

<dt><a name="-fromserver_&#60;server_name&#62;"
><b>-fromserver</b> &#60;<i>server name</i>&#62;</a></dt>

<dd>
<p>Identifies the file server machine where the volume currently resides. Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation). For details, see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-frompartition_&#60;partition_name&#62;"
><b>-frompartition</b> &#60;<i>partition name</i>&#62;</a></dt>

<dd>
<p>Names the partition where the volume currently resides. Provide the full partition name (for, example, <b>/vicepa</b>) or one of the abbreviated forms described in <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-toserver_&#60;server_name&#62;"
><b>-toserver</b> &#60;<i>server name</i>&#62;</a></dt>

<dd>
<p>Identifies the file server machine to which to move the volume. Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation). For details, see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-topartition_&#60;partition_name&#62;"
><b>-topartition</b> &#60;<i>partition name</i>&#62;</a></dt>

<dd>
<p>Names the partition to which to move the volume. Provide the full partition name (for, example, <b>/vicepa</b>) or one of the abbreviated forms described in <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-live"
><b>-live</b></a></dt>

<dd>
<p>Avoids making a temporary copy of the volume during the move. This is useful if the partition is full, but the administrator needs to move volumes to a another partition or server to free up disk space. The caveat is that the volume is locked during the entire operation instead of the short time that is needed to make the temporary clone.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command. Do not combine this argument with the <b>-localauth</b> flag. For more details, see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer. Do not combine this flag with the <b>-localauth</b> flag. For more details, see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file. The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication. Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag. For more details, see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution. If this argument is omitted, only warnings and error messages appear.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command. All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example moves the volume <code>user.smith</code> from the <em>/vicepb</em> partition on the file server machine <code>fs3.abc.com</code> to the <em>/vicepg</em> partition on the file server machine <code>fs7.abc.com</code>.</p>

<pre>   % vos move -id user.smith -fromserver fs3.abc.com -frompartition b \
       -toserver fs7.abc.com -topartition g</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machines specified with the <b>-toserver</b> and <b>-fromserver</b> arguments and on each database server machine. If the <b>-localauth</b> flag is included, the issuer must instead be logged on to a server machine as the local superuser <code>root</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/vos.html" class="podlinkman"
>vos(1)</a>, <a href="../1/vos_addsite.html" class="podlinkpod"
>vos_addsite(1)</a>, <a href="../1/vos_backup.html" class="podlinkpod"
>vos_backup(1)</a>, <a href="../1/vos_copy.html" class="podlinkpod"
>vos_copy(1)</a>, <a href="../1/vos_release.html" class="podlinkpod"
>vos_release(1)</a>, <a href="../1/vos_listvol.html" class="podlinkpod"
>vos_listvol(1)</a>, <a href="../1/vos_remove.html" class="podlinkpod"
>vos_remove(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
