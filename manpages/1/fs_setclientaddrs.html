<html><head><title>fs_setclientaddrs</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Tue Nov 11 07:45:44 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>fs_setclientaddrs - Sets the client interfaces to register with the File Server</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>fs setclientaddrs</b> [<b>-address</b>&#160;&#60;<i>client&#160;network&#160;interfaces</i>&#62;+] [<b>-help</b>]</p>

<p><b>fs setcl</b> [<b>-a</b>&#160;&#60;<i>client&#160;network&#160;interfaces</i>&#62;+] [<b>-h</b>]</p>

<p><b>fs sc</b> [<b>-a</b>&#160;&#60;<i>client&#160;network&#160;interfaces</i>&#62;+] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>fs setclientaddrs</b> command defines the IP addresses of the interfaces that the local Cache Manager registers with a File Server when first establishing a connection to it.</p>

<p>The File Server uses the addresses when it initiates a remote procedure call (RPC) to the Cache Manager (as opposed to responding to an RPC sent by the Cache Manager).
There are two common circumstances in which the File Server initiates RPCs: when it breaks callbacks and when it pings the client machine to verify that the Cache Manager is still accessible.</p>

<p>The list of interfaces specified with this command replaces the list that the Cache Manager constructs and records in kernel memory as it initializes.
At that time,
if the file <em>/usr/vice/etc/NetInfo</em> exists on the client machine&#39;s local disk,
the Cache Manager uses its contents as the basis for the list of interfaces addresses.
If the file does not exist,
the Cache Manager instead uses the network interfaces configured with the operating system.
It then removes from the list any address included in the local <em>/usr/vice/etc/NetRestrict</em> file.
It records the final list in kernel memory.
(An administrator must create the <em>NetInfo</em> and <em>NetRestrict</em> files; there are no default versions of them.)</p>

<p>If an RPC to that interface fails,
the File Server simultaneously sends RPCs to all of the other interfaces in the list,
to learn which of them are still available.
Whichever interface replies first is the one to which the File Server then sends pings and RPCs to break callbacks.</p>

<p>To list the interfaces that the Cache Manager is currently registering with File Servers,
use the <b>fs getclientaddrs</b> command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>The list specified with this command persists in kernel memory only until the client machine reboots.
To preserve it across reboots,
either list the interfaces in the local <em>/usr/vice/etc/NetInfo</em> file,
or place the appropriate <b>fs setclientaddrs</b> command in the machine&#39;s AFS initialization script.</p>

<p>Changes made with this command do not propagate automatically to File Servers to which the Cache Manager has already established a connection.
To force such File Servers to use the revised list,
either reboot each file server machine,
or change the <em>NetInfo</em> file and reboot the client machine.</p>

<p>The fs command interpreter verifies that each of the addresses specified as a value for the <b>-address</b> argument is actually configured with the operating system on the client machine.
If it is not,
the command fails with an error message that marks the address as a <code>Nonexistent interface</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-address_&#60;client_network_interfaces&#62;+"
><b>-address</b> &#60;<i>client network interfaces</i>&#62;+</a></dt>

<dd>
<p>Specifies each IP address to place in the list of interfaces,
in dotted decimal format.
Hostnames are not acceptable.
Separate each address with one or more spaces.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>The message</p>

<pre>   Adding &#60;interface&#62;</pre>

<p>confirms that each new interface was added to the Cache Manager&#39;s list. The address appears in hexadecimal format to match the notation used in the File Server log, <em>/usr/afs/logs/FileLog</em>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example sets the two interfaces that the Cache Manager registers with File Servers.</p>

<pre>   % fs setclientaddrs 191.255.105.68 191.255.108.84
   Adding 0xbfff6944
   Adding 0xbfff6c54</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be logged in as the local superuser root.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/NetInfo.html" class="podlinkman"
>NetInfo(5)</a>, <a href="../5/NetRestrict.html" class="podlinkman"
>NetRestrict(5)</a>, <a href="../8/fileserver.html" class="podlinkman"
>fileserver(8)</a>, <a href="../1/fs_getclientaddrs.html" class="podlinkpod"
>fs_getclientaddrs(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
