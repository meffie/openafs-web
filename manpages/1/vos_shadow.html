<html><head><title>vos_shadow</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Wed Jul 16 06:01:55 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_shadow - Creates a shadow copy of a volume on a different server/partition</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos shadow</b> [<b>-id</b>]&#160;&#60;<i>volume&#160;name&#160;or&#160;ID&#160;on&#160;source</i>&#62; [<b>-fromserver</b>]&#160;&#60;<i>machine&#160;name&#160;on&#160;source</i>&#62; [<b>-frompartition</b>]&#160;&#60;<i>partition&#160;name&#160;on&#160;source</i>&#62; [<b>-toserver</b>]&#160;&#60;<i>machine&#160;name&#160;on&#160;destination</i>&#62; [<b>-topartition</b>]&#160;&#60;<i>partition&#160;name&#160;on&#160;destination</i>&#62; [<b>-toname</b>&#160;&#60;<i>volume&#160;name&#160;on&#160;destination</i>&#62;] [<b>-toid</b>&#160;&#60;<i>volume&#160;ID&#160;on&#160;destination</i>&#62;] [<b>-offline</b>] [<b>-readonly</b>] [<b>-live</b>] [<b>-incremental</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-encrypt</b>] [<b>-help</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos shadow</b> command creates a shadow copy of a volume on a different partition or server.</p>

<p>A shadow volume is a copy of a volume that does not normally appear in the volume location database (VLDB).
It is a primitive operation that is meant to be used in backup or disaster recovery situations.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>This command is not used during normal OpenAFS administration and may have adverse effects on the VLDB if not used properly!
This command should only be used by an expert.</p>

<p>Using this command on a volume when the source volume is not the same as parent volume used to create the shadow will leave the destination volume in a unknown state.</p>

<p>Do NOT run the <b>vos syncserv</b> or <b>vos syncvldb</b> on any fileserver containing shadow volumes.
This would update the VLDB to show all shadowed Read/Write volumes instead of the source volumes from which they were copied.</p>

<p>Currently,
the maximum size of a volume is 2 terabytes (2^31 bytes).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="[-id]_&#60;volume_name_or_ID&#62;"
>[<b>-id</b>] &#60;<i>volume name or ID</i>&#62;</a></dt>

<dd>
<p>Specifies either the complete name or volume ID number of a read/write volume.</p>

<dt><a name="[-fromserver]_&#60;machine_name_for_source&#62;"
>[<b>-fromserver</b>] &#60;<i>machine name for source</i>&#62;</a></dt>

<dd>
<p>Identifies the file server machine where the source volume resides.
Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation).
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="[-frompartition]_&#60;partition_name_for_source&#62;"
>[<b>-frompartition</b>] &#60;<i>partition name for source</i>&#62;</a></dt>

<dd>
<p>Names the partition where the source volume resides.
Provide the full partition name (for,
example,
<b>/vicepa</b>) or one of the abbreviated forms described in <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="[-toserver]_&#60;machine_name_for_destination&#62;"
>[<b>-toserver</b>] &#60;<i>machine name for destination</i>&#62;</a></dt>

<dd>
<p>Identifies the file server machine to which to copy the volume.
Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation).
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="[-topartition]_&#60;partition_name_for_destination&#62;"
>[<b>-topartition</b>] &#60;<i>partition name for destination</i>&#62;</a></dt>

<dd>
<p>Names the partition to which to copy the volume.
Provide the full partition name (for,
example,
<b>/vicepa</b>) or one of the abbreviated forms described in <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-toname_&#60;volume_name_for_new_copy&#62;"
><b>-toname</b> &#60;<i>volume name for new copy</i>&#62;</a></dt>

<dd>
<p>The complete name of the new volume to create.</p>

<dt><a name="-offline"
><b>-offline</b></a></dt>

<dd>
<p>Leaves the new volume flagged as off-line in the volume database.</p>

<dt><a name="-readonly"
><b>-readonly</b></a></dt>

<dd>
<p>Flags the new volume as read-only in the volume database.</p>

<dt><a name="-live"
><b>-live</b></a></dt>

<dd>
<p>Copies the live volume without cloning.
This is normally not necessary and causes the volume to be kept locked for longer than the normal copy mechanism.</p>

<dt><a name="-incremental"
><b>-incremental</b></a></dt>

<dd>
<p>Copy the changes from the source volume to a previously created shadow volume.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-encrypt"
><b>-encrypt</b></a></dt>

<dd>
<p>Encrypts the command so that the operation&#39;s results are not transmitted across the network in clear text.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>This command has no output unless <code>-verbose</code> is specified or there is an error.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machines specified with the <b>-toserver</b> and <b>-fromserver</b> arguments and on each database server machine.
If the <b>-localauth</b> flag is included,
the issuer must instead be logged on to a server machine as the local superuser <code>root</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/vos.html" class="podlinkman"
>vos(1)</a>,
<a href="../1/vos_backup.html" class="podlinkpod"
>vos_backup(1)</a>,
<a href="../1/vos_copy.html" class="podlinkpod"
>vos_copy(1)</a>,
<a href="../1/vos_move.html" class="podlinkpod"
>vos_move(1)</a></p>

<p><a href="http://www.openafs.org/pipermail/openafs-info/2005-July/018469.html" class="podlinkurl"
>http://www.openafs.org/pipermail/openafs-info/2005-July/018469.html</a> discusses motivation for the creation of this command.</p>

<p><a href="http://workshop.openafs.org/afsbpw06/talks/drh.scs.html" class="podlinkurl"
>http://workshop.openafs.org/afsbpw06/talks/drh.scs.html</a> discusses one possible use for it.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright 2008 Jason Edgecombe &#60;jason@rampaginggeek.com&#62;</p>

<p>This documentation is covered by the BSD License as written in the doc/LICENSE file.
This man page was written by Jason Edgecombe for OpenAFS.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
