<html><head><title>vos_examine</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun  6 16:42:57 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_examine - Shows volume header and VLDB entry information for a volume</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos examine</b> <b>-id</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-extended</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-help</b>]</p>

<p><b>vos e</b> <b>-i</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-e</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>

<p><b>vos volinfo</b> <b>-i</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-e</b>] [-c &#60;<i>cell name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>

<p><b>vos v</b> <b>-i</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-e</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos examine</b> command formats and displays information from the Volume Location Database (VLDB) entry and the volume header of the volume specified by the <b>-id</b> argument.</p>

<p>To display the volume header only,
use the <b>vos listvol</b> command.
To display information from the VLDB only,
use the <b>vos listvldb</b> command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Currently,
the maximum size of a volume is 2 terabytes (2^31 bytes) and the maximum size of a /vicepX partition on a fileserver is also 2 terabytes.
The fileserver will not report an error when it has access to a partition larger than 2 terabytes,
but it will probably fail if the administrator attempts to use more than 2 terabytes of space.
In addition,
there are reports of erroneous disk usage numbers when <b>vos partinfo</b> or other OpenAFS disk reporting tools are used with partitions larger than 2 terabytes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-id_&#60;volume_name_or_ID&#62;"
><b>-id</b> &#60;<i>volume name or ID</i>&#62;</a></dt>

<dd>
<p>Specifies either the complete name or volume ID number of the volume,
which can be read/write,
read-only,
or backup.</p>

<dt><a name="-extended"
><b>-extended</b></a></dt>

<dd>
<p>Display statistics about read and write operations on files and directories in the volume.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>The first seven lines of the output show information from the volume header and the remaining lines come from the VLDB.
Each item in the following list corresponds to a line of output derived from the volume header.</p>

<ul><li><p>Basic information about the specified volume (displayed on a single line):
<ul><li><p>Name</p></li><li><p>Volume ID number</p></li><li><p>Type (the flag is <code>RW</code> for read/write,
<code>RO</code> for read-only,
<code>BK</code> for backup)</p></li><li><p>Size in kilobytes (<code>1024</code> equals a megabyte)</p></li><li><p>Number of files in the volume,
if the <b>-extended</b> flag is provided</p></li><li><p>Status on the file server machine,
which is one of the following:
<dl>
<dt><a name="On-line"
>On-line</a></dt>

<dd>
<p>The volume is completely accessible to Cache Managers.</p>

<dt><a name="Off-line"
>Off-line</a></dt>

<dd>
<p>The volume is not accessible to Cache Managers,
but does not seem to be corrupted.
This status appears while a volume is being dumped,
for example.</p>

<dt><a name="Off-line**needs_salvage**"
>Off-line**needs salvage**</a></dt>

<dd>
<p>The volume is not accessible to Cache Managers,
because it seems to be corrupted.
Use the <b>bos salvage</b> or <b>salvager</b> command to repair the corruption.</p>
</dd>
</dl>
</p></li></ul>
</p></li><li><p>The file server machine and partition that house the volume,
as determined by the command interpreter as the command runs,
rather than derived from the VLDB or the volume header.</p></li><li><p>The volume ID numbers associated with the various versions of the volume: read/write (<code>RWrite</code>),
read-only (<code>ROnly</code>),
backup (<code>Backup</code>),
and ReleaseClone (<code>RClone</code>).
One of them matches the volume ID number that appears on the first line of the volume&#39;s output.
If the value in the <code>RWrite</code>,
<code>ROnly</code>,
or <code>Backup</code> field is <code>0</code> (zero),
there is no volume of that type.
If there is currently no ReleaseClone,
the <code>RClone</code> field does not appear at all.</p></li><li><p>The maximum space quota allotted to the read/write copy of the volume,
expressed in kilobyte blocks in the <code>MaxQuota</code> field.</p></li><li><p>The date and time the volume was created,
in the <code>Creation</code> field.
If the volume has been restored with the <b>backup diskrestore</b>,
<b>backup volrestore</b>,
or <b>vos restore</b> command,
this is the restore time.</p></li><li><p>The date and time when the contents of the volume last changed,
in the <code>Last Update</code> field.
For read-only and backup volumes,
it matches the timestamp in the <code>Creation</code> field.</p></li><li><p>The number of times the volume has been accessed for a fetch or store operation since the later of the two following times:
<ul><li><p>12:00 a.m.
on the day the command is issued</p></li><li><p>The last time the volume changed location</p></li></ul>
</p></li></ul>

<p>When the <b>-extended</b> flag is included,
two tables appear next:</p>

<ul><li><p>The table labeled <code>Raw Read/Write Stats</code> contains information on the number of reads (fetches) and writes (stores) made on the specified volume.</p></li><li><p>The table labeled <code>Writes Affecting Authorship</code> contains information on writes made to files and directories in the specified volume.</p></li></ul>

<p>If the following message appears instead of the previously listed information,
it indicates that a volume is not accessible to Cache Managers or the <b>vos</b> command interpreter,
for example because a clone is being created.</p>

<pre>   **** Volume &#60;volume_ID&#62; is busy ****</pre>

<p>If the following message appears instead of the previously listed information, it indicates that the File Server is unable to attach the volume, perhaps because it is seriously corrupted. The <em>FileLog</em> and <em>VolserLog</em> log files in the <em>/usr/afs/logs</em> directory on the file server machine possibly provide additional information; use the <b>bos getlog</b> command to display them.</p>

<pre>   **** Could not attach volume &#60;volume_ID&#62; ****</pre>

<p>Following a blank line, information from the VLDB entry appears. Each item in this list corresponds to a separate line in the output:</p>

<ul><li><p>The base (read/write) volume name. The read-only and backup versions have the same name with a <code>.readonly</code> and <code>.backup</code> extension, respectively.</p></li><li><p>The volume ID numbers allocated to the versions of the volume that actually exist, in fields labeled <code>RWrite</code> for the read/write, <code>ROnly</code> for the read-only, <code>Backup</code> for the backup, and <code>RClone</code> for the ReleaseClone. (If a field does not appear, the corresponding version of the volume does not exist.) The appearance of the <code>RClone</code> field normally indicates that a release operation did not complete successfully; the <code>Old release</code> and <code>New release</code> flags often also appear on one or more of the site definition lines described just following.</p></li><li><p>The number of sites that house a read/write or read-only copy of the volume, following the string <code>number of sites -&#62;</code>.</p></li><li><p>A line for each site that houses a read/write or read-only copy of the volume, specifying the file server machine, partition, and type of volume (<code>RW</code> for read/write or <code>RO</code> for read-only). If a backup version exists, it is understood to share the read/write site. Several flags can appear with a site definition:
<dl>
<dt><a name="Not_released"
>Not released</a></dt>

<dd>
<p>Indicates that the vos release command has not been issued since the <b>vos addsite</b> command was used to define the read-only site.</p>

<dt><a name="Old_release"
>Old release</a></dt>

<dd>
<p>Indicates that a vos release command did not complete successfully, leaving the previous, obsolete version of the volume at this site.</p>

<dt><a name="New_release"
>New release</a></dt>

<dd>
<p>Indicates that a vos release command did not complete successfully, but that this site did receive the correct new version of the volume.</p>
</dd>
</dl>
</p></li><li><p>If the VLDB entry is locked, the string <code>Volume is currently LOCKED</code>.</p></li></ul>

<p>For further discussion of the <code>New release</code> and <code>Old release</code> flags, see <a href="../1/vos_release.html" class="podlinkpod"
>vos_release(1)</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example shows output for the ABC Corporation volume called <code>usr</code> with two read-only replication sites (this volume is mounted at the <em>/afs/abc.com/usr</em> directory). For the sake of illustration, the output shows the volume as locked.</p>

<pre>   % vos examine usr
   usr                           536870981 RW   3459 K On-line
        fs2.abc.com /vicepb
        RWrite 5360870981   ROnly 536870982   Backup 536870983
        MaxQuota      40000 K
        Creation    Mon Jun 12 15:22:06 1989
        Last Update Fri Jun 16 09:34:35 1989
        5719 accesses in the past day (i.e., vnode references)
        RWrite: 5360870981   ROnly: 536870982   Backup: 536870983
        number of sites -&#62; 3
           server fs1.abc.com partition /vicepa RO Site
           server fs3.abc.com partition /vicepa RO Site
           server fs2.abc.com partition /vicepb RW Site
        Volume is currently LOCKED</pre>

<p>The following example shows the output for the volume <code>user.terry</code> using the <b>-extended</b> flag. The volume has no read-only replication sites.</p>

<pre>   % vos examine -id user.terry -extended
   user.terry         354287190 RW    2302 K used 119 files On-line
       fs4.abc.com /vicepc
       RWrite 354287190 ROnly          0 Backup 354287192
       MaxQuota       5000 K
       Creation    Wed Nov 25 17:38:57 1992
       Last Update Tue Dec 15 10:46:20 1992
       598 accesses in the past day (i.e., vnode references)
                         Raw Read/Write Stats
             |-------------------------------------------|
             |    Same Network     |    Diff Network     |
             |----------|----------|----------|----------|
             |  Total   |   Auth   |   Total  |   Auth   |
             |----------|----------|----------|----------|
   Reads     |       55 |       55 |       38 |       38 |
   Writes    |       95 |       95 |        0 |        0 |
             |-------------------------------------------|
                      Writes Affecting Authorship
             |-------------------------------------------|
             |   File Authorship   | Directory Authorship|
             |----------|----------|----------|----------|
             |   Same   |   Diff   |    Same  |   Diff   |
             |----------|----------|----------|----------|
   0-60 sec  |       38 |        0 |       21 |        1 |
   1-10 min  |        2 |        0 |        7 |        0 |
   10min-1hr |        0 |        0 |        1 |        0 |
   1hr-1day  |        1 |        0 |        5 |        1 |
   1day-1wk  |        0 |        0 |        0 |        0 |
   &#62; 1wk     |        0 |        0 |        0 |        0 |
             |-------------------------------------------|
       RWrite: 354287190    Backup: 354287192
       number of sites -&#62; 1
          server fs4.abc.com partition /vicepc RW Site</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>None</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../8/backup_diskrestore.html" class="podlinkpod"
>backup_diskrestore(8)</a>, <a href="../8/backup_volrestore.html" class="podlinkpod"
>backup_volrestore(8)</a>, <a href="../8/bos_getlog.html" class="podlinkpod"
>bos_getlog(8)</a>, <a href="../8/bos_salvage.html" class="podlinkpod"
>bos_salvage(8)</a>, <a href="../8/salvager.html" class="podlinkman"
>salvager(8)</a>, <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>, <a href="../1/vos_listvol.html" class="podlinkpod"
>vos_listvol(1)</a>, <a href="../1/vos_listvldb.html" class="podlinkpod"
>vos_listvldb(1)</a>, <a href="../1/vos_release.html" class="podlinkpod"
>vos_release(1)</a>, <a href="../1/vos_restore.html" class="podlinkpod"
>vos_restore(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
