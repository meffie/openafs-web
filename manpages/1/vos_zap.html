<html><head><title>vos_zap</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun  6 16:42:59 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_zap - Removes a volume from its site without writing to the VLDB</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos zap</b> <b>-server</b>&#160;&#60;<i>machine&#160;name</i>&#62; <b>-partition</b>&#160;&#60;<i>partition&#160;name</i>&#62; <b>-id</b>&#160;&#60;<i>volume&#160;ID</i>&#62; [<b>-force</b>] [<b>-backup</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-help</b>]</p>

<p><b>vos z</b> <b>-s</b>&#160;&#60;<i>machine&#160;name</i>&#62; <b>-p</b>&#160;&#60;<i>partition&#160;name</i>&#62; <b>-i</b>&#160;&#60;<i>volume&#160;ID</i>&#62; [<b>-f</b>] [<b>-b</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos zap</b> command removes the volume with the specified <i>volume ID</i> from the site defined by the <b>-server</b> and <b>-partition</b> arguments,
without attempting to change the corresponding Volume Location Database (VLDB) entry.
If removing the volume can possibly result in incorrect data in the VLDB,
a warning message is displayed.</p>

<p>The <b>-force</b> flag removes a volume even if it cannot be &#34;attached&#34; (brought online),
which can happen either because the volume is extremely damaged or because the Salvager functioned abnormally.
Without this flag,
this command cannot remove volumes that are not attachable.
See also <a href="./CAUTIONS.html" class="podlinkpod"
>CAUTIONS</a>.</p>

<p>To remove the specified read/write volume&#39;s backup version at the same time,
include the <b>-backup</b> flag.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Do not use this command as the standard way to remove a volume,
as it is likely to put the VLDB out of sync with the volumes on servers.
Use the <b>vos remove</b> command instead.</p>

<p>This command is useful in situations where it is important to delete the volume,
but for some reason the VLDB is unreachable -- for example,
because s the Volume Location Server is unavailable.
The issuer can remove the VLDB entry later with the <b>vos remove</b> or <b>vos delentry</b> command,
or it is removed automatically when the <b>vos syncserv</b> and <b>vos syncvldb</b> commands run.</p>

<p>To remove a read-only site defined in the VLDB by mistake,
before a copy actually exists at the site,
use the <b>vos remsite</b> command.
To remove an entire VLDB entry without affecting volumes at their sites,
use the <b>vos delentry</b> command.</p>

<p>Do not use the <b>-force</b> flag if the volume is online,
but only when attempts to remove the volume with the <b>vos remove</b> or the <b>vos zap</b> command have failed,
or the volume definitely cannot be attached.
After using the <b>-force</b> flag,
make sure that the volume&#39;s VLDB entry is also removed (issue the <b>vos delentry</b> command if necessary).</p>

<p>Adding the <b>-force</b> flag makes the command take considerably longer -- about as long as a salvage of the relevant partition -- since the Volume Server examines all inodes on the partition for traces of the volume.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-server_&#60;server_name&#62;"
><b>-server</b> &#60;<i>server name</i>&#62;</a></dt>

<dd>
<p>Identifies the file server machine from which to remove the volume.
Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation).
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-partition_&#60;partition_name&#62;"
><b>-partition</b> &#60;<i>partition name</i>&#62;</a></dt>

<dd>
<p>Identifies the partition (on the file server machine specified by the <b>-server</b> argument) from which to remove the volume.
Provide the partition&#39;s complete name with preceding slash (for example,
<code>/vicepa</code>) or use one of the three acceptable abbreviated forms.
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-id_&#60;volume_ID&#62;"
><b>-id</b> &#60;<i>volume ID</i>&#62;</a></dt>

<dd>
<p>Specifies the volume ID number of the volume to remove,
which can be of any of the three types.
The volume name is not acceptable.</p>

<dt><a name="-force"
><b>-force</b></a></dt>

<dd>
<p>Removes the volume even though it cannot be attached (brought online).
Use only after the failure of previous attempts to remove the volume by using the <b>vos remove</b> command or the <b>vos zap</b> command without this flag.</p>

<dt><a name="-backup"
><b>-backup</b></a></dt>

<dd>
<p>Removes the backup version of the read/write volume specified by the <b>-id</b> argument.
Do not use this flag if the <b>-id</b> argument identifies a read-only or backup volume.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example removes the volume with volume ID 536870988 from the <em>/vicepf</em> partition of the file server machine <code>fs6.abc.com</code>,
without noting the change in the VLDB.</p>

<pre>   % vos zap -server fs6.abc.com -partition f -id 536870988</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machine specified with the <b>-server</b> argument and on each database server machine. If the <b>-localauth</b> flag is included, the issuer must instead be logged on to a server machine as the local superuser <code>root</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/vos.html" class="podlinkman"
>vos(1)</a>, <a href="../1/vos_delentry.html" class="podlinkpod"
>vos_delentry(1)</a>, <a href="../1/vos_remove.html" class="podlinkpod"
>vos_remove(1)</a>, <a href="../1/vos_remsite.html" class="podlinkpod"
>vos_remsite(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
