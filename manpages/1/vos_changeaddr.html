<html><head><title>vos_changeaddr</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Wed Jul 16 06:01:54 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_changeaddr - Changes or removes a file server machine&#39;s entry in the VLDB</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos changeaddr</b> <b>-oldaddr</b>&#160;&#60;<i>original&#160;IP&#160;address</i>&#62; [<b>-newaddr</b>&#160;&#60;<i>new&#160;IP&#160;address</i>&#62;] [<b>-remove</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-help</b>]</p>

<p><b>vos ch</b> <b>-o</b>&#160;&#60;<i>original&#160;IP&#160;address</i>&#62; [<b>-ne</b>&#160;&#60;<i>new&#160;IP&#160;address</i>&#62;] [<b>-r</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-no</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos changeaddr</b> command removes a server entry from the Volume Location Database (VLDB) when the <b>-remove</b> flag is combined with the <b>-oldaddr</b> argument.
There must be no VLDB entries that list the machine as a site for any version of a volume (if necessary,
use the <b>vos move</b> or <b>vos remove</b> command to more or remove volumes).
It is appropriate to remove a VLDB server entry when removing the corresponding file server machine from service; this is the only recommended use of the command.</p>

<p>To display all VLDB server entries,
use the <b>vos listaddrs</b> command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Combining the command&#39;s <b>-oldaddr</b> and <b>-newaddr</b> arguments is no longer the appropriate way to change the IP address registered for a file server machine.
Furthermore,
if a machine is multihomed and its server entry includes several addresses,
then the address specified with the <b>-newaddr</b> argument replaces all of the addresses currently listed in the server entry that includes the address specified by the <b>-oldaddr</b> argument.
This effectively makes the machine single-homed with respect to AFS operations,
which is probably not the desired result.</p>

<p>The recommended method for changing the IP addresses in a server entry is instead to restart the <code>fs</code> process group (which includes the File Server) after using the utilities provided by the operating system to reconfigure the machine&#39;s network interfaces.
For a description of how the File Server constructs and registers a list of its network interfaces in the VLDB,
see <a href="../5/sysid.html" class="podlinkman"
>sysid(5)</a>.</p>

<p>If,
counter to recommended usage,
the command is used to change the IP address in a server entry,
it does not also change the names of machine entries in the Protection Database.
Operations fail when they refer to a protection group that has an obsolete IP address in it.
Use the <b>pts rename</b> command to change the names of machine entries that correspond to the addresses changed with this command.
Changing the address of a database server machine also requires updating the client and server versions of the <em>CellServDB</em> file on every machine.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-oldaddr_&#60;original_IP_address&#62;"
><b>-oldaddr</b> &#60;<i>original IP address</i>&#62;</a></dt>

<dd>
<p>Specifies the IP address currently registered for the file server machine in the VLDB server entry.
If there are multiple addresses registered for a multihomed machine,
use any of them to identify the server entry.</p>

<dt><a name="-newaddr_&#60;new_IP_address&#62;"
><b>-newaddr</b> &#60;<i>new IP address</i>&#62;</a></dt>

<dd>
<p>Specifies the new IP address that replaces all currently registered addresses.</p>

<dt><a name="-remove"
><b>-remove</b></a></dt>

<dd>
<p>Removes from the VLDB the server entry that includes the address specified by the <b>-oldaddr</b> argument.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command removes the VLDB server entry that includes the IP address <code>192.12.107.214</code>.</p>

<pre>   % vos changeaddr -oldaddr 192.12.107.214 -remove</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>Issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machine specified with the <b>-oldaddr</b> argument and on each database server machine.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/CellServDB.html" class="podlinkman"
>CellServDB(5)</a>, <a href="../5/UserList.html" class="podlinkman"
>UserList(5)</a>, <a href="../5/sysid.html" class="podlinkman"
>sysid(5)</a>, <a href="../8/fileserver.html" class="podlinkman"
>fileserver(8)</a>, <a href="../1/pts_rename.html" class="podlinkpod"
>pts_rename(1)</a>, <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>, <a href="../1/vos_listaddrs.html" class="podlinkpod"
>vos_listaddrs(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
