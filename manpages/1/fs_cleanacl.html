<html><head><title>fs_cleanacl</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:23 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>fs_cleanacl - Remove obsolete entries from an ACL</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>fs cleanacl</b> [<b>-path</b>&#160;&#60;<i>dir/file&#160;path</i>&#62;+] [<b>-help</b>]</p>

<p><b>fs cl</b> [<b>-p</b>&#160;&#60;<i>dir/file&#160;path</i>&#62;+] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>fs cleanacl</b> command removes from the access control list (ACL) of each specified directory or file any entry that refers to a user or group that no longer has a Protection Database entry.
Such an entry appears on the ACL as an AFS user ID number (UID) rather than a name,
because without a Protection Database entry,
the File Server cannot translate the UID into a name.</p>

<p>Cleaning access control lists in this way not only keeps them from becoming crowded with irrelevant information,
but also prevents the new possessor of a recycled AFS UID from obtaining access intended for the former possessor of the AFS UID.
(Note that recycling UIDs is not recommended in any case.)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-path_&#60;dir/file_path&#62;+"
><b>-path</b> &#60;<i>dir/file path</i>&#62;+</a></dt>

<dd>
<p>Names each directory for which to clean the ACL (specifying a filename cleans its directory&#39;s ACL).
If this argument is omitted,
the current working directory&#39;s ACL is cleaned.</p>

<p>Specify the read/write path to each directory,
to avoid the failure that results from attempting to change a read-only volume.
By convention,
the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example,
<em>/afs/.abc.com</em>).
For further discussion of the concept of read/write and read-only paths through the filespace,
see the <b>fs mkmount</b> reference page.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>If there are no obsolete entries on the ACL,
the following message appears:</p>

<pre>   Access list for &#60;path&#62; is fine.</pre>

<p>Otherwise, the output reports the resulting state of the ACL, following the header</p>

<pre>   Access list for &#60;path&#62; is now</pre>

<p>At the same time, the following error message appears for each file in the cleaned directories:</p>

<pre>   fs: &#39;&#60;filename&#62;&#39;: Not a directory</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example illustrates the cleaning of the ACLs on the current working directory and two of its subdirectories. Only the second subdirectory had obsolete entries on it.</p>

<pre>   % fs cleanacl -path . ./reports ./sources
   Access list for . is fine.
   Access list for ./reports is fine.
   Access list for ./sources is now
   Normal rights:
      system:authuser rl
      pat rlidwka</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must have the <code>a</code> (administer) permission on each directory&#39;s ACL (or the ACL of each file&#39;s parent directory); the directory&#39;s owner and the members of the system:administrators group have the right implicitly, even if it does not appear on the ACL.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/fs_listacl.html" class="podlinkpod"
>fs_listacl(1)</a>, <a href="../1/fs_mkmount.html" class="podlinkpod"
>fs_mkmount(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
