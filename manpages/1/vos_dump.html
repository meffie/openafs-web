<html><head><title>vos_dump</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Mar 29 18:17:44 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_dump - Converts a volume into ASCII format and writes it to a file</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos dump</b> <b>-id</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-time</b>&#160;&#60;<i>dump&#160;from&#160;time</i>&#62;] [<b>-file</b>&#160;&#60;<i>dump&#160;file</i>&#62;] [<b>-server</b>&#160;&#60;<i>server</i>&#62;] [<b>-partition</b>&#160;&#60;<i>partition</i>&#62;] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-help</b>]</p>

<p><b>vos du</b> <b>-i</b>&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-t</b>&#160;&#60;<i>dump&#160;from&#160;time</i>&#62;] [<b>-f</b>&#160;&#60;<i>dump&#160;file</i>&#62;] [<b>-s</b>&#160;&#60;<i>server</i>&#62;] [<b>-p</b>&#160;&#60;<i>partition</i>&#62;] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos dump</b> command converts the contents of the indicated volume,
which can be read/write,
read-only or backup,
into ASCII format.
The Volume Server writes the converted contents to the file named by the <b>-file</b> argument,
or to the standard output stream.
In the latter case,
the output can be directed to a named pipe,
which enables interoperation with third-party backup utilities.</p>

<p>To dump the complete contents of a volume (create a <i>full dump</i>),
omit the <b>-time</b> argument or specify the value <code>0</code> (zero) for it.
To create an <i>incremental dump</i>,
which includes only the files and directories in the volume that have modification timestamps later than a certain time,
specify a date and time as the value for the <b>-time</b> argument.</p>

<p>By default,
the vos command interpreter consults the Volume Location Database (VLDB) to learn the volume&#39;s location,
so the <b>-server</b> and <b>-partition</b> arguments are not required.
If the <b>-id</b> argument identifies a read-only volume that resides at multiple sites,
the command dumps the version from just one of them (normally,
the one listed first in the volume&#39;s VLDB entry as reported by the <b>vos examine</b> or <b>vos listvldb</b> command).
To dump the read-only volume from a particular site,
use the <b>-server</b> and <b>-partition</b> arguments to specify the site.
To bypass the VLDB lookup entirely,
provide a volume ID number (rather than a volume name) as the value for the <b>-id</b> argument,
together with the <b>-server</b> and <b>-partition</b> arguments.
This makes it possible to dump a volume for which there is no VLDB entry.</p>

<p>During the dump operation,
the volume is inaccessible both to Cache Managers and to other volume operations.
Dumping a volume does not otherwise affect its status on the partition or its VLDB entry.</p>

<p>To restore a dumped volume back into AFS,
use the <b>vos restore</b> command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Support for incremental dumps is provided to facilitate interoperation with third-party backup utilities.
The <b>vos dump</b> command does not provide any of the administrative facilities of an actual backup system,
so the administrator must keep manual records of dump times and the relationship between full and incremental dumps of a volume.
For a volume&#39;s contents to be consistent after restoration of incremental dumps,
there must be no gap between the time at which a prior dump of the volume was created and the value of the <b>-time</b> argument to the <b>vos dump</b> command that creates the incremental dump.
More specifically,
for a read/write volume,
the <b>-time</b> argument must specify the time that the prior dump was performed,
and for a read-only or backup volume it must specify the time that the volume was last released (using the <b>vos release</b> command) or cloned (using the <b>vos backup</b> or <b>vos backupsys</b> command) prior to dumping it.
The parent dump can be either a full dump or another incremental dump.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-id_&#60;volume_name_or_ID&#62;"
><b>-id</b> &#60;<i>volume name or ID</i>&#62;</a></dt>

<dd>
<p>Specifies either the complete name or volume ID number of the read/write,
read-only,
or backup volume to dump.</p>

<dt><a name="-time_&#60;dump_from_time&#62;"
><b>-time</b> &#60;<i>dump from time</i>&#62;</a></dt>

<dd>
<p>Specifies whether the dump is full or incremental.
Omit this argument to create a full dump,
or provide one of three acceptable values:</p>

<ul><li><p>The value <code>0</code> (zero) to create a full dump.</p></li><li><p>A date in the format <i>mm</i><b>/</b><i>dd</i><b>/</b><i>yyyy</i> (month,
day and year) to create an incremental dump that includes only files and directories with modification timestamps later than midnight (12:00 a.m.) on the indicated date.
Valid values for the year range from <code>1970</code> to <code>2037</code>; higher values are not valid because the latest possible date in the standard UNIX representation is in 2038.
The command interpreter automatically reduces later dates to the maximum value.
An example is <code>01/13/1999</code>.</p></li><li><p>A date and time in the format <b>&#34;</b><i>mm</i><b>/</b><i>dd</i><b>/</b><i>yyyy</i> <i>hh</i><b>:</b><i>MM</i><b>&#34;</b> to create an incremental dump that includes only files and directories with modification timestamps later than the specified date and time.
The date format is the same as for a date alone.
Express the time as hours and minutes (<i>hh</i>:<i>MM</i>) in 24-hour format (for example,
<b>20:30</b> is 8:30 p.m.).
Surround the entire expression with double quotes (<code>&#34;&#34;</code>) because it contains a space.
An example is <code>&#34;01/13/1999 22:30&#34;</code>.</p></li></ul>

<dt><a name="-file_&#60;dump_file&#62;"
><b>-file</b> &#60;<i>dump file</i>&#62;</a></dt>

<dd>
<p>Specifies the pathname of the file to which to write the dump.
The file can be in AFS,
but not in the volume being dumped.
A partial pathname is interpreted relative to the current working directory.
If this argument is omitted,
the dump is directed to the standard output stream.</p>

<dt><a name="-server_&#60;server_name&#62;"
><b>-server</b> &#60;<i>server name</i>&#62;</a></dt>

<dd>
<p>Specifies the file server machine on which the volume resides.
Provide the <b>-partition</b> argument along with this one.</p>

<dt><a name="-partition_&#60;partition_name&#62;"
><b>-partition</b> &#60;<i>partition name</i>&#62;</a></dt>

<dd>
<p>Specifies the partition on which the volume resides.
Provide the <b>-server</b> argument along with this one.</p>

<dt><a name="-cell_&#60;cell_name"
><b>-cell</b> &#60;<i>cell name</i></a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity anonymous to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command writes a full dump of the volume <code>user.terry</code> to the file <em>/afs/abc.com/common/dumps/terry.dump</em>.</p>

<pre>   % vos dump -id user.terry -time 0 -file /afs/abc.com/common/dumps/terry.dump</pre>

<p>The following command writes an incremental dump of the volume <code>user.smith</code> to the file <code>smith.990131.dump</code> in the current working directory. Only those files in the volume with modification time stamps later than 6:00 p.m. on 31 January 1999 are included in the dump.</p>

<pre>   % vos dump -id user.smith -time &#34;01/31/1999 18:00&#34; -file smith.990131.dump</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machine specified with the <b>-server</b> argument and on each database server machine. If the <b>-localauth</b> flag is included, the issuer must instead be logged on to a server machine as the local superuser <code>root</code>.</p>

<p>If the <b>-file</b> argument is included, the issuer must also have permission to insert and write in the directory that houses the file.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/vos.html" class="podlinkman"
>vos(1)</a>, <a href="../1/vos_examine.html" class="podlinkpod"
>vos_examine(1)</a>, <a href="../1/vos_listvldb.html" class="podlinkpod"
>vos_listvldb(1)</a>, <a href="../1/vos_restore.html" class="podlinkpod"
>vos_restore(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
