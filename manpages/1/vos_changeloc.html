<html><head><title>vos_changeloc</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun 27 16:26:00 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_changeloc - Change a volume&#39;s entry in the VLDB</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos changeloc</b> [<b>-server</b>]&#160;&#60;<i>new&#160;server&#160;name</i>&#62; [<b>-partition</b>]&#160;&#60;<i>new&#160;partition&#160;location</i>&#62; [<b>-id</b>]&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-encrypt</b>] [<b>-help</b>]</p>

<p><b>vos changel</b> [<b>-s</b>]&#160;&#60;<i>new&#160;server&#160;name</i>&#62; [<b>-p</b>]&#160;&#60;<i>new&#160;partition&#160;location</i>&#62; [<b>-i</b>]&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-v</b>] [<b>-e</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos changeloc</b> command changes the location of a volume in the Volume Location Database (VLDB) without needing to contact the original file server on which the volume was hosted.
This is useful when a file server has gone down permanently and the data that was stored on that server has been moved to a new file server with a different name and IP address (perhaps by mounting the same /vicepX partitions on a different host).
After moving the data and running <b>vos changeloc</b>,
run <b>vos syncvldb</b> and then <b>vos syncserv</b> against the new server to ensure full synchronization of the VLDB with the file server.</p>

<p>In essence,
<b>vos changeloc</b> performs the same operations on the VLDB as <b>vos move</b>,
but it does NOT move the data from one server&#39;s file system to another.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Using <b>vos changeloc</b> changes the VLDB without modifying the file server data,
so it inherently causes the VLDB to be out of sync with the data on the servers.
It should only be used when recovering from server failure.
If the servers are on-line,
<b>vos move</b> should be used instead.
It is highly recommended that <b>vos syncvldb</b> and <b>vos syncserv</b> be run after using the <b>vos changeloc</b> command to ensure properly synchronization of the VLDB with the file servers.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<p><b>vos changeloc</b> takes the following options:</p>

<dl>
<dt><a name="-server_&#60;new_server_name&#62;"
><b>-server</b> &#60;<i>new server name</i>&#62;</a></dt>

<dd>
<p>Specifies the new server where the VLDB should believe the volume resides.
Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation).
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-partition_&#60;partition_name&#62;"
><b>-partition</b> &#60;<i>partition name</i>&#62;</a></dt>

<dd>
<p>Specifies the partition where the VLDB should believe the volume resides.
entries.
Provide the <b>-server</b> argument along with this one.
Provide the partition&#39;s complete name with preceding slash (for example,
<code>/vicepa</code>) or use one of the three acceptable abbreviated forms.
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-id_&#60;volume_name_or_ID&#62;"
><b>-id</b> &#60;<i>volume name or ID</i>&#62;</a></dt>

<dd>
<p>Specifies the name or volume ID number on which to operate.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-encrypt"
><b>-encrypt</b></a></dt>

<dd>
<p>Encrypts the commands that are sent to the server.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p><b>vos changeloc</b> shows a brief message upon completion:</p>

<pre>   Changed location to server2 /vicepa for volume user.jdoe</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command changes the location of the <code>user.jdoe</code> volume to be <em>/vicepa</em> on the file server machine <code>server2</code> while being verbose:</p>

<pre>   % vos changeloc server2 a user.jdoe -verbose
    done
   Changed location to server2 /vicepa for volume user.jdoe</pre>

<p>The following command changes the location of the <code>user.jdoe</code> volume to be <em>/vicepa</em> on <code>server1</code> without being verbose:</p>

<pre>   % vos changeloc server1 a user.jdoe
   Changed location to server1 /vicepa for volume user.jdoe</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on each database server machine. If the <b>-localauth</b> flag is included, the issuer must instead be logged on to a server machine as the local superuser <code>root</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/vos.html" class="podlinkman"
>vos(1)</a>, <a href="../1/vos_move.html" class="podlinkpod"
>vos_move(1)</a>, <a href="../1/vos_syncserv.html" class="podlinkpod"
>vos_syncserv(1)</a>, <a href="../1/vos_syncvldb.html" class="podlinkpod"
>vos_syncvldb(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright 2007 Jason Edgecombe &#60;jason@rampaginggeek.com&#62;</p>

<p>This documentation is covered by the BSD License as written in the doc/LICENSE file. This man page was written by Jason Edgecombe for OpenAFS.</p>

<!-- end doc -->

</body></html>
