<html><head><title>fs_mkmount</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Mon Jul 14 01:56:33 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>fs_mkmount - Creates a mount point for a volume</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>fs mkmount</b> <b>-dir</b>&#160;&#60;<i>directory</i>&#62; <b>-vol</b>&#160;&#60;<i>volume&#160;name</i>&#62; [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-rw</b>] [<b>-fast</b>] [<b>-help</b>]</p>

<p><b>fs mk</b> <b>-d</b>&#160;&#60;<i>directory</i>&#62; <b>-v</b>&#160;&#60;<i>volume&#160;name</i>&#62; [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-r</b>] [<b>-f</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>fs mkmount</b> command creates a mount point for the volume named by the <b>-vol</b> argument at the location in the AFS file space specified by the <b>-dir</b> argument.
The mount point looks like a standard directory element,
and serves as the volume&#39;s root directory,
but is actually a special file system object that refers to an AFS volume.
When the Cache Manager first encounters a given mount point during pathname traversal,
it contacts the VL Server to learn which file server machines house the indicated volume,
then fetches a copy of the volume&#39;s root directory from the appropriate file server machine.</p>

<p>It is possible,
although not recommended,
to create more than one mount point to a volume.
The Cache Manager can become confused if a volume is mounted in two places along the same path through the filespace.</p>

<p>The Cache Manager observes three basic rules as it traverses the AFS filespace and encounters mount points:</p>

<dl>
<dt><a name="Rule_1:_Access_Backup_and_Read-only_Volumes_When_Specified"
>Rule 1: Access Backup and Read-only Volumes When Specified</a></dt>

<dd>
<p>When the Cache Manager encounters a mount point that specifies a volume with either a <code>.readonly</code> or a <code>.backup</code> extension,
it accesses that type of volume only.
If a mount point does not have either a <code>.backup</code> or <code>.readonly</code> extension,
the Cache Manager uses Rules 2 and 3.</p>

<p>For example,
the Cache Manager never accesses the read/write version of a volume if the mount point names the backup version.
If the specified version is inaccessible,
the Cache Manager reports an error.</p>

<dt><a name="Rule_2:_Follow_the_Read-only_Path_When_Possible"
>Rule 2: Follow the Read-only Path When Possible</a></dt>

<dd>
<p>If a mount point resides in a read-only volume and the volume that it references is replicated,
the Cache Manager attempts to access a read-only copy of the volume; if the referenced volume is not replicated,
the Cache Manager accesses the read/write copy.
The Cache Manager is thus said to prefer a <i>read-only path</i> through the filespace,
accessing read-only volumes when they are available.</p>

<p>The Cache Manager starts on the read-only path in the first place because it always accesses a read-only copy of the <b>root.afs</b> volume if it exists; the volume is mounted at the root of a cell&#39;s AFS filespace (named <em>/afs</em> by convention).
That is,
if the <code>root.afs</code> volume is replicated,
the Cache Manager attempts to access a read-only copy of it rather than the read/write copy.
This rule then keeps the Cache Manager on a read-only path as long as each successive volume is replicated.
The implication is that both the <code>root.afs</code> and <code>root.cell</code> volumes must be replicated for the Cache Manager to access replicated volumes mounted below them in the AFS filespace.
The volumes are conventionally mounted at the <em>/afs</em> and <em>/afs/<i>cellname</i></em> directories,
respectively.</p>

<dt><a name="Rule_3:_Once_on_a_Read/write_Path,_Stay_There"
>Rule 3: Once on a Read/write Path,
Stay There</a></dt>

<dd>
<p>If a mount point resides in a read/write volume and the volume name does not have a <code>.readonly</code> or a <code>.backup</code> extension,
the Cache Manager attempts to access only the a read/write version of the volume.
The access attempt fails with an error if the read/write version is inaccessible,
even if a read-only version is accessible.
In this situation the Cache Manager is said to be on a <i>read/write path</i> and cannot switch back to the read-only path unless mount point explicitly names a volume with a <code>.readonly</code> extension.
(Cellular mount points are an important exception to this rule,
as explained in the following discussion.</p>
</dd>
</dl>

<p>There are three types of mount points,
each appropriate for a different purpose because of the manner in which the Cache Manager interprets them.</p>

<ul><li><p>When the Cache Manager crosses a <i>regular</i> mount point,
it obeys all three of the mount point traversal rules previously described.
To create a regular mount point,
include only the required <b>-dir</b> and <b>-vol</b> arguments to the <b>fs mkmount</b> command.</p></li><li><p>When the Cache Manager crosses a <i>read/write</i> mount point,
it attempts to access only the volume version named in the mount point.
If the volume name is the base (read/write) form,
without a <code>.readonly</code> or <code>.backup</code> extension,
the Cache Manager accesses the read/write version of the volume,
even if it is replicated.
In other words,
the Cache Manager disregards the second mount point traversal rule when crossing a read/write mount point: it switches to the read/write path through the filespace.
<p>To create a read/write mount point,
include the <b>-rw</b> flag on the <b>fs mkmount</b> command.
It is conventional to create only one read/write mount point in a cell&#39;s filespace,
using it to mount the cell&#39;s <code>root.cell</code> volume just below the AFS filespace root (by convention,
<em>/afs/.<i>cellname</i></em>).
See the <i>IBM AFS Quick Beginnings</i> for instructions and the chapter about volume management in the <i>IBM AFS Administration Guide</i> for further discussion.</p>

<p>Creating a read/write mount point for a read-only or backup volume is acceptable,
but unnecessary.
The first rule of mount point traversal already specifies that the Cache Manager accesses them if the volume name in a regular mount point has a <code>.readonly</code> or <code>.backup</code> extension.</p>
</p></li><li><p>When the Cache Manager crosses a <i>cellular</i> mount point,
it accesses the indicated volume in the specified cell,
which is normally a foreign cell.
(If the mount point does not name a cell along with the volume,
the Cache Manager accesses the volume in the cell where the mount point resides.) The Cache Manager disregards the third mount point traversal rule when crossing a regular cellular mount point: it accesses a read-only version of the volume if it is replicated,
even if the volume that houses the mount point is read/write.
Switching to the read-only path in this way is designed to avoid imposing undue load on the file server machines in foreign cells.
<p>To create a regular cellular mount point,
include the <b>-cell</b> argument on the <b>fs mkmount</b> command.
It is conventional to create cellular mount points only at the second level in a cell&#39;s filespace,
using them to mount foreign cells&#39; <b>root.cell</b> volumes just below the AFS filespace root (by convention,
at <em>/afs/<i>foreign_cellname</i></em>).
The mount point enables local users to access the foreign cell&#39;s filespace,
assuming they have the necessary permissions on the ACL of the volume&#39;s root directory and that there is an entry for the foreign cell in each local client machine&#39;s <em>/usr/vice/etc/CellServDB</em> file.
In the output of the <b>fs lsmount</b> command,
the cell name and a colon (<code>:</code>) appear between the initial number sign and the volume name in a regular cellular mount point name.</p>
</p></li></ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-dir_&#60;directory&#62;+"
><b>-dir</b> &#60;<i>directory</i>&#62;+</a></dt>

<dd>
<p>Names the directory to create as a mount point.
The directory must not already exist.
Relative pathnames are interpreted with respect to the current working directory.</p>

<p>Specify the read/write path to the directory,
to avoid the failure that results from attempting to create a new mount point in a read-only volume.
By convention,
the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example,
<em>/afs/.abc.com</em>).
For further discussion of the concept of read/write and read-only paths through the filespace,
see <a href="./DESCRIPTION.html" class="podlinkpod"
>DESCRIPTION</a>.</p>

<dt><a name="-vol_&#60;volume_name&#62;"
><b>-vol</b> &#60;<i>volume name</i>&#62;</a></dt>

<dd>
<p>Specifies the name or volume ID number of the volume to mount.
If appropriate,
add the <code>.readonly</code> or <code>.backup</code> extension to the name,
or specify the appropriate volume ID number.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which the volume resides (creates a cellular mount point).
Provide the fully qualified domain name,
or a shortened form that disambiguates it from the other cells listed in the local <em>/usr/vice/etc/CellServDB</em> file.</p>

<p>If this argument is omitted,
no cell indicator appears in the mount point.
When the Cache Manager interprets it,
it assumes that the volume named in the mount point resides in the same cell as the volume that houses the mount point.</p>

<dt><a name="-rw"
><b>-rw</b></a></dt>

<dd>
<p>Creates a read/write mount point.
Omit this flag to create a regular mount point.</p>

<dt><a name="-fast"
><b>-fast</b></a></dt>

<dd>
<p>Prevents the Volume Location (VL) Server from checking that the volume has a VLDB entry and printing a warning message if it does not.
Whether or not this flag is included,
the File Server creates the mount point even when the volume has no VLDB entry.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command creates a regular mount point,
mounting the volume <code>user.smith</code> at <em>/afs/abc.com/usr/smith</em>:</p>

<pre>   % cd /afs/abc.com/usr
   % fs mkmount -dir smith -vol user.smith</pre>

<p>The following commands create a read/write mount point and a regular mount point for the ABC Corporation cell&#39;s <code>root.cell</code> volume in that cell&#39;s file tree. The second command follows the convention of putting a period at the beginning of the read/write mount point&#39;s name.</p>

<pre>   % fs mkmount -dir /afs/abc.com -vol root.cell
   % fs mkmount -dir /afs/.abc.com -vol root.cell -rw</pre>

<p>The following command mounts the State University cell&#39;s <code>root.cell</code> volume in the ABC Corporation cell&#39;s file tree, creating a regular cellular mount point called <em>/afs/stateu.edu</em>. When a ABC Corporation Cache Manager encounters this mount point, it crosses into the State University cell on a read-only path.</p>

<pre>   % fs mkmount -dir /afs/stateu.edu -vol root.cell -c stateu.edu</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must have the <code>i</code> (insert) and <code>a</code> (administer) permissions on the ACL of the directory that is to house the mount point.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/CellServDB.html" class="podlinkman"
>CellServDB(5)</a>, <a href="../1/fs_lsmount.html" class="podlinkpod"
>fs_lsmount(1)</a>, <a href="../1/fs_rmmount.html" class="podlinkpod"
>fs_rmmount(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
