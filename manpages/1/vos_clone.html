<html><head><title>vos_clone</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Mon Jul 14 01:56:34 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>vos_clone - Creates a shared-space copy of a volume on a partition</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>vos clone</b> [<b>-id</b>]&#160;&#60;<i>volume&#160;name&#160;or&#160;ID</i>&#62; [<b>-server</b>]&#160;&#60;<i>server&#160;name</i>&#62; [<b>-partition</b>]&#160;&#60;<i>partition&#160;name</i>&#62; [<b>-toname</b>&#160;&#60;<i>volume&#160;name&#160;on&#160;destination</i>&#62;] [<b>-toid</b>&#160;&#60;<i>volume&#160;ID&#160;on&#160;destination</i>&#62;] [<b>-offline</b>] [<b>-readonly</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-verbose</b>] [<b>-encrypt</b>] [<b>-help</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>vos clone</b> command creates a copy-on-write copy of a volume on the same partition and server ass the parent volume.</p>

<p>A clone is a copy of a volume that does only stores the changes from the parent volume.
Cloning is a primitive operation that is used by the <b>vos move</b>,
<b>vos backup</b>,
and <b>vos release</b> commands.
A clone functions using the same mechanism as a backup volume,
but it is persistent.
Clone volumes can be used as point-in-time copies of the parent vollume,
but they must be used with care.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>This command is not used during normal OpenAFS administration and may have adverse effects on the VLDB if not used properly!
This command should only be used by an expert.</p>

<p>Deleting or moving the parent volume makes the clone volume inaccessible,
but the clone volume remains in the VLDB and on disk,
and it needs to be cleaned up manually.</p>

<p>There is a maximum limitation of 7 clones when using the namei fileserver.
You may safely create up to 4 clones using the <b>vos clone</b> command.
The other three clone slots are used by the backup volume,
a read-only replica and the temporary clone that is created when executing a <b>vos move</b>,
<b>vos dump</b>,
or other <b>vos</b> commands.</p>

<p>Some commands do not work properly on clone volumes.
<b>vos move</b> is one such command.</p>

<p>Currently,
the maximum size of a volume is 2 terabytes (2^31 bytes).</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="[-id]_&#60;volume_name_or_ID&#62;"
>[<b>-id</b>] &#60;<i>volume name or ID</i>&#62;</a></dt>

<dd>
<p>Specifies either the complete name or volume ID number of a read/write volume.</p>

<dt><a name="[-server]_&#60;machine_name&#62;"
>[<b>-server</b>] &#60;<i>machine name</i>&#62;</a></dt>

<dd>
<p>Identifies the file server machine where the source volume resides.
Provide the machine&#39;s IP address or its host name (either fully qualified or using an unambiguous abbreviation).
For details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="[-partition]_&#60;partition_name&#62;"
>[<b>-partition</b>] &#60;<i>partition name</i>&#62;</a></dt>

<dd>
<p>Names the partition where the source volume resides.
Provide the full partition name (for,
example,
<b>/vicepa</b>) or one of the abbreviated forms described in <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-toname_&#60;volume_name_for_new_copy&#62;"
><b>-toname</b> &#60;<i>volume name for new copy</i>&#62;</a></dt>

<dd>
<p>The complete name of the new volume to create.</p>

<dt><a name="-toid_&#60;volume_id_for_new_copy&#62;"
><b>-toid</b> &#60;<i>volume id for new copy</i>&#62;</a></dt>

<dd>
<p>The complete id of the new volume to create.</p>

<dt><a name="-offline"
><b>-offline</b></a></dt>

<dd>
<p>Leaves the new volume flagged as off-line in the volume database.</p>

<dt><a name="-readonly"
><b>-readonly</b></a></dt>

<dd>
<p>Flags the new volume as read-only in the volume database.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
Do not combine this flag with the <b>-localauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>vos</b> command interpreter presents it to the Volume Server and Volume Location Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag.
For more details,
see <a href="../1/vos.html" class="podlinkman"
>vos(1)</a>.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Produces on the standard output stream a detailed trace of the command&#39;s execution.
If this argument is omitted,
only warnings and error messages appear.</p>

<dt><a name="-encrypt"
><b>-encrypt</b></a></dt>

<dd>
<p>Encrypts the command so that the operation&#39;s results are not transmitted across the network in clear text.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>This command has no output unless <code>-verbose</code> is specified or there is an error.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machines specified with the <b>-toserver</b> and <b>-fromserver</b> arguments and on each database server machine.
If the <b>-localauth</b> flag is included,
the issuer must instead be logged on to a server machine as the local superuser <code>root</code>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/vos.html" class="podlinkman"
>vos(1)</a>,
<a href="../1/vos_backup.html" class="podlinkpod"
>vos_backup(1)</a>,
<a href="../1/vos_copy.html" class="podlinkpod"
>vos_copy(1)</a>,
<a href="../1/vos_move.html" class="podlinkpod"
>vos_move(1)</a>,
<a href="../1/vos_shadow.html" class="podlinkpod"
>vos_shadow(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>Copyright 2008 Jason Edgecombe &#60;jason@rampaginggeek.com&#62;</p>

<p>This documentation is covered by the BSD License as written in the doc/LICENSE file.
This man page was written by Jason Edgecombe for OpenAFS.</p>

<!-- end doc -->

</body></html>
