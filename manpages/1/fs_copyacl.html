<html><head><title>fs_copyacl</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:23 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>fs_copyacl - Copies an ACL from a directory to one or more other directories</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>fs copyacl</b> <b>-fromdir</b>&#160;&#60;<i>source&#160;directory&#160;(or&#160;DFS&#160;file)</i>&#62; <b>-todir</b>&#160;&#60;<i>destination&#160;directory&#160;(or&#160;DFS&#160;file)</i>&#62;+ [<b>-clear</b>] [<b>-id</b>] [<b>-if</b>] [-help]</p>

<p><b>fs co</b> <b>-f</b>&#160;&#60;<i>source&#160;directory&#160;(or&#160;DFS&#160;file)</i>&#62; <b>-t</b>&#160;&#60;<i>destination&#160;directory&#160;(or&#160;DFS&#160;file)</i>&#62;+ [<b>-c</b>] [<b>-id</b>] [<b>-if</b>] [-h]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The fs copyacl command copies the access control list (ACL) from a source directory to each specified destination directory.
The source directory&#39;s ACL is unchanged,
and changes to the destination directory&#39;s ACL obey the following rules:</p>

<ul><li><p>If an entry on the source ACL does not already exist on the destination ACL,
it is added.</p></li><li><p>If an entry exists on both the source and destination ACLs,
the permissions from the source ACL entry replace the current permissions on the destination ACL entry.</p></li><li><p>If an entry on the destination ACL has no corresponding entry on the source ACL,
it is removed if the <b>-clear</b> flag is included and is unchanged otherwise.
In other words,
if the <b>-clear</b> flag is provided,
the source ACL completely replaces the destination ACL.</p></li></ul>

<p>When using this command to copy ACLs between objects in DFS filespace accessed via the AFS/DFS Migration Toolkit Protocol Translator,
it is possible to specify files,
as well as directories,
with the <b>-fromdir</b> and <b>-todir</b> arguments.
For more information on copying ACLs between DFS directories and files,
refer to the <i>IBM AFS/DFS Migration Toolkit Administration Guide and Reference</i>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Do not copy ACLs between AFS and DFS files or directories.
The ACL formats are incompatible.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-fromdir_&#60;source_directory&#62;"
><b>-fromdir</b> &#60;<i>source directory</i>&#62;</a></dt>

<dd>
<p>Specifies the source directory from which to copy the ACL.
(Specifying an AFS file copies its directory&#39;s ACL,
but specifying a DFS file copies its own ACL.) A partial pathname is interpreted relative to the current working directory.</p>

<dt><a name="-todir_&#60;destination_directory&#62;"
><b>-todir</b> &#60;<i>destination directory</i>&#62;</a></dt>

<dd>
<p>Specifies each directory for which to alter the ACL to match the source ACL.
(Specifying an AFS file halts the command with an error,
but specifying a DFS file alters the file&#39;s ACL).
A partial pathname is interpreted relative to the current working directory.</p>

<p>Specify the read/write path to each directory (or DFS file),
to avoid the failure that results from attempting to change a read-only volume.
By convention,
the read/write path is indicated by placing a period before the cell name at the pathname&#39;s second level (for example,
<code>/afs/.abc.com</code>).
For further discussion of the concept of read/write and read-only paths through the filespace,
see the <b>fs mkmount</b> reference page.</p>

<dt><a name="-clear"
><b>-clear</b></a></dt>

<dd>
<p>Replaces the ACL of each destination directory with the source ACL.</p>

<dt><a name="-id"
><b>-id</b></a></dt>

<dd>
<p>Modifies the Initial Container ACL of each DFS directory named by the <b>-todir</b> argument,
rather than the regular Object ACL.
This argument is supported only when both the source and each destination directory reside in DFS and are accessed via the AFS/DFS Migration Toolkit Protocol Translator.</p>

<dt><a name="-if"
><b>-if</b></a></dt>

<dd>
<p>Modifies the Initial Object ACL of each DFS directory named by the <b>-todir</b> argument,
rather than the regular Object ACL.
This argument is supported only when both the source and each destination directory reside in DFS and are accessed via the AFS/DFS Migration Toolkit Protocol Translator.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example command copies the current working directory&#39;s ACL to its subdirectory called <em>reports</em>.
Note that the source directory&#39;s ACL is unaffected.
Entries on the <em>reports</em> directory&#39;s that are not on the source ACL of the current directory remain unaffected as well,
because the <b>-clear</b> flag is not used.</p>

<pre>   % fs listacl . reports
   Access list for . is
   Normal rights:
      pat rlidwka
      smith rlidwk
   Access list for reports is
   Normal rights:
      pat rl
      pat:friends rl
   Negative rights
      jones rlidwka

   % fs copyacl -fromdir . -todir reports

   % fs listacl . reports
   Access list for . is
   Normal rights:
      pat rlidwka
      smith rlidwk
   Access list for reports is
   Normal rights:
      pat rlidwka
      pat:friends rl
      smith rlidwk
   Negative rights
      jones rlidwka</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>To copy an ACL between AFS objects, the issuer must have the <code>l</code> (lookup) permission on the source directory&#39;s ACL and the <code>a</code> (administer) permission on each destination directory&#39;s ACL. If the <b>-fromdir</b> argument names a file rather than a directory, the issuer must have both the <code>l</code> and <code>r</code> (read) permissions on the ACL of the file&#39;s directory.</p>

<p>To copy an ACL between DFS objects, the issuer must have the r permission on the source directory or file&#39;s ACL and the <code>c</code> (control) permission on each destination directory or file&#39;s ACL.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../1/fs_listacl.html" class="podlinkpod"
>fs_listacl(1)</a>, <a href="../1/fs_mkmount.html" class="podlinkpod"
>fs_mkmount(1)</a>, <a href="../1/fs_setacl.html" class="podlinkpod"
>fs_setacl(1)</a></p>

<p><i>IBM AFS/DFS Migration Toolkit Administration Guide and Reference</i></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
