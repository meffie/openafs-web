<html><head><title>backup_dumpinfo</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Tue Nov 11 07:45:48 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>backup_dumpinfo - Displays a dump record from the Backup Database</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>backup dumpinfo</b> [<b>-ndumps</b>&#160;&#60;<i>number&#160;of&#160;dumps</i>&#62;] [<b>-id</b>&#160;&#60;<i>dump&#160;id</i>&#62;] [<b>-verbose</b>] [<b>-localauth</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-help</b>]</p>

<p><b>backup dumpi</b> [<b>-n</b>&#160;&#60;<i>no.&#160;of&#160;dumps</i>&#62;] [-i &#60;<i>dump id</i>&#62;] [<b>-v</b>] [<b>-l</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>backup dumpinfo</b> command formats and displays the Backup Database record for the specified dumps.
To specify how many of the most recent dumps to display,
starting with the newest one and going back in time,
use the <b>-ndumps</b> argument.
To display more detailed information about a single dump,
use the <b>-id</b> argument.
To display the records for the 10 most recent dumps,
omit both the <b>-ndumps</b> and <b>-id</b> arguments.</p>

<p>The <b>-verbose</b> flag produces very detailed information that is useful mostly for debugging purposes.
It can be combined only with the <b>-id</b> argument.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-ndumps_&#60;number_of_dumps&#62;"
><b>-ndumps</b> &#60;<i>number of dumps</i>&#62;</a></dt>

<dd>
<p>Displays the Backup Database record for each of the specified number of dumps that were most recently performed.
If the database contains fewer dumps than are requested,
the output includes the records for all existing dumps.
Do not combine this argument with the <b>-id</b> or <b>-verbose</b> options; omit all options to display the records for the last 10 dumps.</p>

<dt><a name="-id_&#60;dump_id&#62;"
><b>-id</b> &#60;<i>dump id</i>&#62;</a></dt>

<dd>
<p>Specifies the dump ID number of a single dump for which to display the Backup Database record.
Precede the <i>dump id</i> value with the <b>-id</b> switch; otherwise,
the command interpreter interprets it as the value of the <b>-ndumps</b> argument.
Combine this argument with the <b>-verbose</b> flag,
but not with the <b>-ndumps</b> argument; omit all options to display the records for the last 10 dumps.</p>

<dt><a name="-verbose"
><b>-verbose</b></a></dt>

<dd>
<p>Provides more detailed information about the dump specified with the <b>-id</b> argument,
which must be provided along with it.
Do not combine this flag with the <b>-ndumps</b> argument.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>backup</b> command interpreter presents it to the Backup Server,
Volume Server and VL Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument.
For more details,
see <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>If the <b>-ndumps</b> argument is provided,
the output presents the following information in table form,
with a separate line for each dump:</p>

<dl>
<dt><a name="dumpid"
>dumpid</a></dt>

<dd>
<p>The dump ID number.</p>

<dt><a name="parentid"
>parentid</a></dt>

<dd>
<p>The dump ID number of the dump&#39;s parent dump.
A value of <code>0</code> (zero) identifies a full dump.</p>

<dt><a name="lv"
>lv</a></dt>

<dd>
<p>The depth in the dump hierarchy of the dump level used to create the dump.
A value of <code>0</code> (zero) identifies a full dump,
in which case the value in the <code>parentid</code> field is also <code>0</code>.
A value of <code>1</code> or greater indicates an incremental dump made at the corresponding level in the dump hierarchy.</p>

<dt><a name="created"
>created</a></dt>

<dd>
<p>The date and time at which the Backup System started the dump operation that created the dump.</p>

<dt><a name="nt"
>nt</a></dt>

<dd>
<p>The number of tapes that contain the data in the dump.
A value of <code>0</code> (zero) indicates that the dump operation was terminated or failed.
Use the <b>backup deletedump</b> command to remove such entries.</p>

<dt><a name="nvols"
>nvols</a></dt>

<dd>
<p>The number of volumes from which the dump includes data.
If a volume spans tapes,
it is counted twice.
A value of <code>0</code> (zero) indicates that the dump operation was terminated or failed; the value in the <code>nt</code> field is also <code>0</code> in this case.</p>

<dt><a name="dump_name"
>dump name</a></dt>

<dd>
<p>The dump name in the form</p>

<pre>   &#60;volume_set_name&#62;.&#60;dump_level_name&#62; (&#60;initial_dump_ID&#62;)</pre>

<p>where &#60;volume_set_name&#62; is the name of the volume set, and &#60;dump_level_name&#62; is the last element in the dump level pathname at which the volume set was dumped.</p>

<p>The &#60;initial_dump_ID&#62;, if displayed, is the dump ID of the initial dump in the dump set to which this dump belongs. If there is no value in parentheses, the dump is the initial dump in a dump set that has no appended dumps.</p>
</dd>
</dl>

<p>If the <b>-id</b> argument is provided alone, the first line of output begins with the string <code>Dump</code> and reports information for the entire dump in the following fields:</p>

<dl>
<dt><a name="id"
>id</a></dt>

<dd>
<p>The dump ID number.</p>

<dt><a name="level"
>level</a></dt>

<dd>
<p>The depth in the dump hierarchy of the dump level used to create the dump. A value of <code>0</code> (zero) identifies a full dump. A value of <code>1</code> (one) or greater indicates an incremental dump made at the specified level in the dump hierarchy.</p>

<dt><a name="volumes"
>volumes</a></dt>

<dd>
<p>The number of volumes for which the dump includes data.</p>

<dt><a name="created"
>created</a></dt>

<dd>
<p>The date and time at which the dump operation began.</p>
</dd>
</dl>

<p>If an XBSA server was the backup medium for the dump (rather than a tape device or backup data file), the following line appears next:</p>

<pre>   Backup Service: &#60;XBSA_program&#62;: Server: &#60;hostname&#62;</pre>

<p>where &#60;XBSA_program&#62; is the name of the XBSA-compliant program and &#60;hostname&#62; is the name of the machine on which the program runs.</p>

<p>Next the output includes an entry for each tape that houses volume data from the dump. Following the string <code>Tape</code>, the first two lines of each entry report information about that tape in the following fields:</p>

<dl>
<dt><a name="name"
>name</a></dt>

<dd>
<p>The tape&#39;s permanent name if it has one, or its AFS tape name otherwise, and its tape ID number in parentheses.</p>

<dt><a name="nVolumes"
>nVolumes</a></dt>

<dd>
<p>The number of volumes for which this tape includes dump data.</p>

<dt><a name="created"
>created</a></dt>

<dd>
<p>The date and time at which the Tape Coordinator began writing data to this tape.</p>
</dd>
</dl>

<p>Following another blank line, the tape-specific information concludes with a table that includes a line for each volume dump on the tape. The information appears in columns with the following headings:</p>

<dl>
<dt><a name="Pos"
>Pos</a></dt>

<dd>
<p>The relative position of each volume in this tape or file. On a tape, the counter begins at position 2 (the tape label occupies position 1), and increments by one for each volume. For volumes in a backup data file, the position numbers start with 1 and do not usually increment only by one, because each is the ordinal of the 16 KB offset in the file at which the volume&#39;s data begins. The difference between the position numbers therefore indicates how many 16 KB blocks each volume&#39;s data occupies. For example, if the second volume is at position 5 and the third volume in the list is at position 9, that means that the dump of the second volume occupies 64 KB (four 16-KB blocks) of space in the file.</p>

<dt><a name="Clone_time"
>Clone time</a></dt>

<dd>
<p>For a backup or read-only volume, the time at which it was cloned from its read/write source. For a Read/Write volume, it is the same as the dump creation date reported on the first line of the output.</p>

<dt><a name="Nbytes"
>Nbytes</a></dt>

<dd>
<p>The number of bytes of data in the dump of the volume.</p>

<dt><a name="Volume"
>Volume</a></dt>

<dd>
<p>The volume name, complete with <code>.backup</code> or <code>.readonly</code> extension if appropriate.</p>
</dd>
</dl>

<p>If both the <b>-id</b> and <b>-verbose</b> options are provided, the output is divided into several sections:</p>

<ul><li><p>The first section, headed by the underlined string <code>Dump</code>, includes information about the entire dump. The fields labeled <code>id</code>, <code>level</code>, <code>created</code>, and <code>nVolumes</code> report the same values (though in a different order) as appear on the first line of output when the <b>-id</b> argument is provided by itself. Other fields of potential interest to the backup operator are:
<dl>
<dt><a name="Group_id"
>Group id</a></dt>

<dd>
<p>The dump&#39;s <i>group ID number</i>, which is recorded in the dump&#39;s Backup Database record if the <code>GROUPID</code> instruction appears in the Tape Coordinator&#39;s <em>/usr/afs/backup/CFG_<i>tcid</i></em> file when the dump is created.</p>

<dt><a name="maxTapes"
>maxTapes</a></dt>

<dd>
<p>The number of tapes that contain the dump set to which this dump belongs.</p>

<dt><a name="Start_Tape_Seq"
>Start Tape Seq</a></dt>

<dd>
<p>The ordinal of the tape on which this dump begins in the set of tapes that contain the dump set.</p>
</dd>
</dl>
</p></li><li><p>For each tape that contains data from this dump, there follows a section headed by the underlined string <code>Tape</code>. The fields labeled <code>name</code>, <code>written</code>, and <code>nVolumes</code> report the same values (though in a different order) as appear on the second and third lines of output when the <b>-id</b> argument is provided by itself. Other fields of potential interest to the backup operator are:
<dl>
<dt><a name="expires"
>expires</a></dt>

<dd>
<p>The date and time when this tape can be recycled, because all dumps it contains have expired.</p>

<dt><a name="nMBytes_Data_and_nBytes_Data"
>nMBytes Data and nBytes Data</a></dt>

<dd>
<p>Summed together, these fields represent the total amount of dumped data actually from volumes (as opposed to labels, filemarks, and other markers).</p>

<dt><a name="KBytes_Tape_Used"
>KBytes Tape Used</a></dt>

<dd>
<p>The number of kilobytes of tape (or disk space, for a backup data file) used to store the dump data. It is generally larger than the sum of the values in the <code>nMBytes Data</code> and <code>nBytes Data</code> fields, because it includes the space required for the label, file marks and other markers, and because the Backup System writes data at 16 KB offsets, even if the data in a given block doesn&#39;t fill the entire 16 KB.</p>
</dd>
</dl>
</p></li><li><p>For each volume on a given tape, there follows a section headed by the underlined string <code>Volume</code>. The fields labeled <code>name</code>, <code>position</code>, <code>clone</code>, and <code>nBytes</code> report the same values (though in a different order) as appear in the table that lists the volumes in each tape when the <b>-id</b> argument is provided by itself. Other fields of potential interest to the backup operator are:
<dl>
<dt><a name="id"
>id</a></dt>

<dd>
<p>The volume ID.</p>

<dt><a name="tape"
>tape</a></dt>

<dd>
<p>The name of the tape containing this volume data.</p>
</dd>
</dl>
</p></li></ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following example displays information about the last five dumps:</p>

<pre>   % backup dumpinfo -ndumps 5
      dumpid   parentid lv created          nt nvols dump name
   924424000          0 0  04/18/1999 04:26  1    22 usr.sun (924424000)
   924685000  924424000 1  04/21/1999 04:56  1    62 usr.wed (924424000)
   924773000  924424000 1  04/22/1999 05:23  1    46 usr.thu (924424000)
   924860000  924424000 1  04/23/1999 05:33  1    58 usr.fri (924424000)
   925033000          0 0  04/25/1999 05:36  2    73 sys.week</pre>

<p>The following example displays a more detailed record for a single dump.</p>

<pre>   % backup dumpinfo -id 922097346
   Dump: id 922097346, level 0, volumes 1, created Mon Mar 22 05:09:06 1999
   Tape: name monday.user.backup (922097346)
   nVolumes 1, created 03/22/1999 05:09
    Pos       Clone time   Nbytes Volume
      1 03/22/1999 04:43 27787914 user.pat.backup</pre>

<p>The following example displays even more detailed information about the dump displayed in the previous example (dump ID 922097346). This example includes only one exemplar of each type of section (<code>Dump</code>, <code>Tape</code>, and <code>Volume</code>):</p>

<pre>   % backup dumpinfo -id 922097346 -verbose
   Dump
   ----
   id = 922097346
   Initial id = 0
   Appended id = 922099568
   parent = 0
   level = 0
   flags = 0x0
   volumeSet = user
   dump path = /monday1
   name = user.monday1
   created = Mon Mar 22 05:09:06 1999
   nVolumes = 1
   id  = 0
   tapeServer =
   format= user.monday1.%d
   maxTapes = 1
   Start Tape Seq = 1
   name = pat
   instance =
   cell =
   Tape
   ----
   tape name = monday.user.backup
   AFS tape name = user.monday1.1
   flags = 0x20
   written = Mon Mar 22 05:09:06 1999
   expires = NEVER
   kBytes Tape Used = 121
   nMBytes Data = 0
   nBytes  Data = 19092
   nFiles = 0
   nVolumes = 1
   seq = 1
   tapeid = 0
   useCount = 1
   dump = 922097346
   Volume
   ------
   name = user.pat.backup
   flags = 0x18
   id = 536871640
   server =
   partition = 0
   nFrags = 1
   position = 2
   clone = Mon Mar 22 04:43:06 1999
   startByte = 0
   nBytes = 19092
   seq = 0
   dump = 922097346
   tape = user.monday1.1</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on every machine where the Backup Server is running, or must be logged onto a server machine as the local superuser <code>root</code> if the <b>-localauth</b> flag is included.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/butc.html" class="podlinkman"
>butc(5)</a>, <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>, <a href="../8/backup_deletedump.html" class="podlinkpod"
>backup_deletedump(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
