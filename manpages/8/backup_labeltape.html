<html><head><title>backup_labeltape</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:30 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>backup_labeltape - Creates the magnetic label on a tape</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>backup labeltape</b> [<b>-name</b>&#160;&#60;<i>AFS&#160;tape&#160;name,&#160;defaults&#160;to&#160;NULL</i>&#62;] [<b>-size</b>&#160;&#60;<i>tape&#160;size&#160;in&#160;Kbytes,&#160;defaults&#160;to&#160;size&#160;in&#160;tapeconfig</i>&#62;] [<b>-portoffset</b>&#160;&#60;<i>TC&#160;port&#160;offset</i>&#62;] [<b>-pname</b>&#160;&#60;<i>permanent&#160;tape&#160;name</i>&#62;] [<b>-localauth</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-help</b>]</p>

<p><b>backup la</b> [<b>-n</b>&#160;&#60;<i>AFS&#160;tape&#160;name,&#160;defaults&#160;to&#160;NULL</i>&#62;] [<b>-s</b>&#160;&#60;<i>tape&#160;size&#160;in&#160;Kbytes,&#160;defaults&#160;to&#160;size&#160;in&#160;tapeconfig</i>&#62;] [<b>-po</b>&#160;&#60;<i>TC&#160;port&#160;offset</i>&#62;] [<b>-pn</b>&#160;&#60;<i>permanent&#160;tape&#160;name</i>&#62;] [<b>-l</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>backup labeltape</b> command creates a magnetic label,
readable by the Backup System,
at the beginning of a tape.
The label records the tape&#39;s name (either a <i>permanent name</i>,
or an <i>AFS tape name</i> that reflects the tape&#39;s contents in a prescribed format) and its capacity.</p>

<p>(If the <code>FILE YES</code> instruction appears in the <em>/usr/afs/backup/CFG_<i>device_name</i></em> file on the Tape Coordinator machine associated with the specified port offset,
then the <b>backup</b> command writes label information to the first 16 KB block in the backup data file listed for that port offset in the Tape Coordinator&#39;s <em>/usr/afs/backup/tapeconfig</em> file,
rather than at the beginning of a tape.
For the sake of clarity,
the following text refers to tapes only,
but the Backup System handles backup data files in much the same way.)</p>

<p>Relabeling a tape that already contains AFS backup data effectively makes the data unusable,
because the command removes the Backup Database record of the complete dump set of which the tape is a part.
Use this command to enable recycling of a tape that contains unexpired dumps that are not actually still needed.</p>

<p>To write a permanent name on the label,
include the <b>-pname</b> argument to specify a string of up to 32 characters.
The permanent name persists until the <b>-pname</b> argument is again included on the <b>backup labeltape</b> command,
regardless of the tape&#39;s contents and of how often the tape is otherwise relabeled or recycled.
Include this argument or the <b>-name</b> argument,
but not both.
If this argument is included,
the AFS tape name is set to <code>&#60;NULL&#62;</code>.
The permanent name is set to <code>&#60;NULL&#62;</code> if this argument is omitted and no permanent name already exists.</p>

<p>The issuer must ensure that a permanent name is unique among the tapes used for AFS backup in the cell,
because the <b>backup</b> command interpreter does not verify that another tape does not already have the same permanent name.
When a tape has a permanent name,
the Backup System uses it instead of the AFS tape name in most prompts and when referring to the tape in output from <b>backup</b> commands.
The permanent name appears in the <code>tape name</code> field of the output from the <b>backup readlabel</b> command.</p>

<p>To write an AFS tape name on the label,
provide a value for the <b>-name</b> argument in the required format described in <a href="./OPTIONS.html" class="podlinkpod"
>OPTIONS</a>.
Include the <b>-name</b> argument or the <b>-pname</b> argument,
but not both.
If this argument is omitted,
the AFS tape name is set to <code>&#60;NULL&#62;</code>,
but the Backup System automatically assigns the appropriate name when the tape is used in a future <b>backup dump</b> or <b>backup savedb</b> operation.
The AFS tape name appears in the <code>AFS tape name</code> field of the output from the <b>backup readlabel</b> and <b>backup scantape</b> commands.</p>

<p>The backup command interpreter does not accept the <b>-name</b> argument if the tape already has a permanent name.
To erase a tape&#39;s permanent name,
provide a null value to the <b>-pname</b> argument by issuing the following command:</p>

<pre>   % backup labeltape -pname &#34;&#34;</pre>

<p>To record the tape&#39;s capacity on the label, specify a number of kilobytes as the <b>-size</b> argument. If the argument is omitted the first time a tape is labeled, the Backup System records the default tape capacity recorded for the specified port offset in the <em>/usr/afs/backup/tapeconfig</em> file on the Tape Coordinator machine. Subsequently, the value in the size field persists until the <b>-size</b> argument is again included on the <b>backup labeltape</b> command.</p>

<p>To determine how much data can be written to a tape during a backup dump or <b>backup savedb</b> operation, the Tape Coordinator reads the capacity recorded on the tape&#39;s label (or uses the value associated with its port offset in the <em>/usr/afs/backup/tapeconfig</em> file, if the tape was never labeled). For further description, see the <b>backup dump</b> reference page.</p>

<p>The Tape Coordinator&#39;s default response to this command is to access the tape by invoking the <code>MOUNT</code> instruction in the local <em>/usr/afs/backup/CFG_<i>device_name</i></em> file, or by prompting the backup operator to insert the tape if there is no <code>MOUNT</code> instruction. However, if the <code>AUTOQUERY NO</code> instruction appears in the <em>CFG_<i>device_name</i></em> file, or if the issuer of the <b>butc</b> command included the <b>-noautoquery</b> flag, the Tape Coordinator instead expects the tape to be in the device already. If it is not, the Tape Coordinator invokes the <code>MOUNT</code> instruction or prompts the operator.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-name_&#60;AFS_tape_name&#62;"
><b>-name</b> &#60;<i>AFS tape name</i>&#62;</a></dt>

<dd>
<p>Specifies the AFS tape name to record on the label. Include this argument or the <b>-pname</b> argument, but not both. If this argument is omitted, the AFS tape name is set to <code>&#60;NULL&#62;</code>. If this argument is provided, it must have the following format:</p>

<pre>   &#60;volume_set_name&#62;.&#60;dump_level_name&#62;.&#60;tape_index&#62;</pre>

<p>for the tape to be acceptable for use in a future backup dump operation. The &#60;volume_set_name&#62; must match the volume set name of the initial dump to be written to the tape, &#60;dump_level_name&#62; must match the last element of the dump level pathname at which the volume set will be dumped, and &#60;tape_index&#62; indicates the order of the tape in the dump set (indexing begins with <code>1</code>). To disable this type of name checking, include the <code>NAME_CHECK NO</code> instruction in the <em>CFG_<i>device_name</i></em> file.</p>

<p>For the tape to be acceptable for use in a future backup savedb operation, the value specified for the <b>-name</b> argument must have the following format:</p>

<pre>   Ubik_db_dump.&#60;tape_index&#62;</pre>

<p>where &#60;tape_index&#62; indicates the order of the tape in the set of tapes that house the Backup Database dump; indexing begins with <code>1</code> (one).</p>

<dt><a name="-size_&#60;tape_size&#62;"
><b>-size</b> &#60;<i>tape size</i>&#62;</a></dt>

<dd>
<p>Specifies the tape capacity to record on the label. Provide an integer value followed by a letter that indicates units, with no intervening space. A unit value of <code>k</code> or <code>K</code> indicates kilobytes, <code>m</code> or <code>M</code> indicates megabytes, and <code>g</code> or <code>G</code> indicates gigabytes. If the units letter is omitted, the default is kilobytes.</p>

<p>If this argument is omitted the first time a tape is labeled, the Backup System records the capacity that is associated with the specified port offset in the <em>/usr/afs/backup/tapeconfig</em> file on the Tape Coordinator machine. The value recorded the first time then persists until the <b>-size</b> argument is provided on a future issuance of the command.</p>

<dt><a name="-portoffset_&#60;TC_port_offset&#62;"
><b>-portoffset</b> &#60;<i>TC port offset</i>&#62;</a></dt>

<dd>
<p>Specifies the port offset number of the Tape Coordinator handling the tape for this operation.</p>

<dt><a name="-pname_&#60;permanent_tape_name&#62;"
><b>-pname</b> &#60;<i>permanent tape name</i>&#62;</a></dt>

<dd>
<p>Specifies the permanent name to record on the label. It can be up to 32 characters in length, and include any alphanumeric characters. Avoid metacharacters that have a special meaning to the shell, to avoid having to mark them as literal in commands issued at the shell prompt.</p>

<p>Include this argument or the <b>-name</b> argument, but not both. If this argument is provided, the AFS tape name is set to <code>&#60;NULL&#62;</code>. If this argument is omitted, any existing permanent name is retained.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file. The <b>backup</b> command interpreter presents it to the Backup Server, Volume Server and VL Server during mutual authentication. Do not combine this flag with the <b>-cell</b> argument. For more details, see <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command. Do not combine this argument with the <b>-localauth</b> flag. For more details, see <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command. All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command records the AFS tape name <code>user.monthly.1</code> on the label of the tape in the device with port offset 3:</p>

<pre>   % backup labeltape -name user.monthly.1 -portoffset 3</pre>

<p>The following three commands are equivalent in effect: they all record a capacity of 2 GB on the label of the tape in the device with port offset 4. They set the AFS tape name to <code>&#60;NULL&#62;</code> and leave the permanent name unchanged.</p>

<pre>   % backup labeltape -size 2g -portoffset 4
   % backup labeltape -size 2048M -portoffset 4
   % backup labeltape -size 2097152 -portoffset 4</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on every machine where the Backup Server is running, or must be logged onto a server machine as the local superuser <code>root</code> if the <b>-localauth</b> flag is included.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/butc.html" class="podlinkman"
>butc(5)</a>, <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>, <a href="../8/backup_readlabel.html" class="podlinkpod"
>backup_readlabel(8)</a>, <a href="../8/butc.html" class="podlinkman"
>butc(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
