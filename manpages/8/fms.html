<html><head><title>fms</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Wed Jul 16 06:02:03 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>fms - Determine a tape&#39;s capacity and a tape device&#39;s filemark size</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>fms</b> <b>-tape</b>&#160;&#60;<i>tape&#160;special&#160;file</i>&#62; [<b>-help</b>]</p>

<p><b>fms</b> <b>-t</b>&#160;&#60;<i>tape&#160;special&#160;file</i>&#62; [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>fms</b> command determines the capacity of the tape currently in the tape device identified by the <b>-tape</b> argument,
along with the size of the filemark for the device.
The filemark is also referred to as the device&#39;s end-of-file (EOF) marker,
and can differ for each combination of tape and tape device.</p>

<p>As the Tape Coordinator writes a dump,
it writes a filemark between the data included from each volume and also tracks the amount of space left before the end of the tape (EOT).
For some tape devices,
the filemark is large enough (multiple megabytes) that failure to consider it leads the Tape Coordinator significantly to overestimate the available space.</p>

<p>The intended use of this command is to determine tape capacity and filemark size values that can be specified in a tape device&#39;s entry in the <em>/usr/afs/backup/tapeconfig</em> file.
For certain types of tape drives,
the Tape Coordinator operates more efficiently when the <em>tapeconfig</em> file lists accurate values.
For further discussion,
see the <i>IBM AFS Administration Guide</i> chapter on configuring the Backup System.</p>

<p>Insert a tape in the drive before issuing this command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>Do not use this command on compressing tape devices in compression mode or with tape devices that handle tapes of multigigabyte (or multiterabyte) capacity.
It does not produce accurate results in those cases.
For alternate suggestions on the values to record in the <b>tapeconfig</b> file for compressing drives,
see the <i>IBM AFS Administration Guide</i> chapter on configuring the Backup System.</p>

<p>Running the command completely overwrites the tape,
so use a blank one or one that can be recycled.</p>

<p>Because it writes filemarks to the complete length of the tape,
the command can take from several hours to more than a day to complete.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-tape_&#60;tape_special_file&#62;"
><b>-tape</b> &#60;<i>tape special file</i>&#62;</a></dt>

<dd>
<p>Specifies the UNIX device name of the tape device for which to determine filemark size and the capacity of the tape it currently contains.
The format varies on different system types,
but usually begins with <em>/dev</em>; an example is <em>/dev/sd0a</em>.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>The command generates output both on the standard output stream and in the <em>fms.log</em> file that it creates in the current working directory.
The output reports the capacity of the tape in the device and the device&#39;s filemark size.</p>

<p>The first few lines of output include status information about the execution of the command,
including such information as the number of blocks and the number of file marks written to the tape by the command.
The last two lines of both screen and file output provide the following information:</p>

<ul><li><p><code>Tape capacity is <i>number</i> bytes</code>: specifies the size,
in bytes,
of the tape in the device.</p></li><li><p><code>File marks are <i>number</i> bytes</code>: specifies the device&#39;s filemark size in bytes.</p></li></ul>

<p>The following message indicates that the fms command interpreter cannot access the tape device.
The command halts.</p>

<pre>   Can&#39;t open tape drive I&#60;device&#62;</pre>

<p>The following message indicates that the command interpreter cannot create the <em>fms.log</em> log file. Again, the command halts.</p>

<pre>   Can&#39;t open log file</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command illustrates the output for the device called <em>/dev/rmt1h</em>:</p>

<pre>   % fms /dev/rmt1h
   wrote block: 130408
   Finished data capacity test - rewinding
   wrote 1109 blocks, 1109 file marks
   Finished file mark test
   Tape capacity is 2136604672 bytes
   File marks are 1910205 bytes</pre>

<p>The following appears in the <em>fms.log</em> file:</p>

<pre>   fms test started
   wrote 9230 blocks
   Finished file mark test
   Tape capacity is 151224320 bytes
   File marks are 2375680 bytes</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be able to insert and write to files in the currently working directory, if the <em>fms.log</em> file does not already exist. If it already exists, the issuer need only be able to write to it.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/fms.log.html" class="podlinkpod"
>fms.log(5)</a>, <a href="../5/tapeconfig.html" class="podlinkman"
>tapeconfig(5)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
