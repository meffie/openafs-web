<html><head><title>backup_deletedump</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Fri Jun 27 16:26:06 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>backup_deletedump - Deletes one or more dump records from the Backup Database</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>backup deletedump</b> [<b>-dumpid</b>&#160;&#60;<i>dump&#160;id</i>&#62;+] [<b>-from</b>&#160;&#60;<i>date&#160;time</i>&#62;+] [<b>-to</b>&#160;&#60;<i>date&#160;time</i>&#62;+] [<b>-localauth</b>] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-help</b>]</p>

<p><b>backup dele</b> [<b>-d</b>&#160;&#60;<i>dump&#160;id</i>&#62;+] [<b>-f</b>&#160;&#60;<i>date&#160;time</i>&#62;+] [-t &#60;<i>date time</i>&#62;+] [<b>-l</b>] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>backup deletedump</b> command deletes one or more dump records from the Backup Database.
Either use the <b>-dumpid</b> argument to specify the dump ID number of one or more dumps,
or use the <b>-from</b> and <b>-to</b> arguments to delete the records for all regular dumps created during the time period bracketed by the specified values.</p>

<p>Use this command to remove dump records that are incorrect (possibly because a dump operation was interrupted or failed),
or that correspond to dumps that are expired or otherwise no longer needed.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>The only way to remove the dump record for an appended dump is to remove the record for its initial dump,
and doing so removes the records for all of the initial dump&#39;s associated appended dumps.</p>

<p>The only way to remove the record for a Backup Database dump (created with the <b>backup savedb</b> command) is to specify its dump ID number with the <b>-dumpid</b> argument.
Using the <b>-from</b> and <b>-to</b> arguments never removes database dump records.</p>

<p>Removing records of a dump makes it impossible to restore data from the corresponding tapes or from any dump that refers to the deleted dump as its parent,
directly or indirectly.
That is,
restore operations must begin with the full dump and continue with each incremental dump in order.
If the records for a specific dump are removed,
it is not possible to restore data from later incremental dumps unless the deleted records are restored by running the <b>backup scantape</b> command with the <b>-dbadd</b> flag.</p>

<p>If a dump set contains any dumps that were created outside the time range specified by the <b>-from</b> and <b>-to</b> arguments,
the command does not delete any of the records associated with the dump set,
even if some of them represent dumps created during the time range.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-dumpid_&#60;dump_id&#62;+"
><b>-dumpid</b> &#60;<i>dump id</i>&#62;+</a></dt>

<dd>
<p>Specifies the dump ID of each dump record to delete.
The corresponding dumps must be initial dumps; it is not possible to delete appended dump records directly,
but only by deleting the record of their associated initial dump.
Using this argument is the only way to delete records of Backup Database dumps (created with the <b>backup savedb</b> command).</p>

<p>Provide either this argument or the <b>-to</b> (and optionally <b>-from</b>) argument.</p>

<dt><a name="-from_&#60;date_time&#62;+"
><b>-from</b> &#60;<i>date time</i>&#62;+</a></dt>

<dd>
<p>Specifies the beginning of a range of dates; the record for any dump created during the indicated period of time is deleted.</p>

<p>Omit this argument to indicate the default of midnight (00:00 hours) on 1 January 1970 (UNIX time zero),
or provide a date value in the format <i>mm/dd/yyyy</i> [<i>hh:MM</i>].
The month (<i>mm</i>),
day (<i>dd</i>),
and year (<i>yyyy</i>) are required.
The hour and minutes (<i>hh:MM</i>) are optional,
but if provided must be in 24-hour format (for example,
the value <code>14:36</code> represents 2:36 p.m.).
If omitted,
the time defaults to midnight (00:00 hours).</p>

<p>The <b>-to</b> argument must be provided along with this one.</p>

<dt><a name="-to_&#60;date_time&#62;+"
><b>-to</b> &#60;<i>date time</i>&#62;+</a></dt>

<dd>
<p>Specifies the end of a range of dates; the record of any dump created during the range is deleted from the Backup Database.</p>

<p>Provide either the value <code>NOW</code> to indicate the current date and time,
or a date value in the same format as for the <b>-from</b> argument.
Valid values for the year (<i>yyyy</i>) range from <code>1970</code> to <code>2037</code>; higher values are not valid because the latest possible date in the standard UNIX representation is in February 2038.
The command interpreter automatically reduces any later date to the maximum value.</p>

<p>If the time portion (<i>hh:MM</i>) is omitted,
it defaults to 59 seconds after midnight (00:00:59 hours).
Similarly,
the <b>backup</b> command interpreter automatically adds 59 seconds to any time value provided.
In both cases,
adding 59 seconds compensates for how the Backup Database and <b>backup dumpinfo</b> command represent dump creation times in hours and minutes only.
For example,
the Database records a creation timestamp of <code>20:55</code> for any dump operation that begins between 20:55:00 and 20:55:59.
Automatically adding 59 seconds to a time thus includes the records for all dumps created during that minute.</p>

<p>Provide either this argument,
or the <b>-dumpid</b> argument.
This argument is required if the <b>-from</b> argument is provided.</p>

<p><b>Caution:</b> Specifying the value <code>NOW</code> for this argument when the <b>-from</b> argument is omitted deletes all dump records from the Backup Database (except for Backup Database dump records created with the <b>backup savedb</b> command).</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>backup</b> command interpreter presents it to the Backup Server,
Volume Server and VL Server during mutual authentication.
Do not combine this flag with the <b>-cell</b> argument.
For more details,
see <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
Do not combine this argument with the <b>-localauth</b> flag.
For more details,
see <a href="../8/backup.html" class="podlinkman"
>backup(8)</a>.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>At the conclusion of processing,
the output lists the dump IDs of all dump records deleted in the following format:</p>

<pre>   The following dumps were deleted:
        dump ID 1
        dump ID 2
        etc.</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command deletes the dump record with dump ID 653777462, and for any appended dumps associated with it:</p>

<pre>   % backup deletedump -dumpid 653777462
   The following dumps were deleted:
        653777462</pre>

<p>The following command deletes the Backup Database record of all dumps created between midnight on 1 January 1997 and 23:59:59 hours on 31 December 1997:</p>

<pre>   % backup deletedump -from 01/01/1997 -to 12/31/1997
   The following dumps were deleted:
        598324045
        598346873
           ...
           ...
        653777523
        653779648</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on every machine where the Backup Server is running, or must be logged onto a server machine as the local superuser <code>root</code> if the <b>-localauth</b> flag is included.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../8/backup.html" class="podlinkman"
>backup(8)</a>, <a href="../8/backup_dumpinfo.html" class="podlinkpod"
>backup_dumpinfo(8)</a>, <a href="../8/backup_scantape.html" class="podlinkpod"
>backup_scantape(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
