<html><head><title>butc</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:33 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>butc - Initializes the Tape Coordinator process</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>butc</b> [<b>-port</b>&#160;&#60;<i>port&#160;offset</i>&#62;] [<b>-debuglevel</b>&#160;(0&#160;|&#160;1&#160;|&#160;2)] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noautoquery</b>] [<b>-localauth</b>] [<b>-help</b>]</p>

<p><b>butc</b> [<b>-p</b>&#160;&#60;<i>port&#160;offset</i>&#62;] [<b>-d</b>&#160;(0&#160;|&#160;1&#160;|&#160;2)] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>butc</b> command initializes a Tape Coordinator process on a Tape Coordinator machine,
enabling an operator to direct Backup System requests to the associated tape device or backup data file.
(The Tape Coordinator controls a backup data file if the <code>FILE YES</code> instruction appears in the <em>/usr/afs/backup/CFG_<i>device_name</i></em> file that corresponds to the Tape Coordinator&#39;s entry in the <em>/usr/afs/backup/tapeconfig</em> file.
For the sake of simplicity,
the following discusses tape devices only.)</p>

<p>It is conventional to start and run the Tape Coordinator in the foreground.
In this case,
it runs on its own connection,
which is unavailable for any other use and must remain open the entire time the Tape Coordinator is to accept backup requests and while it is executing them.
(When using a window manager,
the connection corresponds to a separate command shell window.) The Tape Coordinator can run in the background if the <em>CFG_<i>device_name</i></em> file is configured to eliminate any need for the Tape Coordinator to prompt the operator.
In both the foreground and background,
the Tape Coordinator writes operation traces and other output to the standard output stream on the connection over which it was started.
Use the <b>-debuglevel</b> argument to control the amount of information that appears.
The Tape Coordinator also writes traces and error messages to two files in the local <em>/usr/afs/backup</em> directory:</p>

<ul><li><p>The <em>TE_<i>device_name</i></em> file records problems that the Tape Coordinator encounters as it executes backup operations.</p></li><li><p>The <em>TL_<i>device_name</i></em> file records a trace of operations as well as the same errors written to the <em>TE_<i>device_name</i></em> file.</p></li></ul>

<p>The Tape Coordinator creates the files automatically as it initializes.
If there are existing files,
the Tape Coordinator renames them with a <code>.old</code> extension,
overwriting the existing <code>.old</code> files if they exist.
It derives the <i>device_name</i> part of the file names by stripping off the device name&#39;s <em>/dev/</em> prefix and replacing any other slashes with underscores.
For example,
the files are called <em>TE_rmt_4m</em> and <em>TL_rmt_4m</em> for a device called <em>/dev/rmt/4m</em>.</p>

<p>By default,
at the beginning of each operation the Tape Coordinator prompts for the operator to insert the first tape into the drive and press Return.
To suppress this prompt,
include the <b>-noautoquery</b> flag on the command line or the instruction <code>AUTOQUERY NO</code> in the <em>/usr/afs/backup/CFG_<i>device_name</i></em> file.
When the prompt is suppressed,
the first required tape must be in the drive before a <b>backup</b> command is issued.
For subsequent tapes,
the Tape Coordinator uses its normal tape acquisition routine: if the <em>/usr/afs/backup/CFG_<i>device_name</i></em> file includes a <code>MOUNT</code> instruction,
the Tape Coordinator invokes the indicated command; otherwise,
it prompts the operator for the next tape.</p>

<p>To stop the Tape Coordinator process,
enter an interrupt signal such as Ctrl-C over the dedicated connection (in the command shell window).</p>

<p>To cancel a backup operation that involves a tape before it begins (assuming the initial tape prompt has not been suppressed),
enter the letter <code>a</code> (for <code>abort</code>) and press Return at the Tape Coordinator&#39;s prompt for the first tape.</p>

<p>Tape Coordinator operation depends on the correct configuration of certain files,
as described in the following list:</p>

<ul><li><p>The local <em>/usr/afs/backup/tapeconfig</em> file must include an entry for the Tape Coordinator that specifies its device name and port offset number,
among other information; for details,
<a href="../5/tapeconfig.html" class="podlinkman"
>tapeconfig(5)</a>.</p></li><li><p>The port offset number recorded in the Tape Coordinator&#39;s entry in the Backup Database must match the one in the <em>tapeconfig</em> file.
Create the Backup Database entry by using the <b>backup addhost</b> command.</p></li><li><p>The optional <em>/usr/afs/backup/CFG_<i>device_name</i></em> file can contain instructions for mounting and unmounting tapes automatically (when using a tape stacker or jukebox,
for instance) or automating other aspects of the backup process.
The <i>device_name</i> part of the name is derived as described previously for the <em>TE_<i>device_name</i></em> and <em>TL_<i>device_name</i></em> files.</p></li></ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>If the Tape Coordinator machine is an AIX machine,
use the SMIT utility to set the device&#39;s block size to 0 (zero),
indicating variable block size.
Otherwise,
tape devices attached to machines running other operating systems sometimes cannot read tapes written on AIX machines.
For instructions,
see the <i>IBM AFS Administration Guide</i> chapter about configuring the Backup System.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-port_&#60;port_offset&#62;"
><b>-port</b> &#60;<i>port offset</i>&#62;</a></dt>

<dd>
<p>Specifies the port offset number of the Tape Coordinator to initialize.</p>

<dt><a name="-debuglevel"
><b>-debuglevel</b></a></dt>

<dd>
<p>Controls the amount and type of messages the Tape Coordinator displays on the standard output stream.
Provide one of three acceptable values:</p>

<ul><li><p><code>0</code> to display the minimum level of detail required to describe Tape Coordinator operations,
including prompts for tapes,
messages that indicate the beginning and end of operations,
and error messages.
This is the default value.</p></li><li><p><code>1</code> to display the names of the volumes being dumped or restored as well as the information displayed at level <code>0</code>.</p></li><li><p><code>2</code> to display all messages also being written to the <em>TL_<i>device_name</i></em> log file.</p></li></ul>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which the Tape Coordinator operates (the cell to which the file server machines that house affected volumes belong).
If this argument is omitted,
the Tape Coordinator runs in the local cell as defined in the local <em>/usr/vice/etc/ThisCell</em> file.
Do not combine this flag with the <b>-localauth</b> argument.</p>

<dt><a name="-noautoquery"
><b>-noautoquery</b></a></dt>

<dd>
<p>Suppresses the Tape Coordinator&#39;s prompt for insertion of the first tape needed for an operation.
The operator must insert the tape into the drive before issuing the <b>backup</b> command that initializes the operation.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using the server encryption key with the highest key version number in the local <em>/usr/afs/etc/KeyFile</em>.
The <b>butc</b> command interpreter presents the ticket,
which never expires,
to the Volume Server and Volume Location Server to use in mutual authentication.</p>

<p>Do not combine this argument with the <b>-cell</b> flag,
and use it only when logged on to a server machine as the local superuser <code>root</code>; client machines do not have <em>/usr/afs/etc/KeyFile</em> file.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command starts the Tape Coordinator with port offset <code>7</code> at debug level <code>1</code>,
meaning the Tape Coordinator reports the names of volumes it is dumping or restoring.</p>

<pre>   % butc -port 7 -debuglevel 1</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on every machine where the Backup Server or Volume Location (VL) Server is running, and on every file server machine that houses a volume to be backed up. If the <b>-localauth</b> flag is included, the issuer must instead be logged on to the Tape Coordinator machine as the local superuser <code>root</code>. In addition, the issuer must be able to read and write to the log and configuration files in the local <em>/usr/afs/backup</em> directory.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/KeyFile.html" class="podlinkman"
>KeyFile(5)</a>, <a href="../5/ThisCell.html" class="podlinkman"
>ThisCell(5)</a>, <a href="../5/UserList.html" class="podlinkman"
>UserList(5)</a>, <a href="../5/butc.html" class="podlinkman"
>butc(5)</a>, <a href="../5/butc_logs.html" class="podlinkpod"
>butc_logs(5)</a>, <a href="../5/tapeconfig.html" class="podlinkman"
>tapeconfig(5)</a>, <a href="../8/backup_addhost.html" class="podlinkpod"
>backup_addhost(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
