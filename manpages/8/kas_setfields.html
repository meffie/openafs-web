<html><head><title>kas_setfields</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by OpenAFS::HTML v1.1,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jul 12 06:02:34 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to OpenAFS::HTML, and/or subclassing OpenAFS::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of OpenAFS::HTML for advice.
   See 'perldoc OpenAFS::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>kas_setfields - Sets fields in an Authentication Database entry</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>kas setfields</b> <b>-name</b>&#160;&#60;<i>name&#160;of&#160;user</i>&#62; [<b>-flags</b>&#160;&#60;<i>hex&#160;flag&#160;value&#160;or&#160;flag&#160;name&#160;expression</i>&#62;] [<b>-expiration</b>&#160;&#60;<i>date&#160;of&#160;account&#160;expiration</i>&#62;] [<b>-lifetime</b>&#160;&#60;<i>maximum&#160;ticket&#160;lifetime</i>&#62;] [<b>-pwexpires</b>&#160;&#60;<i>number&#160;days&#160;password&#160;is&#160;valid&#160;([0..254])</i>&#62;] [<b>-reuse</b>&#160;&#60;<i>permit&#160;password&#160;reuse&#160;(yes/no)</i>&#62;] [<b>-attempts</b>&#160;&#60;<i>maximum&#160;successive&#160;failed&#160;login&#160;tries&#160;([0..254])</i>&#62;] [<b>-locktime</b>&#160;&#60;<i>failure&#160;penalty&#160;[hh:mm&#160;or&#160;minutes]</i>&#62;] [<b>-admin_username</b>&#160;&#60;<i>admin&#160;principal&#160;to&#160;use&#160;for&#160;authentication</i>&#62;] [<b>-password_for_admin</b>&#160;&#60;<i>admin&#160;password</i>&#62;] [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-servers</b>&#160;&#60;<i>explicit&#160;list&#160;of&#160;authentication&#160;servers</i>&#62;+] [<b>-noauth</b>] [<b>-help</b>]</p>

<p><b>kas setf</b> <b>-na</b>&#160;&#60;<i>name&#160;of&#160;user</i>&#62; [<b>-f</b>&#160;&#60;<i>hex&#160;flag&#160;value&#160;or&#160;flag&#160;name&#160;expression</i>&#62;] [<b>-e</b>&#160;&#60;<i>date&#160;of&#160;account&#160;expiration</i>&#62;] [<b>-li</b>&#160;&#60;<i>maximum&#160;ticket&#160;lifetime</i>&#62;] [<b>-pw</b>&#160;&#60;<i>number&#160;days&#160;password&#160;is&#160;valid&#160;([0..254])</i>&#62;] [<b>-r</b>&#160;&#60;<i>permit&#160;password&#160;reuse&#160;(yes/no)</i>&#62;] [<b>-at</b>&#160;&#60;<i>maximum&#160;successive&#160;failed&#160;login&#160;tries&#160;([0..254])</i>&#62;] [<b>-lo</b>&#160;&#60;<i>failure&#160;penalty&#160;[hh:mm&#160;or&#160;minutes]</i>&#62;] [<b>-ad</b>&#160;&#60;<i>admin&#160;principal&#160;to&#160;use&#160;for&#160;authentication</i>&#62;] [<b>-pa</b>&#160;&#60;<i>admin&#160;password</i>&#62;] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-s</b>&#160;&#60;<i>explicit&#160;list&#160;of&#160;authentication&#160;servers</i>&#62;+] [<b>-no</b>] [<b>-h</b>]</p>

<p><b>kas sf</b> <b>-na</b>&#160;&#60;<i>name&#160;of&#160;user</i>&#62; [<b>-f</b>&#160;&#60;<i>hex&#160;flag&#160;value&#160;or&#160;flag&#160;name&#160;expression</i>&#62;] [<b>-e</b>&#160;&#60;<i>date&#160;of&#160;account&#160;expiration</i>&#62;] [<b>-li</b>&#160;&#60;<i>maximum&#160;ticket&#160;lifetime</i>&#62;] [<b>-pw</b>&#160;&#60;<i>number&#160;days&#160;password&#160;is&#160;valid&#160;([0..254])</i>&#62;] [<b>-r</b>&#160;&#60;<i>permit&#160;password&#160;reuse&#160;(yes/no)</i>&#62;] [<b>-at</b>&#160;&#60;<i>maximum&#160;successive&#160;failed&#160;login&#160;tries&#160;([0..254])</i>&#62;] [<b>-lo</b>&#160;&#60;<i>failure&#160;penalty&#160;[hh:mm&#160;or&#160;minutes]</i>&#62;] [<b>-ad</b>&#160;&#60;<i>admin&#160;principal&#160;to&#160;use&#160;for&#160;authentication</i>&#62;] [<b>-pa</b>&#160;&#60;<i>admin&#160;password</i>&#62;] [<b>-c</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-s</b>&#160;&#60;<i>explicit&#160;list&#160;of&#160;authentication&#160;servers</i>&#62;+] [<b>-no</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>kas setfields</b> command changes the Authentication Database entry for the user named by the <b>-name</b> argument in the manner specified by the various optional arguments,
which can occur singly or in combination:</p>

<ul><li><p>To set the flags that determine whether the user has administrative privileges to the Authentication Server,
can obtain a ticket,
can change his or her password,
and so on,
include the <b>-flags</b> argument.</p></li><li><p>To set when the Authentication Database entry expires,
include the <b>-expiration</b> argument.</p></li><li><p>To set the maximum ticket lifetime associated with the entry,
include the <b>-lifetime</b> argument.
<a href="../1/klog.html" class="podlinkman"
>klog(1)</a> explains how this value interacts with others to determine the actual lifetime of a token.</p></li><li><p>To set when the user&#39;s password expires,
include the <b>-pwexpires</b> argument.</p></li><li><p>To set whether the user can reuse any of the previous twenty passwords when creating a new one,
include the <b>-reuse</b> argument.</p></li><li><p>To set the maximum number of times the user can provide an incorrect password before the Authentication Server refuses to accept any more attempts (locks the issuer out),
include the <b>-attempts</b> argument.
After the sixth failed authentication attempt,
the Authentication Server logs a message in the UNIX system log file (the <em>syslog</em> file or equivalent,
for which the standard location varies depending on the operating system).</p></li><li><p>To set how long the Authentication Server refuses to process authentication attempts for a locked-out user,
set the <b>-locktime</b> argument.</p></li></ul>

<p>The <b>kas examine</b> command displays the settings made with this command.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAUTIONS"
>CAUTIONS</a></h1>

<p>The password lifetime set with the <b>-pwexpires</b> argument begins at the time the user&#39;s password was last changed,
rather than when this command is issued.
It can therefore be retroactive.
If,
for example,
a user changed her password 100 days ago and the password lifetime is set to 100 days or less,
the password effectively expires immediately.
To avoid retroactive expiration,
instruct the user to change the password just before setting a password lifetime.</p>

<p>Administrators whose authentication accounts have the <code>ADMIN</code> flag enjoy complete access to the sensitive information in the Authentication Database.
To prevent access by unauthorized users,
use the <b>-attempts</b> argument to impose a fairly strict limit on the number of times that a user obtaining administrative tokens can provide an incorrect password.
Note,
however,
that there must be more than one account in the cell with the <code>ADMIN</code> flag.
The <b>kas unlock</b> command requires the <code>ADMIN</code> privilege,
so it is important that the locked-out administrator (or a colleague) can access another <code>ADMIN</code>-privileged account to unlock the current account.</p>

<p>In certain circumstances,
the mechanism used to enforce the number of failed authentication attempts can cause a lockout even though the number of failed attempts is less than the limit set by the <b>-attempts</b> argument.
Client-side authentication programs such as <b>klog</b> and an AFS-modified login utility normally choose an Authentication Server at random for each authentication attempt,
and in case of a failure are likely to choose a different Authentication Server for the next attempt.
The Authentication Servers running on the various database server machines do not communicate with each other about how many times a user has failed to provide the correct password to them.
Instead,
each Authentication Server maintains its own separate copy of the auxiliary database file <em>kaserverauxdb</em> (located in the <em>/usr/afs/local</em> directory by default),
which records the number of consecutive authentication failures for each user account and the time of the most recent failure.
This implementation means that on average each Authentication Server knows about only a fraction of the total number of failed attempts.
The only way to avoid allowing more than the number of attempts set by the <b>-attempts</b> argument is to have each Authentication Server allow only some fraction of the total.
More specifically,
if the limit on failed attempts is <i>f</i>,
and the number of Authentication Servers is <i>S</i>,
then each Authentication Server can only permit a number of attempts equal to <i>f</i> divided by <i>S</i> (the Ubik synchronization site for the Authentication Server tracks any remainder,
<i>f</i> mod <i>S</i>).</p>

<p>Normally,
this implementation does not reduce the number of allowed attempts to less than the configured limit (<i>f</i>).
If one Authentication Server refuses an attempt,
the client contacts another instance of the server,
continuing until either it successfully authenticates or has contacted all of the servers.
However,
if one or more of the Authentication Server processes is unavailable,
the limit is effectively reduced by a percentage equal to the quantity <i>U</i> divided by <i>S</i>,
where <i>U</i> is the number of unavailable servers and <i>S</i> is the number normally available.</p>

<p>To avoid the undesirable consequences of setting a limit on failed authentication attempts,
note the following recommendations:</p>

<ul><li><p>Do not set the <b>-attempts</b> argument (the limit on failed authentication attempts) too low.
A limit of nine failed attempts is recommended for regular user accounts,
to allow three failed attempts per Authentication Server in a cell with three database server machines.</p></li><li><p>Set fairly short lockout times when including the <b>-locktime</b> argument.
Although guessing passwords is a common method of attack,
it is not a very sophisticated one.
Setting a lockout time can help discourage attackers,
but excessively long times are likely to be more of a burden to authorized users than to potential attackers.
A lockout time of 25 minutes is recommended for regular user accounts.</p></li><li><p>Do not assign an infinite lockout time on an account (by setting the <b>-locktime</b> argument to <code>0</code> [zero]) unless there is a highly compelling reason.
Such accounts almost inevitably become locked at some point,
because each Authentication Server never resets the account&#39;s failure counter in its copy of the <em>kaauxdb</em> file (in contrast,
when the lockout time is not infinite,
the counter resets after the specified amount of time has passed since the last failed attempt to that Authentication Server).
Furthermore,
the only way to unlock an account with an infinite lockout time is for an administrator to issue the <b>kas unlock</b> command.
It is especially dangerous to set an infinite lockout time on an administrative account; if all administrative accounts become locked,
the only way to unlock them is to shut down all instances of the Authentication Server and remove the <em>kaauxdb</em> file on each.</p></li></ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-name_&#60;name_of_user&#62;"
><b>-name</b> &#60;<i>name of user</i>&#62;</a></dt>

<dd>
<p>Names the Authentication Database account for which to change settings.</p>

<dt><a name="-flags_&#60;hex_flag_or_flag_name_expression&#62;"
><b>-flags</b> &#60;<i>hex flag or flag name expression</i>&#62;</a></dt>

<dd>
<p>Sets one or more of four toggling flags,
adding them to any flags currently set.
Either specify one or more of the following strings,
or specify a hexidecimal number that combines the indicated values.
To return all four flags to their defaults,
provide a value of <code>0</code> (zero).
To set more than one flag at once using the strings,
connect them with plus signs (example: <code>NOTGS+ADMIN+CPW</code>).
To remove all the current flag settings before setting new ones,
precede the list with an equal sign (example: <code>=NOTGS+ADMIN+CPW</code>).</p>

<dl>
<dt><a name="ADMIN"
>ADMIN</a></dt>

<dd>
<p>The user is allowed to issue privileged kas commands (hexadecimal equivalent is <code>0x004</code>,
default is <code>NOADMIN</code>).</p>

<dt><a name="NOTGS"
>NOTGS</a></dt>

<dd>
<p>The Authentication Server&#39;s Ticket Granting Service (TGS) refuses to issue tickets to the user (hexadecimal equivalent is <code>0x008</code>,
default is <code>TGS</code>).</p>

<dt><a name="NOSEAL"
>NOSEAL</a></dt>

<dd>
<p>The Ticket Granting Service cannot use the contents of this entry&#39;s key field as an encryption key (hexadecimal equivalent is <code>0x020</code>,
default is <code>SEAL</code>).</p>

<dt><a name="NOCPW"
>NOCPW</a></dt>

<dd>
<p>The user cannot change his or her own password or key (hexadecimal equivalent is <code>0x040</code>,
default is <code>CPW</code>).</p>
</dd>
</dl>

<dt><a name="-expiration_&#60;date_of_account_expiration&#62;"
><b>-expiration</b> &#60;<i>date of account expiration</i>&#62;</a></dt>

<dd>
<p>Determines when the entry itself expires.
When a user entry expires,
the user becomes unable to log in; when a server entry such as <code>afs</code> expires,
all server processes that use the associated key become inaccessible.
Provide one of the three acceptable values:</p>

<dl>
<dt><a name="never"
>never</a></dt>

<dd>
<p>The account never expires (the default).</p>

<dt><a name="mm/dd/yyyy"
><i>mm/dd/yyyy</i></a></dt>

<dd>
<p>Sets the expiration date to 12:00 a.m.
on the indicated date (month/day/year).
Examples: <code>01/23/1999</code>,
<code>10/07/2000</code>.</p>

<dt><a name="&#34;mm/dd/yyyy_hh:MM&#34;"
>&#34;<i>mm/dd/yyyy hh:MM</i>&#34;</a></dt>

<dd>
<p>Sets the expiration date to the indicated time (hours:minutes) on the indicated date (month/day/year).
Specify the time in 24-hour format (for example,
<code>20:30</code> is 8:30 p.m.) Date format is the same as for a date alone.
Surround the entire instance with quotes because it contains a space.
Examples: <code>&#34;01/23/1999 22:30&#34;</code>,
<code>&#34;10/07/2000 3:45&#34;</code>.</p>
</dd>
</dl>

<p>Acceptable values for the year range from <code>1970</code> (1 January 1970 is time 0 in the standard UNIX date representation) through <code>2037</code> (2037 is the maximum because the UNIX representation cannot accommodate dates later than a value in February 2038).</p>

<dt><a name="-lifetime_&#60;maximum_ticket_lifetime&#62;"
><b>-lifetime</b> &#60;<i>maximum ticket lifetime</i>&#62;</a></dt>

<dd>
<p>Specifies the maximum lifetime that the Authentication Server&#39;s Ticket Granting Service (TGS) can assign to a ticket.
If the account belongs to a user,
this value is the maximum lifetime of a token issued to the user.
If the account corresponds to a server such as <code>afs</code>,
this value is the maximum lifetime of a ticket that the TGS issues to clients for presentation to the server during mutual authentication.</p>

<p>Specify an integer that represents a number of seconds (3600 equals one hour),
or include a colon in the number to indicate a number of hours and minutes (<code>10:00</code> equals 10 hours).
If this argument is omitted,
the default setting is 100:00 hours (360000 seconds).</p>

<dt><a name="-pwexpires_&#60;number_of_days_password_is_valid&#62;"
><b>-pwexpires</b> &#60;<i>number of days password is valid</i>&#62;</a></dt>

<dd>
<p>Sets the number of days after the user&#39;s password was last changed that it remains valid.
Provide an integer from the range <code>1</code> through <code>254</code> to specify the number of days until expiration,
or the value <code>0</code> to indicate that the password never expires (the default).</p>

<p>When the password expires,
the user is unable to authenticate,
but has 30 days after the expiration date in which to use the <b>kpasswd</b> command to change the password (after that,
only an administrator can change it by using the <b>kas setpassword</b> command).
Note that the clock starts at the time the password was last changed,
not when the <b>kas setfields</b> command is issued.
To avoid retroactive expiration,
have the user change the password just before issuing a command that includes this argument.</p>

<dt><a name="-reuse_(yes_|_no)"
><b>-reuse</b> (yes | no)</a></dt>

<dd>
<p>Specifies whether or not the user can reuse any of his or her last 20 passwords.
The acceptable values are <code>yes</code> to allow reuse of old passwords (the default) and <code>no</code> to prohibit reuse of a password that is similar to one of the previous 20 passwords.</p>

<dt><a name="-attempts_&#60;maximum_successive_failed_login_tries&#62;"
><b>-attempts</b> &#60;<i>maximum successive failed login tries</i>&#62;</a></dt>

<dd>
<p>Sets the number of consecutive times the user can provide an incorrect password during authentication (using the <b>klog</b> command or a login utility that grants AFS tokens).
When the user exceeds the limit,
the Authentication Server rejects further attempts (locks the user out) for the amount of time specified by the <b>-locktime</b> argument.
Provide an integer from the range <code>1</code> through <code>254</code> to specify the number of failures allowed,
or <code>0</code> to indicate that there is no limit on authentication attempts (the default value).</p>

<dt><a name="-locktime_&#60;failure_penalty&#62;"
><b>-locktime</b> &#60;<i>failure penalty</i>&#62;</a></dt>

<dd>
<p>Specifies how long the Authentication Server refuses authentication attempts from a user who has exceeded the failure limit set by the <b>-attempts</b> argument.</p>

<p>Specify a number of hours and minutes (<i>hh:mm</i>) or minutes only (<i>mm</i>),
from the range <code>01</code> (one minute) through <code>36:00</code> (36 hours).
The <b>kas</b> command interpreter automatically reduces any larger value to <code>36:00</code> and also rounds up any non-zero value to the next higher multiple of 8.5 minutes.
A value of <code>0</code> (zero) sets an infinite lockout time; an administrator must issue the <b>kas unlock</b> command to unlock the account.</p>

<dt><a name="-admin_username_&#60;admin_principal&#62;"
><b>-admin_username</b> &#60;<i>admin principal</i>&#62;</a></dt>

<dd>
<p>Specifies the user identity under which to authenticate with the Authentication Server for execution of the command.
For more details,
see <a href="../8/kas.html" class="podlinkman"
>kas(8)</a>.</p>

<dt><a name="-password_for_admin_&#60;admin_password&#62;"
><b>-password_for_admin</b> &#60;<i>admin password</i>&#62;</a></dt>

<dd>
<p>Specifies the password of the command&#39;s issuer.
If it is omitted (as recommended),
the <b>kas</b> command interpreter prompts for it and does not echo it visibly.
For more details,
see <a href="../8/kas.html" class="podlinkman"
>kas(8)</a>.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
For more details,
see <a href="../8/kas.html" class="podlinkman"
>kas(8)</a>.</p>

<dt><a name="-servers_&#60;authentication_servers&#62;+"
><b>-servers</b> &#60;<i>authentication servers</i>&#62;+</a></dt>

<dd>
<p>Names each machine running an Authentication Server with which to establish a connection.
For more details,
see <a href="../8/kas.html" class="podlinkman"
>kas(8)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer.
For more details,
see <a href="../8/kas.html" class="podlinkman"
>kas(8)</a>.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command.
All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>In the following example,
an administrator using the <code>admin</code> account grants administrative privilege to the user <code>smith</code>,
and sets the Authentication Database entry to expire at midnight on 31 December 2000.</p>

<pre>   % kas setfields -name smith -flags ADMIN -expiration 12/31/2000
   Password for admin:</pre>

<p>In the following example, an administrator using the <code>admin</code> account sets the user <code>pat</code>&#39;s password to expire in 60 days from when it last changed, and prohibits reuse of passwords.</p>

<pre>   % kas setfields -name pat -pwexpires 60 -reuse no
   Password for admin:</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must have the <code>ADMIN</code> flag set on his or her Authentication Database entry.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/kaserverauxdb.html" class="podlinkman"
>kaserverauxdb(5)</a>, <a href="../8/kas.html" class="podlinkman"
>kas(8)</a>, <a href="../8/kas_examine.html" class="podlinkpod"
>kas_examine(8)</a>, <a href="../8/kas_setpassword.html" class="podlinkpod"
>kas_setpassword(8)</a>, <a href="../8/kas_unlock.html" class="podlinkpod"
>kas_unlock(8)</a>, <a href="../1/klog.html" class="podlinkman"
>klog(1)</a>, <a href="../1/kpasswd.html" class="podlinkman"
>kpasswd(1)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>

<!-- end doc -->

</body></html>
