<html><head><title>bos</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Mon Jul 28 01:10:47 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>bos - Introduction to the bos command suite</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The commands in the <b>bos</b> command suite are the administrative interface to the Basic OverSeer (BOS) Server,
which runs on every file server machine to monitor the other server processes on it.
If a process fails,
the BOS Server can restart it automatically,
taking into account interdependencies between it and other processes.
The BOS Server frees system administrators from constantly monitoring the status of server machines and processes.</p>

<p>There are several categories of commands in the <b>bos</b> command suite:</p>

<ul><li><p>Commands to administer server process binary files: <b>bos getdate</b>,
<b>bos install</b>,
<b>bos prune</b>,
and <b>bos uninstall</b>.</p></li><li><p>Commands to maintain system configuration files: <b>bos addhost</b>,
<b>bos addkey</b>,
<b>bos adduser</b>,
<b>bos listhosts</b>,
<b>bos listkeys</b>,
<b>bos listusers</b>,
<b>bos removehost</b>,
<b>bos removekey</b>,
<b>bos removeuser</b>,
and <b>bos setcellname</b>.</p></li><li><p>Commands to start and stop processes: <b>bos create</b>,
<b>bos delete</b>,
<b>bos restart</b>,
<b>bos shutdown</b>,
<b>bos start</b>,
<b>bos startup</b>,
and <b>bos stop</b>.</p></li><li><p>Commands to set and verify server process and server machine status: <b>bos getlog</b>,
<b>bos getrestart</b>,
<b>bos setauth</b>,
<b>bos setrestart</b>,
and <b>bos status</b>.</p></li><li><p>A command to restore file system consistency: <b>bos salvage</b>.</p></li><li><p>Commands to obtain help: <b>bos apropos</b> and <b>bos help</b>.</p></li></ul>

<p>The BOS Server and the <b>bos</b> commands use and maintain the following configuration and log files:</p>

<ul><li><p>The <em>/usr/afs/etc/CellServDB</em> file lists the local cell&#39;s database server machines.
These machines run the Authentication,
Backup,
Protection and Volume Location (VL) Server processes,
which maintain databases of administrative information.
The database server processes consult the file to learn about their peers,
whereas the other server processes consult it to learn where to access database information as needed.
To administer the <em>CellServDB</em> file,
use the following commands: <b>bos addhost</b>,
<b>bos listhosts</b>,
<b>bos removehost</b>,
and <b>bos setcellname</b>.</p></li><li><p>The <em>/usr/afs/etc/KeyFile</em> file lists the server encryption keys that the server processes use to decrypt tickets presented by client processes and one another.
To administer the <em>KeyFile</em> file,
use the following commands: <b>bos addkey</b>,
<b>bos listkeys</b>,
and <b>bos removekey</b>.</p></li><li><p>The <em>/usr/afs/etc/ThisCell</em> file defines the cell to which the server machine belongs for the purposes of server-to-server communication.
Administer it with the <b>bos setcellname</b> command.
There is also a <em>/usr/vice/etc/ThisCell</em> file that defines the machine&#39;s cell membership with respect to the AFS command suites and Cache Manager access to AFS data.</p></li><li><p>The <em>/usr/afs/etc/UserList</em> file lists the user name of each administrator authorized to issue privileged <b>bos</b> and <b>vos</b> commands.
To administer the <em>UserList</em> file,
use the following commands: <b>bos adduser</b>,
<b>bos listusers</b>,
and <b>bos removeuser</b>.</p></li><li><p>The <em>/usr/afs/local/BosConfig</em> file defines which AFS server processes run on the server machine,
and whether the BOS Server restarts them automatically if they fail.
It also defines when all processes restart automatically (by default once per week),
and when the BOS Server restarts processes that have new binary files (by default once per day).
To administer the <em>BosConfig</em> file,
use the following commands: <b>bos create</b>,
<b>bos delete</b>,
<b>bos getrestart</b>,
<b>bos setrestart</b>,
<b>bos start</b>,
and <b>bos stop</b>.</p></li><li><p>The <em>/usr/afs/log/BosLog</em> file records important operations the BOS Server performs and error conditions it encounters.</p></li></ul>

<p>For more details,
see the reference page for each file.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<p>The following arguments and flags are available on many commands in the <b>bos</b> suite.
The reference page for each command also lists them,
but they are described here in greater detail.</p>

<dl>
<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command.
It is acceptable to abbreviate the cell name to the shortest form that distinguishes it from the other entries in the <em>/usr/vice/etc/CellServDB</em> file on the local machine.
If the <b>-cell</b> argument is omitted,
the command interpreter determines the name of the local cell by reading the following in order:</p>

<ul><li><p>The value of the AFSCELL environment variable.</p></li><li><p>The local <em>/usr/vice/etc/ThisCell</em> file.</p></li></ul>

<p>Do not combine the <b>-cell</b> and <b>-localauth</b> options.
A command on which the <b>-localauth</b> flag is included always runs in the local cell (as defined in the server machine&#39;s local <em>/usr/afs/etc/ThisCell</em> file),
whereas a command on which the <b>-cell</b> argument is included runs in the specified foreign cell.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints a command&#39;s online help message on the standard output stream.
Do not combine this flag with any of the command&#39;s other options; when it is provided,
the command interpreter ignores all other options,
and only prints the help message.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using the server encryption key with the highest key version number in the local <em>/usr/afs/etc/KeyFile</em> file.
The <b>bos</b> command interpreter presents the ticket,
which never expires,
to the BOS Server during mutual authentication.</p>

<p>Use this flag only when issuing a command on a server machine; client machines do not usually have a <em>/usr/afs/etc/KeyFile</em> file.
The issuer of a command that includes this flag must be logged on to the server machine as the local superuser <code>root</code>.
The flag is useful for commands invoked by an unattended application program,
such as a process controlled by the UNIX <b>cron</b> utility or by a cron entry in the machine&#39;s <em>/usr/afs/local/BosConfig</em> file.
It is also useful if an administrator is unable to authenticate to AFS but is logged in as the local superuser <code>root</code>.</p>

<p>Do not combine the <b>-cell</b> and <b>-localauth</b> options.
A command on which the <b>-localauth</b> flag is included always runs in the local cell (as defined in the server machine&#39;s local <em>/usr/afs/etc/ThisCell</em> file),
whereas a command on which the <b>-cell</b> argument is included runs in the specified foreign cell.
Also,
do not combine the <b>-localauth</b> and <b>-noauth</b> flags.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Establishes an unauthenticated connection to the BOS Server,
in which the BOS Server treats the issuer as the unprivileged user <code>anonymous</code>.
It is useful only when authorization checking is disabled on the server machine (during the installation of a file server machine or when the <b>bos setauth</b> command has been used during other unusual circumstances).
In normal circumstances,
the BOS Server allows only privileged users to issue commands that change the status of a server or configuration file,
and refuses to perform such an action even if the <b>-noauth</b> flag is provided.
Do not combine the <b>-noauth</b> and <b>-localauth</b> flags.</p>

<dt><a name="-server_&#60;machine_name&#62;"
><b>-server</b> &#60;<i>machine name</i>&#62;</a></dt>

<dd>
<p>Indicates the AFS server machine on which to run the command.
Identify the machine by its IP address in dotted decimal format,
its fully-qualified host name (for example,
<code>fs1.abc.com</code>),
or by an abbreviated form of its host name that distinguishes it from other machines.
Successful use of an abbreviated form depends on the availability of a name service (such as the Domain Name Service or a local host table) at the time the command is issued.</p>

<p>For the commands that alter the administrative files shared by all server machines in the cell (the <b>bos addhost</b>,
<b>bos addkey</b>,
<b>bos adduser</b>,
<b>bos removehost</b>,
<b>bos removekey</b>,
and <b>bos removeuser</b> commands),
the appropriate machine depends on whether the cell uses the United States or international version of AFS:</p>

<ul><li><p>If the cell (as recommended) uses the Update Server to distribute the contents of the <em>/usr/afs/etc</em> directory,
provide the name of the system control machine.
After issuing the command,
allow up to five minutes for the Update Server to distribute the changed file to the other AFS server machines in the cell.
If the specified machine is not the system control machine but is running an <b>upclient</b> process that refers to the system control machine,
then the change will be overwritten when the process next brings over the relevant file from the system control machine.</p></li><li><p>Otherwise,
repeatedly issue the command,
naming each of the cell&#39;s server machines in turn.
To avoid possible inconsistency problems,
finish issuing the commands within a fairly short time.</p></li></ul>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>To issue any bos command that changes a configuration file or alters process status,
the issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the server machine named by the <b>-server</b> argument.
Alternatively,
if the <b>-localauth</b> flag is included the issuer must be logged on as the local superuser <code>root</code>.</p>

<p>To issue a bos command that only displays information (other than the <b>bos listkeys</b> command),
no privilege is required.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/BosConfig.html" class="podlinkman"
>BosConfig(5)</a>,
<a href="../5/CellServDB.html" class="podlinkman"
>CellServDB(5)</a>,
<a href="../5/KeyFile.html" class="podlinkman"
>KeyFile(5)</a>,
<a href="../5/ThisCell.html" class="podlinkman"
>ThisCell(5)</a>,
<a href="../5/UserList.html" class="podlinkman"
>UserList(5)</a>,
<a href="../8/bos_addhost.html" class="podlinkpod"
>bos_addhost(8)</a>,
<a href="../8/bos_addkey.html" class="podlinkpod"
>bos_addkey(8)</a>,
<a href="../8/bos_adduser.html" class="podlinkpod"
>bos_adduser(8)</a>,
<a href="../8/bos_apropos.html" class="podlinkpod"
>bos_apropos(8)</a>,
<a href="../8/bos_create.html" class="podlinkpod"
>bos_create(8)</a>,
<a href="../8/bos_delete.html" class="podlinkpod"
>bos_delete(8)</a>,
<a href="../8/bos_exec.html" class="podlinkpod"
>bos_exec(8)</a>,
<a href="../8/bos_getdate.html" class="podlinkpod"
>bos_getdate(8)</a>,
<a href="../8/bos_getlog.html" class="podlinkpod"
>bos_getlog(8)</a>,
<a href="../8/bos_getrestart.html" class="podlinkpod"
>bos_getrestart(8)</a>,
<a href="../8/bos_help.html" class="podlinkpod"
>bos_help(8)</a>,
<a href="../8/bos_install.html" class="podlinkpod"
>bos_install(8)</a>,
<a href="../8/bos_listhosts.html" class="podlinkpod"
>bos_listhosts(8)</a>,
<a href="../8/bos_listkeys.html" class="podlinkpod"
>bos_listkeys(8)</a>,
<a href="../8/bos_listusers.html" class="podlinkpod"
>bos_listusers(8)</a>,
<a href="../8/bos_prune.html" class="podlinkpod"
>bos_prune(8)</a>,
<a href="../8/bos_removehost.html" class="podlinkpod"
>bos_removehost(8)</a>,
<a href="../8/bos_removekey.html" class="podlinkpod"
>bos_removekey(8)</a>,
<a href="../8/bos_removeuser.html" class="podlinkpod"
>bos_removeuser(8)</a>,
<a href="../8/bos_restart.html" class="podlinkpod"
>bos_restart(8)</a>,
<a href="../8/bos_salvage.html" class="podlinkpod"
>bos_salvage(8)</a>,
<a href="../8/bos_setauth.html" class="podlinkpod"
>bos_setauth(8)</a>,
<a href="../8/bos_setcellname.html" class="podlinkpod"
>bos_setcellname(8)</a>,
<a href="../8/bos_setrestart.html" class="podlinkpod"
>bos_setrestart(8)</a>,
<a href="../8/bos_shutdown.html" class="podlinkpod"
>bos_shutdown(8)</a>,
<a href="../8/bos_start.html" class="podlinkpod"
>bos_start(8)</a>,
<a href="../8/bos_startup.html" class="podlinkpod"
>bos_startup(8)</a>,
<a href="../8/bos_status.html" class="podlinkpod"
>bos_status(8)</a>,
<a href="../8/bos_stop.html" class="podlinkpod"
>bos_stop(8)</a>,
<a href="../8/bos_uninstall.html" class="podlinkpod"
>bos_uninstall(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000.
&#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0.
It was converted from HTML to POD by software written by Chas Williams and Russ Allbery,
based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
