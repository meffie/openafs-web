<html><head><title>bos_addkey</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="style" type="text/css" href="../style.css" media="all" >

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Tue Nov 11 07:45:48 2008 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="indexlink"><a href="../index.html">Back to Index</a></p>
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>bos_addkey - Adds a new server encryption key to the KeyFile file</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>


<div class="synopsis">


<p><b>bos addkey</b> <b>-server</b>&#160;&#60;<i>machine&#160;name</i>&#62; [<b>-key</b>&#160;&#60;<i>key</i>&#62;] <b>-kvno</b>&#160;&#60;<i>key&#160;version&#160;number</i>&#62; [<b>-cell</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-noauth</b>] [<b>-localauth</b>] [<b>-help</b>]</p>

<p><b>bos addk</b> <b>-s</b>&#160;&#60;<i>machine&#160;name</i>&#62; [<b>-ke</b>&#160;&#60;<i>key</i>&#62;] <b>-kv</b>&#160;&#60;<i>key&#160;version&#160;number</i>&#62; [<b>-ce</b>&#160;&#60;<i>cell&#160;name</i>&#62;] [<b>-n</b>] [<b>-l</b>] [<b>-h</b>]</p>


</div>


<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>The <b>bos addkey</b> command constructs a server encryption key from the text string provided,
assigns it the key version number specified with the <b>-kvno</b> argument,
and adds it to the <em>/usr/afs/etc/KeyFile</em> file on the machine specified with the <b>-server</b> argument.
Be sure to use the <b>kas setpassword</b> or <b>kas setkey</b> command to add the same key to the <code>afs</code> entry in the Authentication Database.</p>

<p>Do not use the <b>-key</b> argument,
which echoes the password string visibly on the screen.
If the argument is omitted,
the BOS Server prompts for the string and does not echo it visibly:</p>

<pre>   Input key:
   Retype input key:</pre>

<p>The BOS Server prohibits reuse of any key version number already listed in the <em>/usr/afs/etc/KeyFile</em> file. This ensures that users who still have tickets sealed with the current key are not prevented from communicating with a server process because the current key is overwritten with a new key. Use the <b>bos listkeys</b> command to display the key version numbers in the <em>/usr/afs/etc/KeyFile</em> file.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OPTIONS"
>OPTIONS</a></h1>

<dl>
<dt><a name="-server_&#60;machine_name&#62;"
><b>-server</b> &#60;<i>machine name</i>&#62;</a></dt>

<dd>
<p>Indicates the server machine on which to change the <em>/usr/afs/etc/KeyFile</em> file. Identify the machine by IP address or its host name (either fully-qualified or abbreviated unambiguously). For details, see <a href="../8/bos.html" class="podlinkman"
>bos(8)</a>.</p>

<p>In cells that use the Update Server to distribute the contents of the <em>/usr/afs/etc</em> directory, it is conventional to specify only the system control machine as a value for the <b>-server</b> argument. Otherwise, repeat the command for each file server machine. For further discussion, see <a href="../8/bos.html" class="podlinkman"
>bos(8)</a>.</p>

<dt><a name="-key_&#60;key&#62;"
><b>-key</b> &#60;<i>key</i>&#62;</a></dt>

<dd>
<p>Specifies a character string just like a password; the BOS Server calls a DES conversion function to encode it into a form appropriate for use as an encryption key. Omit this argument to have the BOS Server prompt for the string instead.</p>

<dt><a name="-kvno_&#60;key_version_number&#62;"
><b>-kvno</b> &#60;<i>key version number</i>&#62;</a></dt>

<dd>
<p>Defines the new key&#39;s key version number. It must be an integer in the range from <code>0</code> (zero) through <code>255</code>. For the sake of simplicity, use the number one higher than the current highest key version number; use the <b>bos listkeys</b> command to display key version numbers.</p>

<dt><a name="-cell_&#60;cell_name&#62;"
><b>-cell</b> &#60;<i>cell name</i>&#62;</a></dt>

<dd>
<p>Names the cell in which to run the command. Do not combine this argument with the <b>-localauth</b> flag. For more details, see <a href="../8/bos.html" class="podlinkman"
>bos(8)</a>.</p>

<dt><a name="-noauth"
><b>-noauth</b></a></dt>

<dd>
<p>Assigns the unprivileged identity <code>anonymous</code> to the issuer. Do not combine this flag with the <b>-localauth</b> flag. For more details, see <a href="../8/bos.html" class="podlinkman"
>bos(8)</a>.</p>

<dt><a name="-localauth"
><b>-localauth</b></a></dt>

<dd>
<p>Constructs a server ticket using a key from the local <em>/usr/afs/etc/KeyFile</em> file. The <b>bos</b> command interpreter presents the ticket to the BOS Server during mutual authentication. Do not combine this flag with the <b>-cell</b> or <b>-noauth</b> options. For more details, see <a href="../8/bos.html" class="podlinkman"
>bos(8)</a>.</p>

<dt><a name="-help"
><b>-help</b></a></dt>

<dd>
<p>Prints the online help for this command. All other valid options are ignored.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="OUTPUT"
>OUTPUT</a></h1>

<p>If the strings typed at the <code>Input key</code> and <code>Retype input key</code> prompts do not match, the following message appears, and the command exits without adding a new key:</p>

<pre>   Input key mismatch</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The following command adds a new server encryption key with key version number 14 to the <b>KeyFile</b> file kept on the machine <code>fs1.abc.com</code> (the system control machine). The issuer omits the <b>-key</b> argument, as recommended, and provides the password at the prompts.</p>

<pre>   % bos addkey -server fs1.abc.com -kvno 14
   Input key:
   Retype input key:</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVILEGE_REQUIRED"
>PRIVILEGE REQUIRED</a></h1>

<p>The issuer must be listed in the <em>/usr/afs/etc/UserList</em> file on the machine named by the <b>-server</b> argument, or must be logged onto a server machine as the local superuser <code>root</code> if the <b>-localauth</b> flag is included.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="../5/KeyFile.html" class="podlinkman"
>KeyFile(5)</a>, <a href="../5/UserList.html" class="podlinkman"
>UserList(5)</a>, <a href="../8/bos.html" class="podlinkman"
>bos(8)</a>, <a href="../8/bos_listkeys.html" class="podlinkpod"
>bos_listkeys(8)</a>, <a href="../8/bos_removekey.html" class="podlinkpod"
>bos_removekey(8)</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>IBM Corporation 2000. &#60;http://www.ibm.com/&#62; All Rights Reserved.</p>

<p>This documentation is covered by the IBM Public License Version 1.0. It was converted from HTML to POD by software written by Chas Williams and Russ Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.</p>
<p class="indexlink"><a href="../index.html">Back to Index</a></p>

<!-- end doc -->

</body></html>
